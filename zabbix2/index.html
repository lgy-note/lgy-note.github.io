



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.3">
    
    
      
        <title>zabbix2 - mkdocs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.30686662.css">
      
      
    
    
      <script src="../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../extra.css">
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#grafana" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="mkdocs" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              mkdocs
            </span>
            <span class="md-header-nav__topic">
              
                zabbix2
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href=".." class="md-tabs__link">
        home
      </a>
    
  </li>

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../python-base/" class="md-tabs__link">
          python
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../nginx/" class="md-tabs__link">
          service
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../mysql/" class="md-tabs__link">
          database
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../open-falcon/" class="md-tabs__link md-tabs__link--active">
          monitor
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../tcp-issue/" class="md-tabs__link">
          basis
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href=".." title="mkdocs" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    mkdocs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="home" class="md-nav__link">
      home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      python
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        python
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../python-base/" title="python-base" class="md-nav__link">
      python-base
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../python-lib/" title="python-lib" class="md-nav__link">
      python-lib
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../python-lib2/" title="python-lib2" class="md-nav__link">
      python-lib2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../python-web/" title="python-web" class="md-nav__link">
      python-web
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../python-other/" title="python-other" class="md-nav__link">
      python-other
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      service
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        service
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../nginx/" title="nginx" class="md-nav__link">
      nginx
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../nginx2/" title="nginx2" class="md-nav__link">
      nginx2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../apache/" title="apache" class="md-nav__link">
      apache
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../saltstack/" title="saltstack" class="md-nav__link">
      saltstack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tomcat/" title="tomcat" class="md-nav__link">
      tomcat
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ansible/" title="ansible" class="md-nav__link">
      ansible
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../trafficserver/" title="trafficserver" class="md-nav__link">
      trafficserver
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../haproxy/" title="haproxy" class="md-nav__link">
      haproxy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../docker/" title="docker" class="md-nav__link">
      docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../varnish/" title="varnish" class="md-nav__link">
      varnish
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../bind/" title="bind" class="md-nav__link">
      bind
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lvs/" title="lvs" class="md-nav__link">
      lvs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../log-analysis/" title="log-analysis" class="md-nav__link">
      log-analysis
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      database
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        database
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../mysql/" title="mysql" class="md-nav__link">
      mysql
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../mysql2/" title="mysql2" class="md-nav__link">
      mysql2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../memcached/" title="memcached" class="md-nav__link">
      memcached
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../redis/" title="redis" class="md-nav__link">
      redis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../mongodb/" title="mongodb" class="md-nav__link">
      mongodb
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hadoop/" title="hadoop" class="md-nav__link">
      hadoop
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../postgresql/" title="postgresql" class="md-nav__link">
      postgresql
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      monitor
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        monitor
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../open-falcon/" title="open-falcon" class="md-nav__link">
      open-falcon
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../zabbix/" title="zabbix" class="md-nav__link">
      zabbix
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        zabbix2
      </label>
    
    <a href="./" title="zabbix2" class="md-nav__link md-nav__link--active">
      zabbix2
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#grafana" class="md-nav__link">
    grafana
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mail" class="md-nav__link">
    主动模式 mail
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#zabbix-key" class="md-nav__link">
    zabbix key
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#zabbix-api" class="md-nav__link">
    zabbix api
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#jmx" class="md-nav__link">
    jmx监控
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#discover-rule" class="md-nav__link">
    discover rule
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#io" class="md-nav__link">
    io
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tcp" class="md-nav__link">
    tcp状态
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#zabbix_proxy" class="md-nav__link">
    zabbix_proxy
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ztree" class="md-nav__link">
    ztree插件
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    自动注册
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key" class="md-nav__link">
    自定义key
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../netdata/" title="netdata" class="md-nav__link">
      netdata
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      basis
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        basis
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../tcp-issue/" title="tcp-issue" class="md-nav__link">
      tcp-issue
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../git-svn/" title="git-svn" class="md-nav__link">
      git-svn
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../vpn/" title="vpn" class="md-nav__link">
      vpn
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../shell/" title="shell" class="md-nav__link">
      shell
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../disk/" title="disk" class="md-nav__link">
      disk
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../filesystem/" title="filesystem" class="md-nav__link">
      filesystem
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../source/" title="source" class="md-nav__link">
      source
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../command/" title="command" class="md-nav__link">
      command
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../linux-base/" title="linux-base" class="md-nav__link">
      linux-base
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../linux-soft/" title="linux-soft" class="md-nav__link">
      linux-soft
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../other/" title="other" class="md-nav__link">
      other
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#grafana" class="md-nav__link">
    grafana
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mail" class="md-nav__link">
    主动模式 mail
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#zabbix-key" class="md-nav__link">
    zabbix key
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#zabbix-api" class="md-nav__link">
    zabbix api
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#jmx" class="md-nav__link">
    jmx监控
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#discover-rule" class="md-nav__link">
    discover rule
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#io" class="md-nav__link">
    io
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tcp" class="md-nav__link">
    tcp状态
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#zabbix_proxy" class="md-nav__link">
    zabbix_proxy
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ztree" class="md-nav__link">
    ztree插件
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    自动注册
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key" class="md-nav__link">
    自定义key
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>zabbix2</h1>
                
                <h2 id="grafana">grafana</h2>
<div class="codehilite"><pre><span></span><span class="n">grafana</span><span class="err">的版本和</span><span class="n">grafana</span><span class="o">-</span><span class="n">zabbix</span><span class="err">的版本必须匹配，否则会出现异常</span><span class="p">,</span><span class="err">如果后面</span><span class="n">grafana</span><span class="err">和</span><span class="n">grafana</span><span class="o">-</span><span class="n">zabbix</span><span class="err">更新，需要将</span><span class="mi">2</span><span class="err">个版本匹配即可</span>

<span class="n">yum</span> <span class="n">install</span>  <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">grafanarel</span><span class="p">.</span><span class="n">s3</span><span class="p">.</span><span class="n">amazonaws</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">builds</span><span class="o">/</span><span class="n">grafana</span><span class="o">-</span><span class="mi">2</span><span class="p">.</span><span class="mi">5</span><span class="p">.</span><span class="mi">0</span><span class="o">-</span><span class="mi">1</span><span class="p">.</span><span class="n">x86_64</span><span class="p">.</span><span class="n">rpm</span>
<span class="err">安装包内容</span>
<span class="err">二进制文件</span>     <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">grafana</span><span class="o">-</span><span class="n">server</span>
<span class="err">启动脚本</span>         <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">init</span><span class="p">.</span><span class="n">d</span><span class="o">/</span><span class="n">grafana</span><span class="o">-</span><span class="n">server</span>
<span class="err">环境变量</span>         <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">sysconfig</span><span class="o">/</span><span class="n">grafana</span><span class="o">-</span><span class="n">server</span>
<span class="err">配置文件</span>         <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">grafana</span><span class="o">/</span><span class="n">grafana</span><span class="p">.</span><span class="n">ini</span>
<span class="n">systemd</span><span class="err">服务</span>  <span class="n">grafana</span><span class="o">-</span><span class="n">server</span><span class="p">.</span><span class="n">service</span>
<span class="err">日志</span>                 <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">grafana</span><span class="o">/</span><span class="n">grafana</span><span class="p">.</span><span class="n">log</span>
<span class="n">sqlite3</span><span class="err">数据库</span>  <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">grafana</span><span class="o">/</span><span class="n">grafana</span><span class="p">.</span><span class="n">db</span>

<span class="err">启动服务</span>
<span class="n">shell</span><span class="o">#</span><span class="n">sudo</span> <span class="n">service</span> <span class="n">grafana</span><span class="o">-</span><span class="n">server</span> <span class="k">start</span>
<span class="err">服务详情</span>
<span class="err">启动用户</span> <span class="n">grafana</span>
<span class="err">服务名称</span> <span class="n">grafana</span><span class="o">-</span><span class="n">server</span>
<span class="err">默认端口</span> <span class="mi">3000</span>

<span class="err">服务自启动</span>
<span class="n">shell</span><span class="o">#</span><span class="n">sudo</span> <span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">chkconfig</span> <span class="c1">--add grafana-server</span>
<span class="o">####</span><span class="n">CentOS7</span><span class="o">####</span>
<span class="n">shell</span><span class="o">#</span><span class="n">sudo</span> <span class="n">systemctl</span> <span class="n">daemon</span><span class="o">-</span><span class="n">reload</span>
<span class="n">shell</span><span class="o">#</span><span class="n">sudo</span> <span class="n">systemctl</span> <span class="k">start</span> <span class="n">grafana</span><span class="o">-</span><span class="n">server</span>
<span class="n">shell</span><span class="o">#</span><span class="n">sudo</span> <span class="n">systemctl</span> <span class="n">status</span> <span class="n">grafana</span><span class="o">-</span><span class="n">server</span>
<span class="n">shell</span><span class="o">#</span><span class="n">sudo</span> <span class="n">systemctl</span> <span class="n">enable</span> <span class="n">grafana</span><span class="o">-</span><span class="n">server</span><span class="p">.</span><span class="n">service</span>


<span class="err">安装</span><span class="n">grafana</span><span class="o">-</span><span class="n">zabbix</span><span class="err">插件</span>
<span class="n">wget</span>  <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">alexanderzobnin</span><span class="o">/</span><span class="n">grafana</span><span class="o">-</span><span class="n">zabbix</span><span class="o">/</span><span class="n">archive</span><span class="o">/</span><span class="n">v2</span><span class="p">.</span><span class="mi">5</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="n">tar</span><span class="p">.</span><span class="n">gz</span>
<span class="n">tar</span> <span class="o">-</span><span class="n">zxf</span> <span class="n">grafana</span><span class="o">-</span><span class="n">zabbix</span><span class="o">-</span><span class="mi">2</span><span class="p">.</span><span class="mi">5</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="n">tar</span><span class="p">.</span><span class="n">gz</span> 
<span class="n">cd</span> <span class="n">grafana</span><span class="o">-</span><span class="n">zabbix</span><span class="o">-</span><span class="mi">2</span><span class="p">.</span><span class="mi">5</span><span class="p">.</span><span class="mi">1</span><span class="o">/</span>
<span class="n">cp</span> <span class="o">-</span><span class="n">r</span> <span class="n">zabbix</span><span class="o">/</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="k">share</span><span class="o">/</span><span class="n">grafana</span><span class="o">/</span><span class="k">public</span><span class="o">/</span><span class="n">app</span><span class="o">/</span><span class="n">plugins</span><span class="o">/</span><span class="n">datasource</span><span class="o">/</span>
<span class="n">cd</span>  <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="k">share</span><span class="o">/</span><span class="n">grafana</span><span class="o">/</span><span class="k">public</span><span class="o">/</span><span class="n">app</span><span class="o">/</span><span class="n">plugins</span><span class="o">/</span><span class="n">datasource</span><span class="o">/</span><span class="n">zabbix</span><span class="o">/</span>
<span class="err">修改</span> <span class="n">plugin</span><span class="p">.</span><span class="n">json</span>
<span class="err">{</span>
  <span class="ss">&quot;pluginType&quot;</span><span class="p">:</span> <span class="ss">&quot;datasource&quot;</span><span class="p">,</span>
  <span class="ss">&quot;name&quot;</span><span class="p">:</span> <span class="ss">&quot;Zabbix&quot;</span><span class="p">,</span>

  <span class="ss">&quot;type&quot;</span><span class="p">:</span> <span class="ss">&quot;zabbix&quot;</span><span class="p">,</span>
  <span class="ss">&quot;serviceName&quot;</span><span class="p">:</span> <span class="ss">&quot;ZabbixAPIDatasource&quot;</span><span class="p">,</span>

  <span class="ss">&quot;module&quot;</span><span class="p">:</span> <span class="ss">&quot;app/plugins/datasource/zabbix/datasource&quot;</span><span class="p">,</span>

  <span class="ss">&quot;partials&quot;</span><span class="p">:</span> <span class="err">{</span>
    <span class="ss">&quot;config&quot;</span><span class="p">:</span> <span class="ss">&quot;app/plugins/datasource/zabbix/partials/config.html&quot;</span>
  <span class="err">}</span><span class="p">,</span>

  <span class="ss">&quot;username&quot;</span><span class="p">:</span> <span class="ss">&quot;guangyu.liang&quot;</span><span class="p">,</span>   <span class="n">zabbix</span> <span class="n">web</span><span class="err">账号</span> <span class="err">需要管理员权限</span>
  <span class="ss">&quot;password&quot;</span><span class="p">:</span> <span class="ss">&quot;1qaz2wsx&quot;</span><span class="p">,</span>

  <span class="ss">&quot;metrics&quot;</span><span class="p">:</span> <span class="k">true</span><span class="p">,</span>
  <span class="ss">&quot;annotations&quot;</span><span class="p">:</span> <span class="k">true</span>
<span class="err">}</span>

<span class="err">配置</span> 
<span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">ip</span><span class="p">:</span><span class="mi">3000</span><span class="o">/</span><span class="n">login</span>
<span class="err">账号</span>        <span class="k">admin</span>
<span class="err">密码</span>        <span class="k">admin</span>

<span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="p">.</span><span class="mi">2</span><span class="n">cto</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">net</span><span class="o">/</span><span class="mi">201601</span><span class="o">/</span><span class="mi">487722</span><span class="p">.</span><span class="n">html</span>  <span class="err">（打不开看附件）</span>
</pre></div>


<h2 id="mail">主动模式 mail</h2>
<div class="codehilite"><pre><span></span><span class="n">zabbix</span><span class="err">主动</span>
<span class="n">PidFile</span><span class="o">=/</span><span class="n">tmp</span><span class="o">/</span><span class="n">zabbix_agentd</span><span class="p">.</span><span class="n">pid</span>
<span class="n">LogFile</span><span class="o">=/</span><span class="n">tmp</span><span class="o">/</span><span class="n">zabbix_agentd</span><span class="p">.</span><span class="n">log</span>
<span class="cp">#Server=192.168.20.27</span>
<span class="n">ServerActive</span><span class="o">=</span><span class="mf">192.168.20.27</span><span class="o">:</span><span class="mi">10051</span>
<span class="cp">#Hostname=rongxin01</span>
<span class="n">HostnameItem</span><span class="o">=</span><span class="n">system</span><span class="p">.</span><span class="n">hostname</span>
<span class="n">EnableRemoteCommands</span><span class="o">=</span><span class="mi">1</span>
<span class="n">LogRemoteCommands</span><span class="o">=</span><span class="mi">1</span>
<span class="n">RefreshActiveChecks</span><span class="o">=</span><span class="mi">60</span>
<span class="n">BufferSize</span><span class="o">=</span><span class="mi">10000</span>
<span class="n">StartAgents</span><span class="o">=</span><span class="mi">5</span>
<span class="n">MaxLinesPerSecond</span><span class="o">=</span><span class="mi">200</span>
<span class="n">Timeout</span><span class="o">=</span><span class="mi">30</span>
<span class="n">Include</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">zabbix</span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">zabbix_agentd</span><span class="p">.</span><span class="n">conf</span><span class="p">.</span><span class="n">d</span><span class="o">/</span>
<span class="n">LoadModulePath</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">zabbix</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">zabbix</span><span class="o">/</span><span class="n">modules</span>
<span class="n">mail</span><span class="err">报警</span>
<span class="err">停止</span><span class="n">sendmail</span><span class="err">或</span><span class="n">postfix</span>
<span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">init</span><span class="p">.</span><span class="n">d</span><span class="o">/</span><span class="n">sendmail</span> <span class="n">stop</span>
<span class="n">chkconfig</span> <span class="n">sendmail</span> <span class="n">off</span>
<span class="n">tar</span> <span class="err">–</span><span class="n">zxf</span> <span class="n">mailx</span><span class="o">-</span><span class="mf">12.5</span><span class="p">.</span><span class="n">tar</span><span class="p">.</span><span class="n">gz</span>
<span class="n">make</span> <span class="o">&amp;&amp;</span>  <span class="n">make</span> <span class="n">install</span> <span class="n">UCBINSTALL</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">install</span>
<span class="n">cp</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">mailx</span> <span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">mail</span>
<span class="n">vi</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nail</span><span class="p">.</span><span class="n">rc</span>
<span class="n">set</span> <span class="n">from</span><span class="o">=</span><span class="n">test001</span><span class="p">@</span><span class="n">sina</span><span class="p">.</span><span class="n">com</span>
<span class="n">set</span> <span class="n">smtp</span><span class="o">=</span><span class="nl">smtp</span><span class="p">:</span><span class="c1">//smtp.sina.cn:25</span>
<span class="n">set</span> <span class="n">smtp</span><span class="o">-</span><span class="n">auth</span><span class="o">-</span><span class="n">user</span><span class="o">=</span> <span class="n">test001</span><span class="p">@</span><span class="n">sina</span><span class="p">.</span><span class="n">com</span>
<span class="n">set</span> <span class="n">smtp</span><span class="o">-</span><span class="n">auth</span><span class="o">-</span><span class="n">password</span><span class="o">=</span> <span class="n">test001</span>
<span class="err">测试</span> <span class="n">echo</span> <span class="s">&quot;this is test&quot;</span> <span class="o">|</span> <span class="n">mail</span> <span class="o">-</span><span class="n">v</span> <span class="o">-</span><span class="n">s</span> <span class="s">&quot;subject&quot;</span> <span class="n">lgy_root</span><span class="mf">@163.</span><span class="n">com</span>
<span class="n">vim</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">zabbix</span><span class="o">/</span><span class="n">zabbix_server</span><span class="p">.</span><span class="n">conf</span>
<span class="n">AlertScriptsPath</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">zabbix</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">zabbix</span><span class="o">/</span><span class="n">alertscripts</span>
<span class="n">vim</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">zabbix</span><span class="o">/</span><span class="n">alertscripts</span><span class="o">/</span><span class="n">sendmail</span><span class="p">.</span><span class="n">sh</span>
<span class="cp">#!/bin/bash</span>
<span class="n">echo</span> <span class="s">&quot;$3&quot;</span> <span class="o">|</span> <span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">mail</span>   <span class="o">-</span><span class="n">s</span> <span class="s">&quot;$2&quot;</span>  <span class="err">$</span><span class="mi">1</span>

<span class="mi">2</span><span class="err">、</span><span class="n">sendEmail</span>
<span class="cp">#!/bin/bash </span>
<span class="n">export</span> <span class="n">smtpemailfrom</span><span class="o">=</span><span class="n">monitor</span><span class="mi">@3</span><span class="n">mang</span><span class="p">.</span><span class="n">com</span>
<span class="n">export</span> <span class="n">zabbixemailto</span><span class="o">=</span><span class="err">$</span><span class="mi">1</span>    <span class="p">(</span><span class="err">发送多人的话，每个人用空格隔开</span><span class="p">)</span>
<span class="n">export</span> <span class="n">zabbixsubject</span><span class="o">=</span><span class="err">$</span><span class="mi">2</span> 
<span class="n">export</span> <span class="n">zabbixbody</span><span class="o">=</span><span class="err">$</span><span class="mi">3</span> 
<span class="n">export</span> <span class="n">smtpserver</span><span class="o">=</span><span class="n">smtp</span><span class="p">.</span><span class="n">ym</span><span class="mf">.163</span><span class="p">.</span><span class="n">com</span>
<span class="n">export</span> <span class="n">smtplogin</span><span class="o">=</span><span class="n">monitor</span><span class="mi">@3</span><span class="n">mang</span><span class="p">.</span><span class="n">com</span>
<span class="n">export</span> <span class="n">smtppass</span><span class="o">=</span><span class="mi">123</span><span class="n">qwe</span>

<span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">sendEmail</span>  <span class="o">-</span><span class="n">o</span> <span class="n">tls</span><span class="o">=</span><span class="n">no</span>  <span class="o">-</span><span class="n">f</span> <span class="err">$</span><span class="n">smtpemailfrom</span> <span class="o">-</span><span class="n">t</span> <span class="err">$</span><span class="n">zabbixemailto</span> <span class="o">-</span><span class="n">u</span> <span class="err">$</span><span class="n">zabbixsubject</span> 
<span class="o">-</span><span class="n">m</span> <span class="err">$</span><span class="n">zabbixbody</span> <span class="o">-</span><span class="n">s</span> <span class="err">$</span><span class="nl">smtpserver</span><span class="p">:</span><span class="mi">25</span> <span class="o">-</span><span class="n">xu</span> <span class="err">$</span><span class="n">smtplogin</span> <span class="o">-</span><span class="n">xp</span> <span class="err">$</span><span class="n">smtppass</span>
</pre></div>


<h2 id="zabbix-key">zabbix key</h2>
<div class="codehilite"><pre><span></span><span class="nv">zabbix</span>服务器端通过与<span class="nv">zabbix</span> <span class="nv">agent</span>通信来获取客户端服务器的数据，<span class="nv">agent</span>分为两个版本，在配置主机我们可以看到一个是<span class="nv">agent</span>，
另一个是<span class="nv">agent</span>（<span class="nv">active</span>）。

<span class="nv">agent</span>：<span class="nv">zabbix</span> <span class="nv">server</span>向<span class="nv">zabbix</span> <span class="nv">agent</span>讨要数据。
<span class="nv">agent</span>（<span class="nv">active</span>）：<span class="nv">zabbix</span> <span class="nv">agent</span>提交数据给<span class="nv">zabbix</span> <span class="nv">server</span>。

模板中勾选所以<span class="nv">key</span>后，选择<span class="nv">mass</span> <span class="nv">update</span>  ，可以批量更换<span class="nv">key</span>的类型


监控项<span class="nv">keys</span>列表
以下表格是<span class="nv">zabbix</span> <span class="nv">agent</span>所支持的所有<span class="nv">key</span>列表，添加一向监控的时候，首先想到的应该是<span class="nv">zabbix</span> <span class="nv">agent</span>是否已经有相关的<span class="nv">key</span>存在，
而不是自己去写脚本来获取<span class="nv">key</span>。

<span class="nv">agent</span>.<span class="nv">hostname</span>
返回被监控端名称<span class="ss">(</span>字符串<span class="ss">)</span>

<span class="nv">agent</span>.<span class="nv">ping</span>
检测被监控端是否存活<span class="ss">(</span><span class="mi">1</span>:运行中 其他:未运行<span class="ss">)</span><span class="o">-</span>使用函数 <span class="nv">nodata</span><span class="ss">()</span>检测客户端是否正在运行

<span class="nv">agent</span>.<span class="nv">version</span>
<span class="nv">zabbix</span> <span class="nv">agent</span>版本字符串

<span class="nv">kernel</span>.<span class="nv">maxfiles</span>
系统支持最大的<span class="nv">open</span> <span class="nv">files</span>整数

<span class="nv">kernel</span>.<span class="nv">maxproc</span>
系统支持最大的进程数量整数

<span class="nv">log</span>[<span class="nv">file</span>,<span class="o">&lt;</span><span class="nv">regexp</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="nv">encoding</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="nv">maxlines</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="nv">mode</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="nv">output</span><span class="o">&gt;</span>]
监控日志文件
<span class="nv">file</span> <span class="o">-</span> 文件详细路径
<span class="nv">regexp</span> <span class="o">-</span> 正则
<span class="nv">encoding</span> <span class="o">-</span> 编码
<span class="nv">maxlines</span> <span class="o">-</span> <span class="nv">zabbix</span> <span class="nv">agent</span>向<span class="nv">server</span>或者<span class="nv">proxy</span>发送最大的行数。
  这个参数覆盖配置文件<span class="nv">zabbxi_agentd</span>.<span class="nv">conf</span>中的’<span class="nv">MaxLinesPerSecond</span>’ 
<span class="nv">mode</span> <span class="o">-</span> 可选值:<span class="nv">all</span> <span class="ss">(</span>默认<span class="ss">)</span>, <span class="nv">skip</span> <span class="ss">(</span>跳过处理老数据<span class="ss">)</span>.<span class="nv">mode</span>参数从<span class="mi">2</span>.<span class="mi">0</span>版本开始支持
<span class="nv">output</span> <span class="o">-</span> 可选项，输出格式模板.
示例: <span class="nv">log</span>[<span class="o">/</span><span class="nv">var</span><span class="o">/</span><span class="nv">log</span><span class="o">/</span><span class="nv">syslog</span>] <span class="nv">log</span>[<span class="o">/</span><span class="nv">var</span><span class="o">/</span><span class="nv">log</span><span class="o">/</span><span class="nv">syslog</span>,<span class="nv">error</span>] <span class="nv">log</span>[<span class="o">/</span><span class="nv">home</span><span class="o">/</span><span class="nv">zabbix</span><span class="o">/</span><span class="nv">logs</span><span class="o">/</span><span class="nv">logfile</span>,,,<span class="mi">100</span>]

<span class="nv">logrt</span>[<span class="nv">file_pattern</span>,<span class="o">&lt;</span><span class="nv">regexp</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="nv">encoding</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="nv">maxlines</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="nv">mode</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="nv">output</span><span class="o">&gt;</span>]
<span class="nv">Monitoring</span> <span class="nv">of</span> <span class="nv">log</span> <span class="nv">file</span> <span class="nv">with</span> <span class="nv">log</span> <span class="nv">rotation</span> <span class="nv">support</span>.
<span class="nv">file_pattern</span> <span class="o">-</span> 文件绝对路径

<span class="nv">net</span>.<span class="nv">dns</span>[<span class="o">&lt;</span><span class="nv">ip</span><span class="o">&gt;</span>,<span class="nv">zone</span>,<span class="o">&lt;</span><span class="nv">type</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="nb">timeout</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="nv">count</span><span class="o">&gt;</span>]
检测<span class="nv">DNS</span>服务是否开启<span class="mi">0</span> – <span class="nv">DNS</span>挂了  <span class="mi">1</span> <span class="o">-</span> <span class="nv">DNS</span>运行中
<span class="nv">ip</span> <span class="o">-</span> <span class="nv">DNS</span>服务器的<span class="nv">ip</span>地址<span class="ss">(</span>留空表示使用本地<span class="nv">DNS</span>, <span class="nv">ignored</span> <span class="nv">onWindows</span><span class="ss">)</span>
<span class="nv">zone</span> <span class="o">-</span> 需要测试的域名
<span class="nv">type</span> <span class="o">-</span> 记录类型 <span class="ss">(</span>默认为 <span class="nv">SOA</span><span class="ss">)</span>,<span class="nv">type</span>可选值:  <span class="nv">ANY</span>, <span class="nv">A</span>, <span class="nv">NS</span>, <span class="nv">CNAME</span>, <span class="nv">MB</span>, <span class="nv">MG</span>, <span class="nv">MR</span>, <span class="nv">PTR</span>, <span class="nv">MD</span>, <span class="nv">MF</span>, <span class="nv">MX</span>, <span class="nv">SOA</span>, <span class="nv">NULL</span>, <span class="nv">WKS</span> 
<span class="ss">(</span>除了<span class="nv">windows</span><span class="ss">)</span>, <span class="nv">HINFO</span>, <span class="nv">MINFO</span>, <span class="nv">TXT</span>, <span class="nv">SRV</span> <span class="nv">SRV</span>
<span class="nb">timeout</span> <span class="ss">(</span><span class="nv">ignored</span> <span class="nv">on</span> <span class="nv">Windows</span><span class="ss">)</span> – 超时时间<span class="ss">(</span>默认<span class="mi">1</span>秒<span class="ss">)</span>
<span class="nv">count</span> <span class="ss">(</span><span class="nv">ignored</span> <span class="nv">on</span> <span class="nv">Windows</span><span class="ss">)</span> – 重试次数 <span class="ss">(</span>默认值<span class="mi">2</span><span class="ss">)</span>
示例<span class="nv">key</span>: <span class="nv">net</span>.<span class="nv">dns</span>[<span class="mi">8</span>.<span class="mi">8</span>.<span class="mi">8</span>.<span class="mi">8</span>,<span class="nv">zabbix</span>.<span class="nv">com</span>,<span class="nv">MX</span>,<span class="mi">2</span>,<span class="mi">1</span>] 

<span class="nv">net</span>.<span class="nv">dns</span>.<span class="nv">record</span>[<span class="o">&lt;</span><span class="nv">ip</span><span class="o">&gt;</span>,<span class="nv">zone</span>,<span class="o">&lt;</span><span class="nv">type</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="nb">timeout</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="nv">count</span><span class="o">&gt;</span>]
执行一个<span class="nv">DNS</span>查询获取<span class="nv">DNS</span>查询数据.
<span class="nv">ip</span> <span class="o">-</span> <span class="nv">DNS</span>服务器的<span class="nv">ip</span>地址<span class="ss">(</span>留空表示使用本地<span class="nv">DNS</span>, <span class="nv">ignored</span> <span class="nv">on</span> <span class="nv">Windows</span><span class="ss">)</span>
<span class="nv">zone</span> <span class="o">-</span> 需要测试的域名
<span class="nv">type</span> <span class="o">-</span> 记录类型 <span class="ss">(</span>默认<span class="nv">SOA</span>,可选值同<span class="nv">net</span>.<span class="nv">dns</span><span class="ss">)</span>
<span class="nb">timeout</span> <span class="ss">(</span><span class="nv">ignored</span> <span class="nv">on</span> <span class="nv">Windows</span><span class="ss">)</span> – 超时时间<span class="ss">(</span>默认<span class="mi">1</span>秒<span class="ss">)</span>
<span class="nv">count</span> <span class="ss">(</span><span class="nv">ignored</span> <span class="nv">on</span> <span class="nv">Windows</span><span class="ss">)</span> – 重试次数 <span class="ss">(</span>默认值<span class="mi">2</span><span class="ss">)</span>
示例<span class="nv">key</span>: <span class="nv">net</span>.<span class="nv">dns</span>.<span class="nv">record</span>[<span class="mi">8</span>.<span class="mi">8</span>.<span class="mi">8</span>.<span class="mi">8</span>,<span class="nv">ttlsa</span>.<span class="nv">com</span>,<span class="nv">MX</span>,<span class="mi">2</span>,<span class="mi">1</span>]

<span class="nv">net</span>.<span class="k">if</span>.<span class="nv">collisions</span>[<span class="k">if</span>]
<span class="nv">Out</span><span class="o">-</span><span class="nv">of</span><span class="o">-</span><span class="nv">window</span> <span class="nv">collision</span>.<span class="nv">Number</span> <span class="nv">of</span> <span class="nv">collisions</span>. <span class="nv">Integer</span>.<span class="k">if</span> <span class="o">-</span> 网卡

<span class="nv">net</span>.<span class="k">if</span>.<span class="nv">discovery</span>
列出网卡.通常用于低级别的<span class="nv">discovery</span>.<span class="nv">JSON</span>对象

<span class="nv">net</span>.<span class="k">if</span>.<span class="nv">in</span>[<span class="k">if</span>,<span class="o">&lt;</span><span class="nv">mode</span><span class="o">&gt;</span>]
网卡入口流量整数.
<span class="k">if</span> <span class="o">-</span> 网卡名称
<span class="nv">mode</span> <span class="o">-</span> 可用值: <span class="nv">bytes</span> <span class="o">-</span> 字节数 <span class="ss">(</span>默认<span class="ss">)</span>
<span class="nv">packets</span> <span class="o">-</span> 包数量
<span class="nv">errors</span> <span class="o">-</span> 错误数量
<span class="nv">dropped</span> <span class="o">-</span> 丢包数量
示例<span class="nv">keys</span>: <span class="nv">net</span>.<span class="k">if</span>.<span class="nv">in</span>[<span class="nv">eth0</span>,<span class="nv">errors</span>] <span class="nv">net</span>.<span class="k">if</span>.<span class="nv">in</span>[<span class="nv">eth0</span>]

<span class="nv">net</span>.<span class="k">if</span>.<span class="nv">out</span>[<span class="k">if</span>,<span class="o">&lt;</span><span class="nv">mode</span><span class="o">&gt;</span>]
网卡出口流量（参数参见<span class="nv">net</span>.<span class="k">if</span>.<span class="nv">in</span>）

<span class="nv">net</span>.<span class="k">if</span>.<span class="nv">total</span>[<span class="k">if</span>,<span class="o">&lt;</span><span class="nv">mode</span><span class="o">&gt;</span>]
网卡进<span class="o">/</span>出流量的总和（参数参见<span class="nv">net</span>.<span class="k">if</span>.<span class="nv">in</span>）


<span class="nv">net</span>.<span class="nv">tcp</span>.<span class="nv">listen</span>[<span class="nv">port</span>]
检测端口是否开启<span class="mi">0</span> – （<span class="nv">not</span> <span class="nv">listen</span>） <span class="mi">1</span> –  <span class="nv">in</span> <span class="nv">LISTEN</span> <span class="nv">stateport</span>
示例: <span class="nv">net</span>.<span class="nv">tcp</span>.<span class="nv">listen</span>[<span class="mi">80</span>]

<span class="nv">net</span>.<span class="nv">tcp</span>.<span class="nv">port</span>[<span class="o">&lt;</span><span class="nv">ip</span><span class="o">&gt;</span>,<span class="nv">port</span>]
是否可以连接到指定的<span class="nv">TCP</span>端口<span class="mi">0</span> – <span class="nv">cannot</span> <span class="k">connect</span> <span class="mi">1</span> – <span class="nv">can</span> <span class="k">connect</span>
   <span class="nv">ip</span> <span class="o">-</span> <span class="nv">IP</span>地址<span class="ss">(</span>默认是 <span class="mi">127</span>.<span class="mi">0</span>.<span class="mi">0</span>.<span class="mi">1</span><span class="ss">)</span>
   <span class="nv">port</span> <span class="o">-</span> 端口
范例: <span class="nv">net</span>.<span class="nv">tcp</span>.<span class="nv">port</span>[,<span class="mi">80</span>] 检测<span class="nv">web</span>服务器端口是否运行中

<span class="nv">net</span>.<span class="nv">tcp</span>.<span class="nv">service</span>[<span class="nv">service</span>,<span class="o">&lt;</span><span class="nv">ip</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="nv">port</span><span class="o">&gt;</span>]
检测服务是否开启，并且端口可用<span class="mi">0</span> – 服务挂了 <span class="mi">1</span> – 服务运行中
    <span class="nv">service</span> <span class="o">-</span> 如下:<span class="nv">ssh</span>, <span class="nv">ntp</span>, <span class="nv">ldap</span>, <span class="nv">smtp</span>, <span class="nv">ftp</span>, <span class="nv">http</span>, <span class="nv">pop</span>, <span class="nv">nntp</span>,<span class="nv">imap</span>, <span class="nv">tcp</span>, <span class="nv">https</span>, <span class="nv">telnet</span>
    <span class="nv">ip</span> <span class="o">-</span> <span class="nv">IP</span>地址 <span class="ss">(</span>默认<span class="mi">127</span>.<span class="mi">0</span>.<span class="mi">0</span>.<span class="mi">1</span><span class="ss">)</span>
    <span class="nv">port</span> <span class="o">-</span> 端口 <span class="ss">(</span>默认情况为标准端口号<span class="ss">)</span>
示例<span class="nv">key</span>: <span class="nv">net</span>.<span class="nv">tcp</span>.<span class="nv">service</span>[<span class="nv">ftp</span>,,<span class="mi">45</span>]

<span class="nv">net</span>.<span class="nv">tcp</span>.<span class="nv">service</span>.<span class="nv">perf</span>[<span class="nv">service</span>,<span class="o">&lt;</span><span class="nv">ip</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="nv">port</span><span class="o">&gt;</span>]
检测服务器性能<span class="mi">0</span> – 服务挂了<span class="c1">; seconds – 链接到服务器端口消耗的时间</span>
<span class="nv">service</span> <span class="o">-</span> 如下:<span class="nv">ssh</span>, <span class="nv">ntp</span>, <span class="nv">ldap</span>, <span class="nv">smtp</span>, <span class="nv">ftp</span>, <span class="nv">http</span>, <span class="nv">pop</span>, <span class="nv">nntp</span>,<span class="nv">imap</span>, <span class="nv">tcp</span>, <span class="nv">https</span>, <span class="nv">telnet</span>
<span class="nv">ip</span> <span class="o">-</span> <span class="nv">IP</span>地址 <span class="ss">(</span>默认<span class="mi">127</span>.<span class="mi">0</span>.<span class="mi">0</span>.<span class="mi">1</span><span class="ss">)</span>
<span class="nv">port</span> <span class="o">-</span> 端口 <span class="ss">(</span>默认情况为标准端口号<span class="ss">)</span>
示例<span class="nv">key</span>: <span class="nv">net</span>.<span class="nv">tcp</span>.<span class="nv">service</span>.<span class="nv">perf</span>[<span class="nv">ssh</span>]

         <span class="nv">net</span>.<span class="nv">udp</span>.<span class="nv">listen</span>[<span class="nv">port</span>]

<span class="nv">proc</span>.<span class="nv">mem</span>[<span class="o">&lt;</span><span class="nv">name</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="nv">user</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="nv">mode</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="nv">cmdline</span><span class="o">&gt;</span>]
用户进程消耗的内存内存使用量 <span class="ss">(</span>字节单位<span class="ss">)</span>.
<span class="nv">name</span> <span class="o">-</span> 进程名 <span class="ss">(</span>默认值 “<span class="nv">all</span> <span class="nv">processes</span>”<span class="ss">)</span>
<span class="nv">user</span> <span class="o">-</span> 用户名 <span class="ss">(</span>默认值“<span class="nv">all</span> <span class="nv">users</span>”<span class="ss">)</span>
<span class="nv">mode</span> <span class="o">-</span> 可选值: <span class="nv">avg</span>, <span class="nv">max</span>, <span class="nv">min</span>, <span class="nv">sum</span> <span class="ss">(</span>默认<span class="ss">)</span>
<span class="nv">cmdline</span> <span class="o">-</span> 命令行过滤<span class="ss">(</span>正则表达时<span class="ss">)</span>
示例<span class="nv">keys</span>: <span class="nv">proc</span>.<span class="nv">mem</span>[,<span class="nv">root</span>] – <span class="nv">root</span>的进程消耗了多少内存
    <span class="nv">proc</span>.<span class="nv">mem</span>[<span class="nv">zabbix_server</span>,<span class="nv">zabbix</span>] – <span class="nv">zabbix</span>用户运行的<span class="nv">zabbix_server</span>使用了多少内存
    <span class="nv">proc</span>.<span class="nv">mem</span>[,<span class="nv">oracle</span>,<span class="nv">max</span>,<span class="nv">oracleZABBIX</span>]


<span class="nv">proc</span>.<span class="nv">num</span>[<span class="o">&lt;</span><span class="nv">name</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="nv">user</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="nv">state</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="nv">cmdline</span><span class="o">&gt;</span>]
某用户某些状态的进程的数量进程数量
<span class="nv">name</span> <span class="o">-</span> 进程名称 <span class="ss">(</span>默认“<span class="nv">all</span> <span class="nv">processes</span>”<span class="ss">)</span>
<span class="nv">user</span> <span class="o">-</span> 用户名 <span class="ss">(</span>默认 “<span class="nv">all</span> <span class="nv">users</span>”<span class="ss">)</span>
<span class="nv">state</span> <span class="o">-</span> 可用值: <span class="nv">all</span> <span class="ss">(</span>默认<span class="ss">)</span>, <span class="nv">run</span>,<span class="nv">sleep</span>, <span class="nv">zomb</span>
<span class="nv">cmdline</span> <span class="o">-</span> 命令行过滤<span class="ss">(</span>正则表达时<span class="ss">)</span>
示例<span class="nv">keys</span>: <span class="nv">proc</span>.<span class="nv">num</span>[,<span class="nv">mysql</span>] – <span class="nv">MySQL</span>用户运行的进程数量
<span class="nv">proc</span>.<span class="nv">num</span>[<span class="nv">apache2</span>,<span class="nv">www</span><span class="o">-</span><span class="nv">data</span>] – <span class="nv">www</span><span class="o">-</span><span class="nv">data</span>运行了多少个<span class="nv">apache2</span>进程
<span class="nv">proc</span>.<span class="nv">num</span>[,<span class="nv">oracle</span>,<span class="nv">sleep</span>,<span class="nv">oracleZABBIX</span>]
备注：<span class="nv">Windows</span>系统只支持<span class="nv">name</span>和<span class="nv">user</span>两个参数


<span class="nv">sensor</span>[<span class="nv">device</span>,<span class="nv">sensor</span>,<span class="o">&lt;</span><span class="nv">mode</span><span class="o">&gt;</span>]
读取硬件传感器
<span class="nv">device</span> <span class="o">-</span> 设备名称 
<span class="nv">sensor</span> <span class="o">-</span> 传感器名称 
<span class="nv">mode</span> <span class="o">-</span> 可选值:<span class="nv">avg</span>, <span class="nv">max</span>, <span class="nv">min</span>
示例<span class="nv">key</span>: <span class="nv">sensor</span>[<span class="nv">w83781d</span><span class="o">-</span><span class="nv">i2c</span><span class="o">-</span><span class="mi">0</span><span class="o">-</span><span class="mi">2</span><span class="nv">d</span>,<span class="nv">temp1</span>] <span class="nv">Prior</span> <span class="nv">to</span> <span class="nv">Zabbix</span> <span class="mi">1</span>.<span class="mi">8</span>.<span class="mi">4</span>, <span class="nv">the</span> <span class="nv">sensor</span>[<span class="nv">temp1</span>] <span class="nv">format</span> <span class="nv">was</span> <span class="nv">used</span>. 
<span class="nv">On</span> <span class="nv">Linux</span> <span class="mi">2</span>.<span class="mi">6</span><span class="o">+</span>, 读取<span class="o">/</span><span class="nv">sys</span><span class="o">/</span><span class="nv">class</span><span class="o">/</span><span class="nv">hwmon</span>. <span class="nv">On</span> <span class="nv">OpenBSD</span>, 读取<span class="nv">hw</span>.<span class="nv">sensors</span> <span class="nv">MIB</span>.示例<span class="nv">keys</span>: <span class="nv">sensor</span>[<span class="nv">cpu0</span>,<span class="nv">temp0</span>] – 
<span class="nv">CPU0</span>的温度 <span class="nv">sensor</span>[<span class="nv">cpu</span>[<span class="mi">0</span><span class="o">-</span><span class="mi">2</span>]$,<span class="nv">temp</span>,<span class="nv">avg</span>] – <span class="nv">cpu</span>平均温度<span class="nv">Zabbix</span> <span class="mi">1</span>.<span class="mi">8</span>.<span class="mi">4</span>开始支持<span class="nv">OpenBSD</span>

<span class="nv">system</span>.<span class="nv">boottime</span>
系统启动的时间戳整数.<span class="nv">unix</span>时间戳

<span class="nv">system</span>.<span class="nv">cpu</span>.<span class="nv">intr</span>
设备中断整数

<span class="nv">system</span>.<span class="nv">cpu</span>.<span class="nv">load</span>[<span class="o">&lt;</span><span class="nv">cpu</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="nv">mode</span><span class="o">&gt;</span>]
<span class="nv">CPU</span>负载浮点数
<span class="nv">cpu</span> <span class="o">-</span> 可用值: <span class="nv">all</span> <span class="ss">(</span>默认<span class="ss">)</span>, <span class="nv">percpu</span> <span class="ss">(</span>所有在线<span class="nv">cpu</span>的负载<span class="ss">)</span>
<span class="nv">mode</span> <span class="o">-</span> 可用值:<span class="nv">avg1</span> <span class="ss">(</span><span class="mi">1</span>分钟 默认值<span class="ss">)</span>, <span class="nv">avg5</span><span class="ss">(</span><span class="mi">5</span>分钟平均<span class="ss">)</span>, <span class="nv">avg15</span> <span class="ss">(</span><span class="mi">15</span>分钟平均值<span class="ss">)</span>
范例<span class="nv">key</span>: <span class="nv">system</span>.<span class="nv">cpu</span>.<span class="nv">load</span>[,<span class="nv">avg5</span>]

<span class="nv">system</span>.<span class="nv">cpu</span>.<span class="nv">num</span>[<span class="o">&lt;</span><span class="nv">type</span><span class="o">&gt;</span>]
<span class="nv">CPU</span>数量处理器个数<span class="nv">type</span> <span class="o">-</span> 可用值: <span class="nv">online</span> <span class="ss">(</span>默认值<span class="ss">)</span>, <span class="nv">max</span>范例: <span class="nv">system</span>.<span class="nv">cpu</span>.<span class="nv">num</span>

<span class="nv">system</span>.<span class="nv">cpu</span>.<span class="nv">switches</span>
上下文交换交换次数老命名方式: <span class="nv">system</span>[<span class="nv">switches</span>]

<span class="nv">system</span>.<span class="nv">cpu</span>.<span class="nv">util</span>[<span class="o">&lt;</span><span class="nv">cpu</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="nv">type</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="nv">mode</span><span class="o">&gt;</span>]
<span class="nv">CPU</span>利用率百分比
<span class="nv">cpu</span> <span class="o">-</span> <span class="nv">cpu</span>数量 <span class="ss">(</span>默认是所有<span class="nv">cpu</span><span class="ss">)</span>
<span class="nv">type</span> <span class="o">-</span> 可用值: <span class="nv">idle</span>, <span class="nv">nice</span>, <span class="nv">user</span> <span class="ss">(</span>默认<span class="ss">)</span>, <span class="nv">system</span> <span class="ss">(</span><span class="nv">windows</span>系统默认值）, <span class="nv">iowait</span>, <span class="nv">interrupt</span>, <span class="nv">softirq</span>,<span class="nv">steal</span>
<span class="nv">mode</span> <span class="o">-</span> 可用值: <span class="nv">avg1</span> <span class="ss">(</span>一分钟平均，默认值<span class="ss">)</span>, <span class="nv">avg5</span><span class="ss">(</span><span class="mi">5</span>分钟平均, <span class="nv">avg15</span> <span class="ss">(</span><span class="mi">15</span>分钟平均值<span class="ss">)</span>
范例<span class="nv">key</span>: <span class="nv">system</span>.<span class="nv">cpu</span>.<span class="nv">util</span>[<span class="mi">0</span>,<span class="nv">user</span>,<span class="nv">avg5</span>]

<span class="nv">system</span>.<span class="nv">hostname</span>[<span class="o">&lt;</span><span class="nv">type</span><span class="o">&gt;</span>]
返回主机名字符串
<span class="nv">type</span> <span class="ss">(</span>仅用于<span class="nv">windows</span>系统<span class="ss">)</span> – 可用值: <span class="nv">netbios</span><span class="ss">(</span>默认<span class="ss">)</span> <span class="nv">or</span> <span class="nv">host</span>

<span class="nv">system</span>.<span class="nv">hw</span>.<span class="nv">chassis</span>[<span class="o">&lt;</span><span class="nv">info</span><span class="o">&gt;</span>]
返回机架信息字符串
<span class="nv">info</span> <span class="o">-</span> <span class="nv">full</span> <span class="ss">(</span>默认<span class="ss">)</span>, <span class="nv">model</span>, <span class="nv">serial</span>, <span class="nv">type</span> 或<span class="nv">vendor</span>
例如: <span class="nv">system</span>.<span class="nv">hw</span>.<span class="nv">chassis</span>
<span class="nv">Hewlett</span><span class="o">-</span><span class="nv">Packard</span> <span class="nv">HP</span> <span class="nv">Pro</span> <span class="mi">3010</span> <span class="nv">Small</span> <span class="nv">Form</span> <span class="nv">Factor</span> <span class="nv">PC</span> <span class="nv">CZXXXXXXXX</span> <span class="nv">Desktop</span>]
备注：要<span class="nv">root</span>权限，因为这些信息是从内存中读取的。

<span class="nv">system</span>.<span class="nv">hw</span>.<span class="nv">cpu</span>[<span class="o">&lt;</span><span class="nv">cpu</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="nv">info</span><span class="o">&gt;</span>]
返回<span class="nv">CPU</span>信息字符<span class="o">/</span>数字
<span class="nv">cpu</span> <span class="o">-</span> <span class="nv">cpu</span>数量或者<span class="nv">all</span> <span class="ss">(</span>默认<span class="ss">)</span>
<span class="nv">info</span> <span class="o">-</span> <span class="nv">full</span> <span class="ss">(</span>默认<span class="ss">)</span>, <span class="nv">curfreq</span>, <span class="nv">maxfreq</span>, <span class="nv">model</span> 或者<span class="nv">vendor</span>
例如: <span class="nv">system</span>.<span class="nv">hw</span>.<span class="nv">cpu</span>[<span class="mi">0</span>,<span class="nv">vendor</span>] <span class="nv">AuthenticAMD</span> 从<span class="o">/</span><span class="nv">proc</span><span class="o">/</span><span class="nv">cpuinfo</span>、<span class="o">/</span><span class="nv">sys</span><span class="o">/</span><span class="nv">devices</span><span class="o">/</span><span class="nv">system</span><span class="o">/</span><span class="nv">cpu</span><span class="o">/</span>[<span class="nv">cpunum</span>]<span class="o">/</span>
<span class="nv">cpufreq</span><span class="o">/</span><span class="nv">cpuinfo_max_freq</span>获取信息. 如果指定了<span class="nv">CPU</span>数量和 <span class="nv">curfreq</span>或者<span class="nv">maxfreq</span>, 将会返回数值<span class="ss">(</span><span class="nv">Hz</span><span class="ss">)</span>.

<span class="nv">system</span>.<span class="nv">hw</span>.<span class="nv">devices</span>[<span class="o">&lt;</span><span class="nv">type</span><span class="o">&gt;</span>]
列出<span class="nv">PCI</span>或者<span class="nv">USB</span>文本值
<span class="nv">type</span> <span class="o">-</span> <span class="nv">pci</span> <span class="ss">(</span>默认<span class="ss">)</span> <span class="nv">or</span> <span class="nv">usb</span>
范例: <span class="nv">system</span>.<span class="nv">hw</span>.<span class="nv">devices</span>[<span class="nv">pci</span>] <span class="mi">00</span>:<span class="mi">00</span>.<span class="mi">0</span> <span class="nv">Host</span> <span class="nv">bridge</span>: <span class="nv">Advanced</span> <span class="nv">Micro</span> <span class="nv">Devices</span> [<span class="nv">AMD</span>] <span class="nv">RS780</span> <span class="nv">Host</span> <span class="nv">Bridge</span> 
[..] 返回<span class="nv">lspci</span>或者<span class="nv">lsusb</span> <span class="ss">(</span>不带参数<span class="ss">)</span>

<span class="nv">system</span>.<span class="nv">hw</span>.<span class="nv">macaddr</span>[<span class="o">&lt;</span><span class="nv">interface</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="nv">format</span><span class="o">&gt;</span>]
列出<span class="nv">MAC</span>地址字符串
<span class="nv">interface</span> <span class="o">-</span> <span class="nv">all</span> <span class="ss">(</span>默认<span class="ss">)</span> 或者正则表达式
<span class="nv">format</span> <span class="o">-</span> <span class="nv">full</span> <span class="ss">(</span>默认<span class="ss">)</span> 、<span class="nv">short</span>
范例: <span class="nv">system</span>.<span class="nv">hw</span>.<span class="nv">macaddr</span>[<span class="s2">&quot;</span><span class="s">eth0$</span><span class="s2">&quot;</span>,<span class="nv">full</span>] [<span class="nv">eth0</span>] <span class="mi">00</span>:<span class="mi">11</span>:<span class="mi">22</span>:<span class="mi">33</span>:<span class="mi">44</span>:<span class="mi">55</span> 列出指定接口<span class="nv">mac</span>地址 如果<span class="nv">format</span>指定为<span class="nv">short</span>，
<span class="nv">MAC</span>地址相同的将会被忽略掉

<span class="nv">system</span>.<span class="nv">localtime</span>[<span class="o">&lt;</span><span class="nv">type</span><span class="o">&gt;</span>]
系统时间.数字或者字符串

<span class="nv">system</span>.<span class="nv">run</span>[<span class="nv">command</span>,<span class="o">&lt;</span><span class="nv">mode</span><span class="o">&gt;</span>]
在制定的主机上运行命令文本
<span class="nv">command</span> <span class="o">-</span> 命令
<span class="nv">mode</span> <span class="o">-</span> <span class="k">wait</span> <span class="ss">(</span>默认值, 执行超时时间<span class="ss">)</span>, <span class="nv">nowait</span> <span class="ss">(</span>不等待<span class="ss">)</span>最大可用返回<span class="mi">512</span><span class="nv">KB</span>数据，包含空白数据。 命令输出数据必须是文本
例如: <span class="nv">system</span>.<span class="nv">run</span>[<span class="nv">ls</span> <span class="o">-</span><span class="nv">l</span> <span class="o">/</span>] – 列出<span class="o">/</span>的文件和目录.
<span class="nv">Note</span>: 启用这个方法, <span class="nv">agent</span>配置文件必须配置 <span class="nv">EnableRemoteCommands</span><span class="o">=</span><span class="mi">1</span>选项

<span class="nv">system</span>.<span class="nv">stat</span>[<span class="nv">resource</span>,<span class="o">&lt;</span><span class="nv">type</span><span class="o">&gt;</span>]
虚拟内存状态数字<span class="nv">ent</span>


<span class="nv">system</span>.<span class="nv">sw</span>.<span class="nv">arch</span>
返回软件信息字符串
范例: <span class="nv">system</span>.<span class="nv">sw</span>.<span class="nv">arch</span> <span class="nv">i686</span>


<span class="nv">system</span>.<span class="nv">sw</span>.<span class="nv">os</span>[<span class="o">&lt;</span><span class="nv">info</span><span class="o">&gt;</span>]
返回系统信息字符串
<span class="nv">info</span> <span class="o">-</span> <span class="nv">full</span> <span class="ss">(</span><span class="nv">default</span><span class="ss">)</span>, <span class="nv">short</span> ,<span class="nv">name</span>
范例: <span class="nv">system</span>.<span class="nv">sw</span>.<span class="nv">os</span>[<span class="nv">short</span>] <span class="nv">Ubuntu</span> <span class="mi">2</span>.<span class="mi">6</span>.<span class="mi">35</span><span class="o">-</span><span class="mi">28</span>.<span class="mi">50</span><span class="o">-</span><span class="nv">generic</span> <span class="mi">2</span>.<span class="mi">6</span>.<span class="mi">35</span>.<span class="mi">11</span>
信息来自如下文件：
<span class="o">/</span><span class="nv">proc</span><span class="o">/</span><span class="nv">version</span> [<span class="nv">short</span>]
<span class="o">/</span><span class="nv">proc</span><span class="o">/</span><span class="nv">version_signature</span> [<span class="nv">name</span>]
<span class="o">/</span><span class="nv">etc</span><span class="o">/</span><span class="nv">issue</span>.<span class="nv">net</span>


<span class="nv">system</span>.<span class="nv">sw</span>.<span class="nv">packages</span>[<span class="o">&lt;</span><span class="nv">package</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="nv">manager</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="nv">format</span><span class="o">&gt;</span>]
已安装软件列表文本值
<span class="nv">package</span> <span class="o">-</span> <span class="nv">all</span> <span class="ss">(</span>默认<span class="ss">)</span>或者正则表达式
<span class="nv">manager</span> <span class="o">-</span> <span class="nv">all</span> <span class="ss">(</span>默认<span class="ss">)</span> <span class="nv">or</span> <span class="nv">a</span> <span class="nv">package</span> <span class="nv">manager</span>
<span class="nv">format</span> <span class="o">-</span> <span class="nv">full</span> <span class="ss">(</span>默认<span class="ss">)</span> ，<span class="nv">short</span>
范例: <span class="nv">system</span>.<span class="nv">sw</span>.<span class="nv">packages</span>[<span class="nv">mini</span>,<span class="nv">dpkg</span>,<span class="nv">short</span>]


<span class="nv">system</span>.<span class="nv">swap</span>.<span class="nv">in</span>[<span class="o">&lt;</span><span class="nv">device</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="nv">type</span><span class="o">&gt;</span>]
交换分区<span class="nv">IN</span>（磁盘交换到内存）数字
<span class="nv">device</span> <span class="o">-</span> 交换分区设备 <span class="ss">(</span>默认<span class="nv">all</span><span class="ss">)</span>
<span class="nv">type</span> <span class="o">-</span> 可选值: <span class="nv">count</span> <span class="ss">(</span><span class="nv">swapins</span>数量<span class="ss">)</span>, <span class="nv">sectors</span><span class="ss">(</span><span class="nv">sectors</span> <span class="nv">swapped</span> <span class="nv">in</span><span class="ss">)</span>, <span class="nv">pages</span> <span class="ss">(</span><span class="nv">pages</span> <span class="nv">swapped</span> <span class="nv">in</span><span class="ss">)</span>.
示例<span class="nv">key</span>: <span class="nv">system</span>.<span class="nv">swap</span>.<span class="nv">in</span>[,<span class="nv">pages</span>]
数据采集自: <span class="nv">Linux</span> <span class="mi">2</span>.<span class="mi">4</span>: <span class="o">/</span><span class="nv">proc</span><span class="o">/</span><span class="nv">swaps</span>, <span class="o">/</span><span class="nv">proc</span><span class="o">/</span><span class="nv">partitions</span>, <span class="o">/</span><span class="nv">proc</span><span class="o">/</span><span class="nv">stat</span>
            <span class="nv">Linux</span> <span class="mi">2</span>.<span class="mi">6</span>: <span class="o">/</span><span class="nv">proc</span><span class="o">/</span><span class="nv">swaps</span>, <span class="o">/</span><span class="nv">proc</span><span class="o">/</span><span class="nv">diskstats</span>, <span class="o">/</span><span class="nv">proc</span><span class="o">/</span><span class="nv">vmstat</span>


<span class="nv">system</span>.<span class="nv">swap</span>.<span class="nv">out</span>[<span class="o">&lt;</span><span class="nv">device</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="nv">type</span><span class="o">&gt;</span>]
<span class="nv">Swap</span> <span class="nv">out</span> <span class="ss">(</span><span class="nv">f</span>内存到磁盘<span class="ss">)</span> .数字
<span class="nv">device</span> <span class="o">-</span> <span class="nv">swap</span>设备 <span class="ss">(</span>默认<span class="nv">all</span><span class="ss">)</span>
<span class="nv">type</span> <span class="o">-</span> <span class="nv">count</span> <span class="ss">(</span><span class="nv">number</span> <span class="nv">of</span> <span class="nv">swapouts</span><span class="ss">)</span>, <span class="nv">sectors</span><span class="ss">(</span><span class="nv">sectors</span> <span class="nv">swapped</span> <span class="nv">out</span><span class="ss">)</span>, <span class="nv">pages</span> <span class="ss">(</span><span class="nv">pages</span> <span class="nv">swapped</span> <span class="nv">out</span><span class="ss">)</span>. 示
例<span class="nv">key</span>: <span class="nv">system</span>.<span class="nv">swap</span>.<span class="nv">out</span>[,<span class="nv">pages</span>]
数据采集自: <span class="nv">Linux</span> <span class="mi">2</span>.<span class="mi">4</span>: <span class="o">/</span><span class="nv">proc</span><span class="o">/</span><span class="nv">swaps</span>, <span class="o">/</span><span class="nv">proc</span><span class="o">/</span><span class="nv">partitions</span>, <span class="o">/</span><span class="nv">proc</span><span class="o">/</span><span class="nv">stat</span>
            <span class="nv">Linux</span> <span class="mi">2</span>.<span class="mi">6</span>: <span class="o">/</span><span class="nv">proc</span><span class="o">/</span><span class="nv">swaps</span>, <span class="o">/</span><span class="nv">proc</span><span class="o">/</span><span class="nv">diskstats</span>, <span class="o">/</span><span class="nv">proc</span><span class="o">/</span><span class="nv">vmstat</span>


<span class="nv">system</span>.<span class="nv">swap</span>.<span class="nv">size</span>[<span class="o">&lt;</span><span class="nv">device</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="nv">type</span><span class="o">&gt;</span>]
交换分区大小字节或者百分比
<span class="nv">device</span> <span class="o">-</span> 交换分区 <span class="ss">(</span>默认值 <span class="nv">all</span><span class="ss">)</span>
<span class="nv">type</span> <span class="o">-</span> <span class="nv">free</span> <span class="ss">(</span><span class="nv">free</span> <span class="nv">swap</span> <span class="nv">space</span>, <span class="nv">default</span><span class="ss">)</span>, <span class="nv">pfree</span> <span class="ss">(</span><span class="nv">free</span> <span class="nv">swap</span> <span class="nv">space</span>, <span class="nv">in</span> <span class="nv">percent</span><span class="ss">)</span>, <span class="nv">pused</span> <span class="ss">(</span><span class="nv">used</span> <span class="nv">swap</span> <span class="nv">space</span>,
 <span class="nv">in</span> <span class="nv">percent</span><span class="ss">)</span>, <span class="nv">total</span> <span class="ss">(</span><span class="nv">total</span> <span class="nv">swap</span> <span class="nv">space</span><span class="ss">)</span>, <span class="nv">used</span> <span class="ss">(</span><span class="nv">used</span> <span class="nv">swap</span> <span class="nv">space</span><span class="ss">)</span>
示例 <span class="nv">system</span>.<span class="nv">swap</span>.<span class="nv">size</span>[,<span class="nv">pfree</span>] – 空闲<span class="nv">swap</span>百分比


<span class="nv">system</span>.<span class="nv">uname</span>
返回主机相信信息.字符串


<span class="nv">system</span>.<span class="k">uptime</span>
系统运行时长<span class="ss">(</span>秒<span class="ss">)</span>多少秒使用<span class="nv">s</span><span class="o">/</span><span class="k">uptime</span>来获取


<span class="nv">system</span>.<span class="nv">users</span>.<span class="nv">num</span>
登陆用户数量多少用户<span class="nv">agent</span>使用<span class="nv">who</span>命令获取


<span class="nv">vfs</span>.<span class="nv">dev</span>.<span class="nv">read</span>[<span class="o">&lt;</span><span class="nv">device</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="nv">type</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="nv">mode</span><span class="o">&gt;</span>]
磁盘读取状态整数，浮点数（如果<span class="nv">type</span>为如下）
<span class="nv">device</span> <span class="o">-</span> 磁盘设备 <span class="ss">(</span>默认值 “<span class="nv">all</span>”<span class="ss">)</span> 
<span class="nv">type</span> <span class="o">-</span> 可选值:<span class="nv">sectors</span>, <span class="nv">operations</span>, <span class="nv">bytes</span>, <span class="nv">sps</span>, <span class="nv">ops</span>, <span class="nv">bps</span><span class="ss">(</span>必须指定, 不同操作系统下不同<span class="ss">)</span>.  <span class="nv">sps</span>, <span class="nv">ops</span>, <span class="nv">bps</span>
 <span class="nv">stand</span> <span class="k">for</span>: <span class="nv">sectors</span>, <span class="nv">operations</span>, <span class="nv">bytes</span> <span class="nv">per</span> <span class="nv">second</span>, <span class="nv">respectively</span>
<span class="nv">mode</span> <span class="o">-</span> 可选值: <span class="nv">avg1</span>, <span class="nv">avg5</span>, <span class="nv">avg15</span>. 
备注: 只有<span class="nv">type</span>为<span class="nv">sps</span>, <span class="nv">ops</span>, <span class="nv">bps</span>的时候，第三个参数才被支持。
不同操作系统的<span class="nv">TYPE</span>参数： <span class="nv">FreeBSD</span> – <span class="nv">bps</span> <span class="nv">Linux</span> – <span class="nv">sps</span> <span class="nv">OpenBSD</span> – <span class="nv">operations</span> <span class="nv">Solaris</span> – <span class="nv">bytes</span>
示例<span class="nv">key</span>: <span class="nv">vfs</span>.<span class="nv">dev</span>.<span class="nv">read</span>[,<span class="nv">operations</span>]


<span class="nv">vfs</span>.<span class="nv">dev</span>.<span class="nv">write</span>[<span class="o">&lt;</span><span class="nv">device</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="nv">type</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="nv">mode</span><span class="o">&gt;</span>]
磁盘写入状态整数，
<span class="nv">device</span> <span class="o">-</span> 磁盘设备 <span class="ss">(</span>默认 <span class="nv">all</span><span class="ss">)</span> 
<span class="nv">type</span> <span class="o">-</span> <span class="nv">sectors</span>, <span class="nv">operations</span>, <span class="nv">bytes</span>, <span class="nv">sps</span>, <span class="nv">ops</span>, <span class="nv">bps</span>
<span class="nv">mode</span> <span class="o">-</span> <span class="nv">one</span> <span class="nv">of</span> <span class="nv">avg1</span> <span class="ss">(</span><span class="nv">default</span><span class="ss">)</span>,<span class="nv">avg5</span> , <span class="nv">avg15</span>.
<span class="nv">example</span>: <span class="nv">vfs</span>.<span class="nv">dev</span>.<span class="nv">write</span>[,<span class="nv">operations</span>] <span class="nv">Old</span> <span class="nv">naming</span>: <span class="nv">io</span>


<span class="nv">vfs</span>.<span class="nv">file</span>.<span class="nv">cksum</span>[<span class="nv">file</span>]
计算文件校验 <span class="nv">UNIX</span> <span class="nv">cksum</span>.
<span class="nv">file</span> <span class="o">-</span> 文件完整路径


<span class="nv">vfs</span>.<span class="nv">file</span>.<span class="nv">contents</span>[<span class="nv">file</span>,<span class="o">&lt;</span><span class="nv">encoding</span><span class="o">&gt;</span>]
获取文本内容若为空，只返回 <span class="nv">LF</span><span class="o">/</span><span class="nv">CR</span> <span class="nv">characters</span>.
<span class="nv">file</span> <span class="o">-</span> 文件完整路径
例如: <span class="nv">vfs</span>.<span class="nv">file</span>.<span class="nv">contents</span>[<span class="o">/</span><span class="nv">etc</span><span class="o">/</span><span class="nv">passwd</span>] 文件不可以超过<span class="mi">64</span><span class="nv">KB</span>. 


<span class="nv">vfs</span>.<span class="nv">file</span>.<span class="nv">exists</span>[<span class="nv">file</span>]
检测文件是否存在<span class="mi">1</span> – 存在 <span class="mi">0</span> – 不存在
    <span class="nv">file</span> <span class="o">-</span> 文件完整路径


<span class="nv">vfs</span>.<span class="nv">file</span>.<span class="nv">md5sum</span>[<span class="nv">file</span>]
文件<span class="nv">MD5</span>校验码文件<span class="nv">MD5</span>哈希值
<span class="nv">file</span> <span class="o">-</span> 完整路径

<span class="nv">vfs</span>.<span class="nv">file</span>.<span class="nv">regexp</span>[<span class="nv">file</span>,<span class="nv">regexp</span>,<span class="o">&lt;</span><span class="nv">encoding</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="nv">start</span> <span class="nv">line</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="k">end</span> <span class="nv">line</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="nv">output</span><span class="o">&gt;</span>]
文件中搜索字符串包含字符串的行，或者为空
<span class="nv">file</span> <span class="o">-</span> 文件完整路径
<span class="nv">regexp</span> <span class="o">-</span> <span class="nv">GNU</span>正则表达式
<span class="nv">encoding</span> <span class="o">-</span> 编码
<span class="nv">start</span> <span class="nv">line</span> <span class="o">-</span> 从哪一行开始，默认第一行
<span class="k">end</span> <span class="nv">line</span> <span class="o">-</span> 从哪一行结束，默认最后一行
如: <span class="nv">vfs</span>.<span class="nv">file</span>.<span class="nv">regexp</span>[<span class="o">/</span><span class="nv">etc</span><span class="o">/</span><span class="nv">passwd</span>,<span class="nv">zabbix</span>]
    <span class="nv">vfs</span>.<span class="nv">file</span>.<span class="nv">regexp</span>[<span class="o">/</span><span class="nv">path</span><span class="o">/</span><span class="nv">to</span><span class="o">/</span><span class="nv">some</span><span class="o">/</span><span class="nv">file</span>,”<span class="ss">(</span>[<span class="mi">0</span><span class="o">-</span><span class="mi">9</span>]<span class="o">+</span><span class="ss">)</span>$”,,<span class="mi">3</span>,<span class="mi">5</span>,\<span class="mi">1</span>]
    <span class="nv">vfs</span>.<span class="nv">file</span>.<span class="nv">regexp</span>[<span class="o">/</span><span class="nv">etc</span><span class="o">/</span><span class="nv">passwd</span>,<span class="o">^</span><span class="nv">zabbix</span>:.:<span class="ss">(</span>[<span class="mi">0</span><span class="o">-</span><span class="mi">9</span>]<span class="o">+</span><span class="ss">)</span>,,,,\<span class="mi">1</span>]


<span class="nv">vfs</span>.<span class="nv">file</span>.<span class="nv">regmatch</span>[<span class="nv">file</span>,<span class="nv">regexp</span>,<span class="o">&lt;</span><span class="nv">encoding</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="nv">start</span> <span class="nv">line</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="k">end</span> <span class="nv">line</span><span class="o">&gt;</span>]
文件中搜索字符串<span class="mi">0</span> – 未找到 <span class="mi">1</span> – 找到
<span class="nv">file</span> <span class="o">-</span> 文件完整路径
<span class="nv">regexp</span> <span class="o">-</span> <span class="nv">GNU</span> 正则表达式
<span class="nv">encoding</span> <span class="o">-</span> 编码
<span class="nv">start</span> <span class="nv">line</span> <span class="o">-</span> 哪行开始，默认第一行
<span class="k">end</span> <span class="nv">line</span> <span class="o">-</span> 哪行结束，默认最后一行
例如: <span class="nv">vfs</span>.<span class="nv">file</span>.<span class="nv">regmatch</span>[<span class="o">/</span><span class="nv">var</span><span class="o">/</span><span class="nv">log</span><span class="o">/</span><span class="nv">app</span>.<span class="nv">log</span>,<span class="nv">error</span>]


<span class="nv">vfs</span>.<span class="nv">file</span>.<span class="nv">size</span>[<span class="nv">file</span>]
文件大小字节<span class="nv">fzabbix</span>必须有可读此文件的权限


<span class="nv">vfs</span>.<span class="nv">file</span>.<span class="nv">time</span>[<span class="nv">file</span>,<span class="o">&lt;</span><span class="nv">mode</span><span class="o">&gt;</span>]
文件时间信息<span class="nv">Unix</span> 时间戳.
<span class="nv">mode</span> <span class="o">-</span>  <span class="nv">modify</span> <span class="ss">(</span>默认, 修改时间<span class="ss">)</span>, <span class="nv">access</span> – 最后访问时间, <span class="nv">change</span> – 最后改变时间
例如: <span class="nv">vfs</span>.<span class="nv">file</span>.<span class="nv">time</span>[<span class="o">/</span><span class="nv">etc</span><span class="o">/</span><span class="nv">passwd</span>,<span class="nv">modify</span>] 备注：文件大小有限制

<span class="nv">vfs</span>.<span class="nv">fs</span>.<span class="nv">discovery</span>
列出挂载的文件系统 用于<span class="nv">lld</span>.<span class="nv">JSON</span>对象


<span class="nv">vfs</span>.<span class="nv">fs</span>.<span class="nv">inode</span>[<span class="nv">fs</span>,<span class="o">&lt;</span><span class="nv">mode</span><span class="o">&gt;</span>]
<span class="nv">inodes</span>数量数字
<span class="nv">fs</span> <span class="o">-</span> 文件系统
<span class="nv">mode</span> <span class="o">-</span> <span class="nv">total</span> <span class="ss">(</span>默认<span class="ss">)</span>, <span class="nv">free</span>, <span class="nv">used</span>, <span class="nv">pfree</span> <span class="ss">(</span>空闲百分比<span class="ss">)</span>, <span class="nv">pused</span> <span class="ss">(</span>使用百分比<span class="ss">)</span>
例如: <span class="nv">vfs</span>.<span class="nv">fs</span>.<span class="nv">inode</span>[<span class="o">/</span>,<span class="nv">pfree</span>]


<span class="nv">vfs</span>.<span class="nv">fs</span>.<span class="nv">size</span>[<span class="nv">fs</span>,<span class="o">&lt;</span><span class="nv">mode</span><span class="o">&gt;</span>]
磁盘空间，返回本地文件系统的使用量字节
<span class="nv">fs</span> <span class="o">-</span> 文件系统
<span class="nv">mode</span> <span class="o">-</span>  <span class="nv">total</span> <span class="ss">(</span>默认<span class="ss">)</span>, <span class="nv">free</span>, <span class="nv">used</span>, <span class="nv">pfree</span> <span class="ss">(</span>空闲百分比<span class="ss">)</span>, <span class="nv">pused</span> <span class="ss">(</span>使用百分比<span class="ss">)</span>.
例如: <span class="nv">vfs</span>.<span class="nv">fs</span>.<span class="nv">size</span>[<span class="o">/</span><span class="nv">tmp</span>,<span class="nv">free</span>]


<span class="nv">vm</span>.<span class="nv">memory</span>.<span class="nv">size</span>[<span class="o">&lt;</span><span class="nv">mode</span><span class="o">&gt;</span>]
内存大小字节或百分比
<span class="nv">mode</span> <span class="o">-</span> <span class="nv">total</span> <span class="ss">(</span>默认<span class="ss">)</span>, <span class="nv">active</span>, <span class="nv">anon</span>, <span class="nv">buffers</span>, <span class="nv">cached</span>, <span class="k">exec</span>, <span class="nv">file</span>, <span class="nv">free</span>, <span class="nv">inactive</span>, <span class="nv">pinned</span>, <span class="nv">shared</span>,
 <span class="nv">wired</span>, <span class="nv">used</span>, <span class="nv">pused</span>, <span class="nv">available</span>
监控项<span class="nv">vm</span>.<span class="nv">memory</span>.<span class="nv">size</span>[] 允许三种类型的参数：
第一类：包含<span class="nv">total</span> <span class="o">-</span> 总内存
第二类： 系统指定内存类型:<span class="nv">active</span>, <span class="nv">anon</span>, <span class="nv">buffers</span>, <span class="nv">cached</span>, <span class="k">exec</span>, <span class="nv">file</span>, <span class="nv">free</span>, <span class="nv">inactive</span>,<span class="nv">pinned</span>, <span class="nv">shared</span>,
 <span class="nv">wired</span>. 第三类：用户级别，一共使用了多少内存，还有多少内存可用: <span class="nv">used</span>, <span class="nv">pused</span>, <span class="nv">available</span>,<span class="nv">pavailable</span>.


<span class="nv">web</span>.<span class="nv">page</span>.<span class="nv">get</span>[<span class="nv">host</span>,<span class="o">&lt;</span><span class="nv">path</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="nv">port</span><span class="o">&gt;</span>]
获取网页内容网页源代码
<span class="nv">host</span> <span class="o">-</span> 主机名<span class="o">/</span>域名
<span class="nv">path</span> <span class="o">-</span> 文件地址，默认<span class="o">/</span>
<span class="nv">port</span> <span class="o">-</span> 端口，默认<span class="mi">80</span>返回空字符串表示失败. 例如: <span class="nv">web</span>.<span class="nv">page</span>.<span class="nv">get</span>[


<span class="nv">web</span>.<span class="nv">page</span>.<span class="nv">perf</span>[<span class="nv">host</span>,<span class="o">&lt;</span><span class="nv">path</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="nv">port</span><span class="o">&gt;</span>]
获取完全加载网页消耗的时长秒，返回<span class="mi">0</span>表示失败
<span class="nv">host</span> <span class="o">-</span> 主机名<span class="o">/</span>域名
<span class="nv">path</span> <span class="o">-</span> <span class="nv">html</span>地址，默认是<span class="o">/</span>
<span class="nv">port</span> <span class="o">-</span> 端口,默认<span class="mi">80</span>


<span class="nv">web</span>.<span class="nv">page</span>.<span class="nv">regexp</span>[<span class="nv">host</span>,<span class="o">&lt;</span><span class="nv">path</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="nv">port</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="nv">regexp</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="nv">length</span><span class="o">&gt;</span>,<span class="o">&lt;</span><span class="nv">output</span><span class="o">&gt;</span>]
在网页中搜索字符串  失败则返回空字符 <span class="ss">(</span>不匹配<span class="ss">)</span>.
<span class="nv">host</span> <span class="o">-</span> 主机名
<span class="nv">path</span> <span class="o">-</span> <span class="nv">html</span>文件路径 <span class="ss">(</span>默认值 <span class="o">/</span><span class="ss">)</span>
<span class="nv">port</span> <span class="o">-</span> 端口 <span class="ss">(</span>默认<span class="mi">80</span><span class="ss">)</span>
<span class="nv">regexp</span> <span class="o">-</span> <span class="nv">GNU</span>正则表达式
<span class="nv">length</span> <span class="o">-</span> 返回的最大的字符串数量
<span class="nv">output</span> <span class="o">-</span> 输出格式模板可选项.
</pre></div>


<h2 id="zabbix-api">zabbix api</h2>
<div class="codehilite"><pre><span></span><span class="n">For</span> <span class="n">Zabbix</span> <span class="n">proxy</span> <span class="n">database</span> <span class="n">only</span> <span class="n">schema</span><span class="o">.</span><span class="n">sql</span> <span class="n">should</span> <span class="n">be</span> <span class="n">imported</span> <span class="p">(</span><span class="n">no</span> <span class="n">images</span><span class="o">.</span><span class="n">sql</span> <span class="n">nor</span> <span class="n">data</span><span class="o">.</span><span class="n">sql</span><span class="p">)</span>
<span class="n">zabbix_proxy</span> <span class="err">安装只需要导入</span><span class="n">schema</span><span class="o">.</span><span class="n">sql</span>

<span class="n">zabbix</span><span class="o">-</span><span class="n">key</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">zabbix</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">documentation</span><span class="o">/</span><span class="mf">2.4</span><span class="o">/</span><span class="n">manual</span><span class="o">/</span><span class="n">config</span><span class="o">/</span><span class="n">items</span><span class="o">/</span><span class="n">itemtypes</span><span class="o">/</span><span class="n">zabbix_agent</span>

<span class="n">api</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">zabbix</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">documentation</span><span class="o">/</span><span class="mf">2.4</span><span class="o">/</span><span class="n">manual</span><span class="o">/</span><span class="n">api</span>

<span class="n">zabbix</span><span class="err">数据库</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">zabbix</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">documentation</span><span class="o">/</span><span class="mf">2.4</span><span class="o">/</span><span class="n">manual</span><span class="o">/</span><span class="n">appendix</span><span class="o">/</span><span class="n">install</span><span class="o">/</span><span class="n">db_scripts</span>

<span class="n">post</span><span class="err">不同</span><span class="n">data</span><span class="err">实现不同功能</span>
<span class="c1"># coding:utf-8</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">urllib2</span>
<span class="k">def</span> <span class="nf">zab_api</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://monitor.3mang.com/zabbix/api_jsonrpc.php&#39;</span>
    <span class="n">header</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Content-Type&quot;</span><span class="p">:</span> <span class="s2">&quot;application/json&quot;</span><span class="p">}</span>
    <span class="n">request</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">Request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">header</span><span class="p">)</span>
    <span class="c1"># for key in header:</span>
    <span class="c1">#     request.add_header(key, header[key])</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
    <span class="n">result</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">response</span>
<span class="n">auth_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span>
    <span class="s2">&quot;jsonrpc&quot;</span><span class="p">:</span> <span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;user.login&quot;</span><span class="p">,</span>
    <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;guangyu.liang&quot;</span><span class="p">,</span>
        <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="s2">&quot;1qaz2wsx&quot;</span>
    <span class="p">},</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">2</span>
<span class="p">})</span>
<span class="n">auth</span> <span class="o">=</span> <span class="n">zab_api</span><span class="p">(</span><span class="n">auth_data</span><span class="p">)[</span><span class="s2">&quot;result&quot;</span><span class="p">]</span>
<span class="n">hostget</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span>
    <span class="s2">&quot;jsonrpc&quot;</span><span class="p">:</span> <span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;host.get&quot;</span><span class="p">,</span>
    <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;output&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;hostid&quot;</span><span class="p">,</span> <span class="s2">&quot;host&quot;</span><span class="p">],</span>
        <span class="s2">&quot;selectInterfaces&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;interfaceid&quot;</span><span class="p">,</span> <span class="s2">&quot;ip&quot;</span><span class="p">]</span>
    <span class="p">},</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;auth&quot;</span><span class="p">:</span> <span class="n">auth</span>
<span class="p">})</span>
<span class="n">hostgroup</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span>
    <span class="s2">&quot;jsonrpc&quot;</span><span class="p">:</span> <span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;hostgroup.get&quot;</span><span class="p">,</span>
    <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;output&quot;</span><span class="p">:</span> <span class="s2">&quot;extend&quot;</span><span class="p">,</span>
        <span class="s2">&quot;filter&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Linux servers&quot;</span><span class="p">,</span><span class="s2">&quot;windows&quot;</span><span class="p">]}</span>
    <span class="p">},</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;auth&quot;</span><span class="p">:</span> <span class="n">auth</span>
<span class="p">})</span>
<span class="c1"># print json.dumps(zab_api(hostgroup)[&quot;result&quot;], indent=4)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">zab_api</span><span class="p">(</span><span class="n">hostgroup</span><span class="p">)[</span><span class="s2">&quot;result&quot;</span><span class="p">]:</span>
    <span class="k">print</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s2">&quot;groupid is: &quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">[</span><span class="s2">&quot;groupid&quot;</span><span class="p">]</span>
<span class="n">template</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span>
    <span class="s2">&quot;jsonrpc&quot;</span><span class="p">:</span> <span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;template.get&quot;</span><span class="p">,</span>
    <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;output&quot;</span><span class="p">:</span> <span class="s2">&quot;extend&quot;</span><span class="p">,</span>
        <span class="s2">&quot;filter&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Template OS Linux&quot;</span><span class="p">,</span><span class="s2">&quot;Template OS Windows&quot;</span><span class="p">]}</span>
    <span class="p">},</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;auth&quot;</span><span class="p">:</span> <span class="n">auth</span>
<span class="p">})</span>
<span class="c1"># print json.dumps(zab_api(template)[&quot;result&quot;], indent=4)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">zab_api</span><span class="p">(</span><span class="n">template</span><span class="p">)[</span><span class="s2">&quot;result&quot;</span><span class="p">]:</span>
    <span class="k">print</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">[</span><span class="s2">&quot;host&quot;</span><span class="p">],</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s2">&quot;templateid is:&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">[</span><span class="s2">&quot;templateid&quot;</span><span class="p">]</span>
<span class="n">hostcreate</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span>
    <span class="s2">&quot;jsonrpc&quot;</span><span class="p">:</span> <span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;host.create&quot;</span><span class="p">,</span>
    <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;api test&quot;</span><span class="p">,</span>
        <span class="s2">&quot;interfaces&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>  <span class="c1"># 1 - agent; 2 - SNMP; 3 - IPMI; 4 - JMX.</span>
                <span class="s2">&quot;main&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="s2">&quot;useip&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="s2">&quot;ip&quot;</span><span class="p">:</span> <span class="s2">&quot;192.168.3.1&quot;</span><span class="p">,</span>
                <span class="s2">&quot;dns&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                <span class="s2">&quot;port&quot;</span><span class="p">:</span> <span class="s2">&quot;10050&quot;</span>
            <span class="p">}</span>
        <span class="p">],</span>
        <span class="s2">&quot;groups&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;groupid&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">}],</span>
        <span class="s2">&quot;templates&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;templateid&quot;</span><span class="p">:</span> <span class="s2">&quot;10001&quot;</span><span class="p">}],</span>
        <span class="s2">&quot;inventory_mode&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>  <span class="c1"># -1 - disabled; 0 - (default) manual; 1 - automatic.</span>
        <span class="c1"># &quot;inventory&quot;: {</span>
        <span class="c1">#     &quot;macaddress_a&quot;: &quot;01234&quot;,</span>
        <span class="c1">#     &quot;macaddress_b&quot;: &quot;56768&quot;</span>
        <span class="c1"># }</span>
    <span class="p">},</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;auth&quot;</span><span class="p">:</span> <span class="n">auth</span>
<span class="p">})</span>
<span class="c1"># print zab_api(hostcreate)</span>


<span class="mf">1.</span><span class="n">user</span><span class="o">.</span><span class="n">login</span><span class="err">方法获取</span><span class="n">zabbix</span> <span class="n">server</span><span class="err">的认证结果官方地址：</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">zabbix</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">documentation</span><span class="o">/</span><span class="mf">2.2</span><span class="o">/</span><span class="n">manual</span><span class="o">/</span><span class="n">api</span><span class="o">/</span>
<span class="n">reference</span><span class="o">/</span><span class="n">user</span><span class="o">/</span><span class="n">login</span>
<span class="n">python</span><span class="err">脚本：</span>

<span class="p">[</span><span class="n">root</span><span class="nd">@yang</span> <span class="n">python</span><span class="p">]</span><span class="c1"># cat auth.py</span>
<span class="c1">#!/usr/bin/env python2.7</span>
<span class="c1">#coding=utf-8</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">urllib2</span>
<span class="c1"># based url and required header</span>
<span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;http://1.1.1.1/zabbix/api_jsonrpc.php&quot;</span>
<span class="n">header</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Content-Type&quot;</span><span class="p">:</span><span class="s2">&quot;application/json&quot;</span><span class="p">}</span>
<span class="c1"># auth user and password</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span>
<span class="p">{</span>
<span class="s2">&quot;jsonrpc&quot;</span><span class="p">:</span> <span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
<span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;user.login&quot;</span><span class="p">,</span>
<span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;Admin&quot;</span><span class="p">,</span>
<span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="s2">&quot;zabbix&quot;</span>
<span class="p">},</span>
<span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">0</span>
<span class="p">})</span>
<span class="c1"># create request object</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">Request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">data</span><span class="p">)</span>
<span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">header</span><span class="p">:</span>
    <span class="n">request</span><span class="o">.</span><span class="n">add_header</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="n">header</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
<span class="c1"># auth and get authid</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="k">except</span> <span class="n">URLError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="s2">&quot;Auth Failed, Please Check Your Name AndPassword:&quot;</span><span class="p">,</span><span class="n">e</span><span class="o">.</span><span class="n">code</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
    <span class="n">result</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="k">print</span><span class="s2">&quot;Auth Successful. The Auth ID Is:&quot;</span><span class="p">,</span><span class="n">response</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">]</span>
<span class="n">python</span><span class="err">脚本运行结果：</span>
<span class="p">[</span><span class="n">root</span><span class="nd">@yang</span> <span class="n">python</span><span class="p">]</span><span class="c1"># python auth.py</span>
<span class="n">Auth</span> <span class="n">Successful</span><span class="o">.</span> <span class="n">The</span> <span class="n">Auth</span> <span class="n">ID</span> <span class="n">Is</span><span class="p">:</span> <span class="n">a0b82aae0842c2041386a61945af1180</span>

<span class="n">curl</span><span class="err">命令：</span>
<span class="n">curl</span> <span class="o">-</span><span class="n">i</span> <span class="o">-</span><span class="n">X</span> <span class="n">POST</span> <span class="o">-</span><span class="n">H</span> <span class="s1">&#39;Content-Type:application/json&#39;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;jsonrpc&quot;:</span>
<span class="s2">&quot;2.0&quot;</span><span class="p">,</span><span class="s2">&quot;method&quot;</span><span class="p">:</span><span class="s2">&quot;user.login&quot;</span><span class="p">,</span><span class="s2">&quot;params&quot;</span><span class="p">:{</span><span class="s2">&quot;user&quot;</span><span class="p">:</span><span class="s2">&quot;admin&quot;</span><span class="p">,</span><span class="s2">&quot;password&quot;</span><span class="p">:</span><span class="s2">&quot;zabbix&quot;</span><span class="p">},</span><span class="s2">&quot;auth&quot;</span><span class="p">:</span>
<span class="n">null</span><span class="p">,</span><span class="s2">&quot;id&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">}</span><span class="s1">&#39; http://1.1.1.1/zabbix/api_jsonrpc.php</span>

<span class="n">curl</span><span class="err">命令运行结果：</span>
<span class="p">{</span><span class="s2">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span><span class="s2">&quot;result&quot;</span><span class="p">:</span><span class="s2">&quot;b895ce91ba84fe247e444817c6773cc3&quot;</span><span class="p">,</span><span class="s2">&quot;id&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">}</span>


<span class="mf">2.</span><span class="n">hostgroup</span><span class="o">.</span><span class="n">get</span><span class="err">方法获取所有主机组</span><span class="n">ID</span><span class="err">把认证密钥放到脚本中，每次获取数据时都需要认证。此处是获取</span><span class="n">zabbix</span> <span class="n">server</span><span class="err">上的</span>
<span class="err">所有主机组名称与</span><span class="n">ID</span><span class="err">号。</span>
<span class="err">官方地址：</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">zabbix</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">documentation</span><span class="o">/</span><span class="mf">2.2</span><span class="o">/</span><span class="n">manual</span><span class="o">/</span><span class="n">api</span><span class="o">/</span><span class="n">reference</span><span class="o">/</span><span class="n">hostgroup</span><span class="o">/</span><span class="n">get</span>
<span class="n">python</span><span class="err">脚本：</span>

<span class="p">[</span><span class="n">root</span><span class="nd">@yang</span> <span class="n">python</span><span class="p">]</span><span class="c1"># catget_hostgroup_list.py</span>
<span class="c1">#!/usr/bin/env python2.7</span>
<span class="c1">#coding=utf-8</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">urllib2</span>
<span class="c1"># based url and required header</span>
<span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;http://1.1.1.1/zabbix/api_jsonrpc.php&quot;</span>
<span class="n">header</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Content-Type&quot;</span><span class="p">:</span><span class="s2">&quot;application/json&quot;</span><span class="p">}</span>
<span class="c1"># request json</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span>
<span class="p">{</span>
<span class="s2">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
<span class="s2">&quot;method&quot;</span><span class="p">:</span><span class="s2">&quot;hostgroup.get&quot;</span><span class="p">,</span>
<span class="s2">&quot;params&quot;</span><span class="p">:{</span>
<span class="s2">&quot;output&quot;</span><span class="p">:[</span><span class="s2">&quot;groupid&quot;</span><span class="p">,</span><span class="s2">&quot;name&quot;</span><span class="p">],</span>
   <span class="p">},</span>
<span class="s2">&quot;auth&quot;</span><span class="p">:</span><span class="s2">&quot;3c0e88885a8cf8af9502b5c850b992bd&quot;</span><span class="p">,</span> <span class="c1"># theauth id is what auth script returns, remeber it is string</span>
<span class="s2">&quot;id&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
<span class="p">})</span>
<span class="c1"># create request object</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">Request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">data</span><span class="p">)</span>
<span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">header</span><span class="p">:</span>
    <span class="n">request</span><span class="o">.</span><span class="n">add_header</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="n">header</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
<span class="c1"># get host list</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="k">except</span> <span class="n">URLError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s1">&#39;reason&#39;</span><span class="p">):</span>
        <span class="k">print</span> <span class="s1">&#39;We failed to reach a server.&#39;</span>
        <span class="k">print</span> <span class="s1">&#39;Reason: &#39;</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">reason</span>
<span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s1">&#39;code&#39;</span><span class="p">):</span>
    <span class="k">print</span> <span class="s1">&#39;The server could not fulfill the request.&#39;</span>
    <span class="k">print</span> <span class="s1">&#39;Error code: &#39;</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">code</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
    <span class="n">result</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="k">print</span> <span class="s2">&quot;Number Of Hosts: &quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">response</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">])</span>
<span class="c1">#print response</span>
<span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">response</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">]:</span>
    <span class="k">print</span> <span class="s2">&quot;Group ID:&quot;</span><span class="p">,</span><span class="n">group</span><span class="p">[</span><span class="s1">&#39;groupid&#39;</span><span class="p">],</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">GroupName:&quot;</span><span class="p">,</span><span class="n">group</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
<span class="n">python</span><span class="err">脚本执行结果：</span>

<span class="p">[</span><span class="n">root</span><span class="nd">@yang</span> <span class="n">python</span><span class="p">]</span><span class="c1"># pythonget_hostgroup_list.py</span>
<span class="n">Number</span> <span class="n">Of</span> <span class="n">Hosts</span><span class="p">:</span>  <span class="mi">12</span>
<span class="n">Group</span> <span class="n">ID</span><span class="p">:</span> <span class="mi">11</span>    <span class="n">Group</span> <span class="n">Name</span><span class="p">:</span> <span class="n">DB</span> <span class="n">Schedule</span>
<span class="n">Group</span> <span class="n">ID</span><span class="p">:</span> <span class="mi">14</span>    <span class="n">Group</span> <span class="n">Name</span><span class="p">:</span> <span class="n">DG</span><span class="o">-</span><span class="n">WY</span><span class="o">-</span><span class="n">KD</span><span class="o">-</span><span class="n">Server</span>
<span class="n">Group</span> <span class="n">ID</span><span class="p">:</span> <span class="mi">5</span>     <span class="n">Group</span> <span class="n">Name</span><span class="p">:</span> <span class="n">Discovered</span> <span class="n">hosts</span>
<span class="n">Group</span> <span class="n">ID</span><span class="p">:</span> <span class="mi">7</span>     <span class="n">Group</span> <span class="n">Name</span><span class="p">:</span> <span class="n">Hypervisors</span>
<span class="n">Group</span> <span class="n">ID</span><span class="p">:</span> <span class="mi">2</span>     <span class="n">Group</span> <span class="n">Name</span><span class="p">:</span> <span class="n">Linux</span> <span class="n">servers</span>
<span class="n">Group</span> <span class="n">ID</span><span class="p">:</span> <span class="mi">8</span>     <span class="n">Group</span> <span class="n">Name</span><span class="p">:</span> <span class="n">monitored_linux</span>
<span class="n">Group</span> <span class="n">ID</span><span class="p">:</span> <span class="mi">9</span>     <span class="n">Group</span> <span class="n">Name</span><span class="p">:</span> <span class="n">qsmind</span>
<span class="n">Group</span> <span class="n">ID</span><span class="p">:</span> <span class="mi">12</span>    <span class="n">Group</span> <span class="n">Name</span><span class="p">:</span> <span class="n">qssec</span>
<span class="n">Group</span> <span class="n">ID</span><span class="p">:</span> <span class="mi">13</span>    <span class="n">Group</span> <span class="n">Name</span><span class="p">:</span> <span class="n">switch</span>
<span class="n">Group</span> <span class="n">ID</span><span class="p">:</span> <span class="mi">1</span>     <span class="n">Group</span> <span class="n">Name</span><span class="p">:</span> <span class="n">Templates</span>
<span class="n">Group</span> <span class="n">ID</span><span class="p">:</span> <span class="mi">6</span>     <span class="n">Group</span> <span class="n">Name</span><span class="p">:</span> <span class="n">Virtual</span> <span class="n">machines</span>
<span class="n">Group</span> <span class="n">ID</span><span class="p">:</span> <span class="mi">4</span>     <span class="n">Group</span> <span class="n">Name</span><span class="p">:</span> <span class="n">Zabbix</span> <span class="n">servers</span>


<span class="n">curl</span><span class="err">命令：</span>
<span class="n">curl</span> <span class="o">-</span><span class="n">i</span> <span class="o">-</span><span class="n">X</span> <span class="n">POST</span> <span class="o">-</span><span class="n">H</span> <span class="s1">&#39;Content-Type:application/json&#39;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;jsonrpc&quot;: &quot;2.0&quot;,&quot;method&quot;:&quot;hostgroup.get&quot;,&quot;params&quot;:</span>
<span class="p">{</span><span class="s2">&quot;output&quot;</span><span class="p">:[</span><span class="s2">&quot;groupid&quot;</span><span class="p">,</span><span class="s2">&quot;name&quot;</span><span class="p">]},</span><span class="s2">&quot;auth&quot;</span><span class="p">:</span><span class="s2">&quot;11d2b45415d5de6770ce196879dbfcf1&quot;</span><span class="p">,</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span><span class="s1">&#39; http://1.1.1.1/zabbix/</span>
<span class="n">api_jsonrpc</span><span class="o">.</span><span class="n">php</span>

<span class="n">curl</span><span class="err">执行结果：</span>
<span class="p">{</span><span class="s2">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span><span class="s2">&quot;result&quot;</span><span class="p">:[{</span><span class="s2">&quot;groupid&quot;</span><span class="p">:</span><span class="s2">&quot;11&quot;</span><span class="p">,</span><span class="s2">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;DBSchedule&quot;</span><span class="p">},{</span><span class="s2">&quot;groupid&quot;</span><span class="p">:</span><span class="s2">&quot;14&quot;</span><span class="p">,</span><span class="s2">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;DG-WY-KD-Server&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;groupid&quot;</span><span class="p">:</span><span class="s2">&quot;5&quot;</span><span class="p">,</span><span class="s2">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;Discoveredhosts&quot;</span><span class="p">},{</span><span class="s2">&quot;groupid&quot;</span><span class="p">:</span><span class="s2">&quot;7&quot;</span><span class="p">,</span><span class="s2">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;Hypervisors&quot;</span><span class="p">},{</span><span class="s2">&quot;groupid&quot;</span><span class="p">:</span><span class="s2">&quot;2&quot;</span><span class="p">,</span><span class="s2">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;Linuxservers&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;groupid&quot;</span><span class="p">:</span><span class="s2">&quot;8&quot;</span><span class="p">,</span><span class="s2">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;monitored_linux&quot;</span><span class="p">},{</span><span class="s2">&quot;groupid&quot;</span><span class="p">:</span><span class="s2">&quot;9&quot;</span><span class="p">,</span><span class="s2">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;qsmind&quot;</span><span class="p">},{</span><span class="s2">&quot;groupid&quot;</span><span class="p">:</span><span class="s2">&quot;12&quot;</span><span class="p">,</span><span class="s2">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;qssec&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;groupid&quot;</span><span class="p">:</span><span class="s2">&quot;13&quot;</span><span class="p">,</span><span class="s2">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;switch&quot;</span><span class="p">},{</span><span class="s2">&quot;groupid&quot;</span><span class="p">:</span><span class="s2">&quot;1&quot;</span><span class="p">,</span><span class="s2">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;Templates&quot;</span><span class="p">},{</span><span class="s2">&quot;groupid&quot;</span><span class="p">:</span><span class="s2">&quot;6&quot;</span><span class="p">,</span><span class="s2">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;Virtualmachines&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;groupid&quot;</span><span class="p">:</span><span class="s2">&quot;4&quot;</span><span class="p">,</span><span class="s2">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;Zabbixservers&quot;</span><span class="p">}],</span><span class="s2">&quot;id&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">}</span>

<span class="mf">3.</span><span class="n">itemsid</span><span class="o">.</span><span class="n">get</span><span class="err">方法获取单个主机下所有的监控项</span><span class="n">ID</span><span class="err">根据标题</span><span class="mi">3</span><span class="err">中获取到的所有主机</span><span class="nb">id</span><span class="err">与名称，找到你想要获取的主机</span><span class="nb">id</span><span class="err">，获取它下面的所有</span><span class="n">items</span><span class="err">。</span>
<span class="err">官方地址：</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">zabbix</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">documentation</span><span class="o">/</span><span class="mf">2.2</span><span class="o">/</span><span class="n">manual</span><span class="o">/</span><span class="n">api</span><span class="o">/</span><span class="n">reference</span><span class="o">/</span><span class="n">item</span>
<span class="n">python</span><span class="err">脚本：</span>

<span class="c1">#!/usr/bin/env python2.7</span>
<span class="c1">#coding=utf-8</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">urllib2</span>
<span class="c1"># based url and required header</span>
<span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;http://1.1.1.1/zabbix/api_jsonrpc.php&quot;</span>
<span class="n">header</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Content-Type&quot;</span><span class="p">:</span><span class="s2">&quot;application/json&quot;</span><span class="p">}</span>
<span class="c1"># request json</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span>
<span class="p">{</span>
<span class="s2">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
<span class="s2">&quot;method&quot;</span><span class="p">:</span><span class="s2">&quot;host.get&quot;</span><span class="p">,</span>
<span class="s2">&quot;params&quot;</span><span class="p">:{</span>
<span class="s2">&quot;output&quot;</span><span class="p">:[</span><span class="s2">&quot;hostid&quot;</span><span class="p">,</span><span class="s2">&quot;name&quot;</span><span class="p">],</span>
<span class="s2">&quot;groupids&quot;</span><span class="p">:</span><span class="s2">&quot;14&quot;</span><span class="p">,</span>
   <span class="p">},</span>
<span class="s2">&quot;auth&quot;</span><span class="p">:</span><span class="s2">&quot;3c0e88885a8cf8af9502b5c850b992bd&quot;</span><span class="p">,</span> <span class="c1"># theauth id is what auth script returns, remeber it is string</span>
<span class="s2">&quot;id&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
<span class="p">})</span>
<span class="c1"># create request object</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">Request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">data</span><span class="p">)</span>
<span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">header</span><span class="p">:</span>
<span class="n">request</span><span class="o">.</span><span class="n">add_header</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="n">header</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
<span class="c1"># get host list</span>
<span class="k">try</span><span class="p">:</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="k">except</span> <span class="n">URLError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
   <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s1">&#39;reason&#39;</span><span class="p">):</span>
<span class="k">print</span> <span class="s1">&#39;We failed to reach a server.&#39;</span>
<span class="k">print</span> <span class="s1">&#39;Reason: &#39;</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">reason</span>
<span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s1">&#39;code&#39;</span><span class="p">):</span>
<span class="k">print</span> <span class="s1">&#39;The server could not fulfill the request.&#39;</span>
<span class="k">print</span> <span class="s1">&#39;Error code: &#39;</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">code</span>
<span class="k">else</span><span class="p">:</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="n">result</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="k">print</span> <span class="s2">&quot;Number Of Hosts: &quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">response</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">])</span>
<span class="k">for</span> <span class="n">host</span> <span class="ow">in</span> <span class="n">response</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">]:</span>
<span class="k">print</span> <span class="s2">&quot;Host ID:&quot;</span><span class="p">,</span><span class="n">host</span><span class="p">[</span><span class="s1">&#39;hostid&#39;</span><span class="p">],</span><span class="s2">&quot;HostName:&quot;</span><span class="p">,</span><span class="n">host</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>

<span class="p">[</span><span class="n">root</span><span class="nd">@yang</span> <span class="n">python</span><span class="p">]</span><span class="c1"># cat get_items.py</span>
<span class="c1">#!/usr/bin/env python2.7</span>
<span class="c1">#coding=utf-8</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">urllib2</span>
<span class="c1"># based url and required header</span>
<span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;http://1.1.1.1/zabbix/api_jsonrpc.php&quot;</span>
<span class="n">header</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Content-Type&quot;</span><span class="p">:</span><span class="s2">&quot;application/json&quot;</span><span class="p">}</span>
<span class="c1"># request json</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span>
<span class="p">{</span>
<span class="s2">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
<span class="s2">&quot;method&quot;</span><span class="p">:</span><span class="s2">&quot;item.get&quot;</span><span class="p">,</span>
   <span class="s2">&quot;params&quot;</span><span class="p">:{</span>
<span class="s2">&quot;output&quot;</span><span class="p">:[</span><span class="s2">&quot;itemids&quot;</span><span class="p">,</span><span class="s2">&quot;key_&quot;</span><span class="p">],</span>
<span class="s2">&quot;hostids&quot;</span><span class="p">:</span><span class="s2">&quot;10146&quot;</span><span class="p">,</span>
   <span class="p">},</span>
<span class="s2">&quot;auth&quot;</span><span class="p">:</span><span class="s2">&quot;3c0e88885a8cf8af9502b5c850b992bd&quot;</span><span class="p">,</span> <span class="c1"># theauth id is what auth script returns, remeber it is string</span>
<span class="s2">&quot;id&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
<span class="p">})</span>
<span class="c1"># create request object</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">Request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">data</span><span class="p">)</span>
<span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">header</span><span class="p">:</span>
<span class="n">request</span><span class="o">.</span><span class="n">add_header</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="n">header</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
<span class="c1"># get host list</span>
<span class="k">try</span><span class="p">:</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="k">except</span> <span class="n">URLError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
   <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s1">&#39;reason&#39;</span><span class="p">):</span>
<span class="k">print</span> <span class="s1">&#39;We failed to reach a server.&#39;</span>
<span class="k">print</span> <span class="s1">&#39;Reason: &#39;</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">reason</span>
<span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s1">&#39;code&#39;</span><span class="p">):</span>
<span class="k">print</span> <span class="s1">&#39;The server could not fulfill the request.&#39;</span>
<span class="k">print</span> <span class="s1">&#39;Error code: &#39;</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">code</span>
<span class="k">else</span><span class="p">:</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="n">result</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="k">print</span> <span class="s2">&quot;Number Of Hosts: &quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">response</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">])</span>
<span class="k">for</span> <span class="n">host</span> <span class="ow">in</span> <span class="n">response</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">]:</span>
<span class="k">print</span> <span class="n">host</span>
<span class="c1">#print &quot;Host ID:&quot;,host[&#39;hostid&#39;],&quot;HostName:&quot;,host[&#39;name&#39;]</span>

<span class="n">python</span><span class="err">脚本运行结果：</span>
<span class="p">[</span><span class="n">root</span><span class="nd">@yang</span> <span class="n">python</span><span class="p">]</span><span class="c1"># python get_items.py</span>
<span class="n">Number</span> <span class="n">Of</span> <span class="n">Hosts</span><span class="p">:</span>  <span class="mi">54</span>
<span class="p">{</span><span class="sa">u</span><span class="s1">&#39;itemid&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;24986&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;key_&#39;</span><span class="p">:</span><span class="sa">u</span><span class="s1">&#39;agent.hostname&#39;</span><span class="p">}</span>
<span class="p">{</span><span class="sa">u</span><span class="s1">&#39;itemid&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;24987&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;key_&#39;</span><span class="p">:</span><span class="sa">u</span><span class="s1">&#39;agent.ping&#39;</span><span class="p">}</span>
<span class="p">{</span><span class="sa">u</span><span class="s1">&#39;itemid&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;24988&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;key_&#39;</span><span class="p">:</span><span class="sa">u</span><span class="s1">&#39;agent.version&#39;</span><span class="p">}</span>
<span class="p">{</span><span class="sa">u</span><span class="s1">&#39;itemid&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;24989&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;key_&#39;</span><span class="p">:</span><span class="sa">u</span><span class="s1">&#39;kernel.maxfiles&#39;</span><span class="p">}</span>
<span class="p">{</span><span class="sa">u</span><span class="s1">&#39;itemid&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;24990&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;key_&#39;</span><span class="p">:</span><span class="sa">u</span><span class="s1">&#39;kernel.maxproc&#39;</span><span class="p">}</span>
<span class="p">{</span><span class="sa">u</span><span class="s1">&#39;itemid&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;25157&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;key_&#39;</span><span class="p">:</span><span class="sa">u</span><span class="s1">&#39;net.if.in[eth0]&#39;</span><span class="p">}</span>
<span class="p">{</span><span class="sa">u</span><span class="s1">&#39;itemid&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;25158&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;key_&#39;</span><span class="p">:</span><span class="sa">u</span><span class="s1">&#39;net.if.in[eth1]&#39;</span><span class="p">}</span>
<span class="err">…</span> <span class="err">…</span>

<span class="n">curl</span><span class="err">命令：</span>
<span class="n">curl</span> <span class="o">-</span><span class="n">i</span> <span class="o">-</span><span class="n">X</span> <span class="n">POST</span> <span class="o">-</span><span class="n">H</span> <span class="s1">&#39;Content-Type:application/json&#39;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;item.get&quot;,&quot;params&quot;:</span>
<span class="p">{</span><span class="s2">&quot;output&quot;</span><span class="p">:</span><span class="s2">&quot;itemids&quot;</span><span class="p">,</span><span class="s2">&quot;hostids&quot;</span><span class="p">:</span><span class="s2">&quot;10146&quot;</span><span class="p">,</span><span class="s2">&quot;search&quot;</span><span class="p">:{</span><span class="s2">&quot;key_&quot;</span><span class="p">:</span><span class="s2">&quot;net.if.out[eth2]&quot;</span><span class="p">}},</span><span class="s2">&quot;auth&quot;</span><span class="p">:</span>
<span class="s2">&quot;11d2b45415d5de6770ce196879dbfcf1&quot;</span><span class="p">,</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span><span class="s1">&#39; http://1.1.1.1/zabbix/api_jsonrpc.php</span>
<span class="c1">#此处加上了单个key的名称</span>


<span class="n">curl</span><span class="err">命令执行结果：</span>
<span class="p">{</span><span class="s2">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span><span class="s2">&quot;result&quot;</span><span class="p">:[{</span><span class="s2">&quot;itemid&quot;</span><span class="p">:</span><span class="s2">&quot;25154&quot;</span><span class="p">}],</span><span class="s2">&quot;id&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">}</span>



<span class="mf">5.</span><span class="n">history</span><span class="o">.</span><span class="n">get</span><span class="err">方法获取单个监控项的历史数据根据第</span><span class="mi">4</span><span class="err">项的获取到的所有</span><span class="n">items</span> <span class="nb">id</span><span class="err">的值，找到想要监控的那项，获取它的历史数据。</span>
<span class="err">官方地址：</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">zabbix</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">documentation</span><span class="o">/</span><span class="mf">2.2</span><span class="o">/</span><span class="n">manual</span><span class="o">/</span><span class="n">api</span><span class="o">/</span><span class="n">reference</span><span class="o">/</span><span class="n">history</span><span class="o">/</span><span class="n">get</span>
<span class="n">python</span><span class="err">脚本：</span>
<span class="p">[</span><span class="n">root</span><span class="nd">@yang</span> <span class="n">python</span><span class="p">]</span><span class="c1"># catget_items_history.py</span>
<span class="c1">#!/usr/bin/env python2.7</span>
<span class="c1">#coding=utf-8</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">urllib2</span>
<span class="c1"># based url and required header</span>
<span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;http://1.1.1.1/zabbix/api_jsonrpc.php&quot;</span>
<span class="n">header</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Content-Type&quot;</span><span class="p">:</span><span class="s2">&quot;application/json&quot;</span><span class="p">}</span>
<span class="c1"># request json</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span>
<span class="p">{</span>
<span class="s2">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
<span class="s2">&quot;method&quot;</span><span class="p">:</span><span class="s2">&quot;history.get&quot;</span><span class="p">,</span>
<span class="s2">&quot;params&quot;</span><span class="p">:{</span>
<span class="s2">&quot;output&quot;</span><span class="p">:</span><span class="s2">&quot;extend&quot;</span><span class="p">,</span>
<span class="s2">&quot;history&quot;</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span>
<span class="s2">&quot;itemids&quot;</span><span class="p">:</span><span class="s2">&quot;25159&quot;</span><span class="p">,</span>
<span class="s2">&quot;limit&quot;</span><span class="p">:</span><span class="mi">10</span>
   <span class="p">},</span>
<span class="s2">&quot;auth&quot;</span><span class="p">:</span><span class="s2">&quot;3c0e88885a8cf8af9502b5c850b992bd&quot;</span><span class="p">,</span> <span class="c1"># theauth id is what auth script returns, remeber it is string</span>
<span class="s2">&quot;id&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
<span class="p">})</span>
<span class="c1"># create request object</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">Request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">data</span><span class="p">)</span>
<span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">header</span><span class="p">:</span>
    <span class="n">request</span><span class="o">.</span><span class="n">add_header</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="n">header</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
<span class="c1"># get host list</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="k">except</span> <span class="n">URLError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
   <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s1">&#39;reason&#39;</span><span class="p">):</span>
       <span class="k">print</span> <span class="s1">&#39;We failed to reach a server.&#39;</span>
       <span class="k">print</span> <span class="s1">&#39;Reason: &#39;</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">reason</span>
   <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s1">&#39;code&#39;</span><span class="p">):</span>
       <span class="k">print</span> <span class="s1">&#39;The server could not fulfill the request.&#39;</span>
       <span class="k">print</span> <span class="s1">&#39;Error code: &#39;</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">code</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
    <span class="n">result</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">print</span> <span class="s2">&quot;Number Of Hosts: &quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">response</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">])</span>
<span class="k">for</span> <span class="n">host</span> <span class="ow">in</span> <span class="n">response</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">]:</span>
    <span class="k">print</span> <span class="n">host</span>
<span class="c1">#print &quot;Host ID:&quot;,host[&#39;hostid&#39;],&quot;HostName:&quot;,host[&#39;name&#39;]</span>


<span class="n">python</span><span class="err">脚本执行结果：</span>
<span class="p">[</span><span class="n">root</span><span class="nd">@yang</span> <span class="n">python</span><span class="p">]</span><span class="c1"># pythonget_items_history.py</span>
<span class="n">Number</span> <span class="n">Of</span> <span class="n">Hosts</span><span class="p">:</span>  <span class="mi">10</span>
<span class="p">{</span><span class="sa">u</span><span class="s1">&#39;itemid&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;25159&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;ns&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;420722133&#39;</span><span class="p">,</span><span class="sa">u</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;3008&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;clock&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;1410744079&#39;</span><span class="p">}</span>
<span class="p">{</span><span class="sa">u</span><span class="s1">&#39;itemid&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;25159&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;ns&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;480606614&#39;</span><span class="p">,</span><span class="sa">u</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;5720&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;clock&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;1410744139&#39;</span><span class="p">}</span>
<span class="p">{</span><span class="sa">u</span><span class="s1">&#39;itemid&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;25159&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;ns&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;40905600&#39;</span><span class="p">,</span><span class="sa">u</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;6144&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;clock&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;1410744200&#39;</span><span class="p">}</span>
<span class="p">{</span><span class="sa">u</span><span class="s1">&#39;itemid&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;25159&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;ns&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;175337062&#39;</span><span class="p">,</span><span class="sa">u</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;2960&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;clock&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;1410744259&#39;</span><span class="p">}</span>
<span class="p">{</span><span class="sa">u</span><span class="s1">&#39;itemid&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;25159&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;ns&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;202705084&#39;</span><span class="p">,</span><span class="sa">u</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;3032&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;clock&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;1410744319&#39;</span><span class="p">}</span>
<span class="p">{</span><span class="sa">u</span><span class="s1">&#39;itemid&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;25159&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;ns&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;263158421&#39;</span><span class="p">,</span><span class="sa">u</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;2864&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;clock&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;1410744379&#39;</span><span class="p">}</span>
<span class="p">{</span><span class="sa">u</span><span class="s1">&#39;itemid&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;25159&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;ns&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;702285081&#39;</span><span class="p">,</span><span class="sa">u</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;7600&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;clock&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;1410744439&#39;</span><span class="p">}</span>
<span class="p">{</span><span class="sa">u</span><span class="s1">&#39;itemid&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;25159&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;ns&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;231191890&#39;</span><span class="p">,</span><span class="sa">u</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;3864&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;clock&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;1410744499&#39;</span><span class="p">}</span>
<span class="p">{</span><span class="sa">u</span><span class="s1">&#39;itemid&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;25159&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;ns&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;468566742&#39;</span><span class="p">,</span><span class="sa">u</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;3112&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;clock&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;1410744559&#39;</span><span class="p">}</span>
<span class="p">{</span><span class="sa">u</span><span class="s1">&#39;itemid&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;25159&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;ns&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;421679098&#39;</span><span class="p">,</span><span class="sa">u</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;2952&#39;</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;clock&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;1410744619&#39;</span><span class="p">}</span>


<span class="n">curl</span><span class="err">命令：</span>
<span class="n">curl</span> <span class="o">-</span><span class="n">i</span> <span class="o">-</span><span class="n">X</span> <span class="n">POST</span> <span class="o">-</span><span class="n">H</span> <span class="s1">&#39;Content-Type:application/json&#39;</span> <span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;history.get&quot;,&quot;params&quot;:</span>
<span class="p">{</span><span class="s2">&quot;history&quot;</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="s2">&quot;itemids&quot;</span><span class="p">:</span><span class="s2">&quot;25154&quot;</span><span class="p">,</span><span class="s2">&quot;output&quot;</span><span class="p">:</span><span class="s2">&quot;extend&quot;</span><span class="p">,</span><span class="s2">&quot;limit&quot;</span><span class="p">:</span><span class="mi">10</span><span class="p">},</span><span class="s2">&quot;auth&quot;</span><span class="p">:</span><span class="s2">&quot;11d2b45415d5de6770ce196879dbfcf1&quot;</span><span class="p">,</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span><span class="s1">&#39; </span>
<span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">1.1</span><span class="o">.</span><span class="mf">1.1</span><span class="o">/</span><span class="n">zabbix</span><span class="o">/</span><span class="n">api_jsonrpc</span><span class="o">.</span><span class="n">php</span>

<span class="n">curl</span><span class="err">命令运行结果：</span>
<span class="p">{</span><span class="s2">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span><span class="s2">&quot;result&quot;</span><span class="p">:[{</span><span class="s2">&quot;itemid&quot;</span><span class="p">:</span><span class="s2">&quot;25154&quot;</span><span class="p">,</span><span class="s2">&quot;clock&quot;</span><span class="p">:</span><span class="s2">&quot;1410744134&quot;</span><span class="p">,</span><span class="s2">&quot;value&quot;</span><span class="p">:</span><span class="s2">&quot;4840&quot;</span><span class="p">,</span><span class="s2">&quot;ns&quot;</span><span class="p">:</span><span class="s2">&quot;375754276&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;itemid&quot;</span><span class="p">:</span><span class="s2">&quot;25154&quot;</span><span class="p">,</span><span class="s2">&quot;clock&quot;</span><span class="p">:</span><span class="s2">&quot;1410744314&quot;</span><span class="p">,</span><span class="s2">&quot;value&quot;</span><span class="p">:</span><span class="s2">&quot;5408&quot;</span><span class="p">,</span><span class="s2">&quot;ns&quot;</span><span class="p">:</span><span class="s2">&quot;839852515&quot;</span><span class="p">},{</span><span class="s2">&quot;itemid&quot;</span><span class="p">:</span><span class="s2">&quot;25154&quot;</span><span class="p">,</span>
<span class="s2">&quot;clock&quot;</span><span class="p">:</span><span class="s2">&quot;1410744374&quot;</span><span class="p">,</span><span class="s2">&quot;value&quot;</span><span class="p">:</span><span class="s2">&quot;7040&quot;</span><span class="p">,</span><span class="s2">&quot;ns&quot;</span><span class="p">:</span><span class="s2">&quot;964558609&quot;</span><span class="p">},{</span><span class="s2">&quot;itemid&quot;</span><span class="p">:</span><span class="s2">&quot;25154&quot;</span><span class="p">,</span><span class="s2">&quot;clock&quot;</span><span class="p">:</span><span class="s2">&quot;1410744554&quot;</span><span class="p">,</span><span class="s2">&quot;value&quot;</span><span class="p">:</span><span class="s2">&quot;4072&quot;</span><span class="p">,</span>
<span class="s2">&quot;ns&quot;</span><span class="p">:</span><span class="s2">&quot;943177771&quot;</span><span class="p">},{</span><span class="s2">&quot;itemid&quot;</span><span class="p">:</span><span class="s2">&quot;25154&quot;</span><span class="p">,</span><span class="s2">&quot;clock&quot;</span><span class="p">:</span><span class="s2">&quot;1410744614&quot;</span><span class="p">,</span><span class="s2">&quot;value&quot;</span><span class="p">:</span><span class="s2">&quot;8696&quot;</span><span class="p">,</span><span class="s2">&quot;ns&quot;</span><span class="p">:</span><span class="s2">&quot;995289716&quot;</span><span class="p">},{</span><span class="s2">&quot;itemid&quot;</span><span class="p">:</span><span class="s2">&quot;25154&quot;</span><span class="p">,</span>
<span class="s2">&quot;clock&quot;</span><span class="p">:</span><span class="s2">&quot;1410744674&quot;</span><span class="p">,</span><span class="s2">&quot;value&quot;</span><span class="p">:</span><span class="s2">&quot;6144&quot;</span><span class="p">,</span><span class="s2">&quot;ns&quot;</span><span class="p">:</span><span class="s2">&quot;992462863&quot;</span><span class="p">},{</span><span class="s2">&quot;itemid&quot;</span><span class="p">:</span><span class="s2">&quot;25154&quot;</span><span class="p">,</span><span class="s2">&quot;clock&quot;</span><span class="p">:</span><span class="s2">&quot;1410744734&quot;</span><span class="p">,</span><span class="s2">&quot;value&quot;</span><span class="p">:</span><span class="s2">&quot;6472&quot;</span><span class="p">,</span>
<span class="s2">&quot;ns&quot;</span><span class="p">:</span><span class="s2">&quot;152634327&quot;</span><span class="p">},{</span><span class="s2">&quot;itemid&quot;</span><span class="p">:</span><span class="s2">&quot;25154&quot;</span><span class="p">,</span><span class="s2">&quot;clock&quot;</span><span class="p">:</span><span class="s2">&quot;1410744794&quot;</span><span class="p">,</span><span class="s2">&quot;value&quot;</span><span class="p">:</span><span class="s2">&quot;4312&quot;</span><span class="p">,</span><span class="s2">&quot;ns&quot;</span><span class="p">:</span><span class="s2">&quot;479599424&quot;</span><span class="p">},{</span><span class="s2">&quot;itemid&quot;</span><span class="p">:</span><span class="s2">&quot;25154&quot;</span><span class="p">,</span>
<span class="s2">&quot;clock&quot;</span><span class="p">:</span><span class="s2">&quot;1410744854&quot;</span><span class="p">,</span><span class="s2">&quot;value&quot;</span><span class="p">:</span><span class="s2">&quot;4456&quot;</span><span class="p">,</span><span class="s2">&quot;ns&quot;</span><span class="p">:</span><span class="s2">&quot;263314898&quot;</span><span class="p">},{</span><span class="s2">&quot;itemid&quot;</span><span class="p">:</span><span class="s2">&quot;25154&quot;</span><span class="p">,</span><span class="s2">&quot;clock&quot;</span><span class="p">:</span><span class="s2">&quot;1410744914&quot;</span><span class="p">,</span><span class="s2">&quot;value&quot;</span><span class="p">:</span><span class="s2">&quot;8656&quot;</span><span class="p">,</span>
<span class="s2">&quot;ns&quot;</span><span class="p">:</span><span class="s2">&quot;840460009&quot;</span><span class="p">}],</span><span class="s2">&quot;id&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">}</span>


<span class="mf">6.</span><span class="n">history</span><span class="o">.</span><span class="n">get</span><span class="err">方法获取单个监控项最后的值只需把上个脚本中或</span><span class="n">curl</span><span class="err">中的</span><span class="n">limit</span><span class="err">参数改为</span><span class="mi">1</span><span class="err">就可。</span>

<span class="err">此时监控项的数据已拿到了，接下来的把它传给前台展示就行了。</span>

<span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">iyunv</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">thread</span><span class="o">-</span><span class="mi">25496</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="mf">1.</span><span class="n">html</span>
</pre></div>


<h2 id="jmx">jmx监控</h2>
<div class="codehilite"><pre><span></span>工作原理：
zabbixserver想知道一台主机上的特定的JMX值时，它向ZabbixJavagateway询问，而ZabbixJavagateway使用“JMXmanagementAPI”
去查询特定的应用程序，而前提是应用程序这端在开启时需要“-Dcom.sun.management.jmxremote”参数来开启JMX查询就行了。
Zabbixserver有一个特殊的进程用来连接Javagateway叫StartJavaPollers；Javagateway通过配置文件中START_POLLERS参数设置
启动多个线程，在zabbix服务器这边如果一个连接所用时间超过Timeout，将会被中断，但是Javagateway将继续从JMXcounter取数据。所以
StartJavaPollers设置的值要小于等于START_POLLERS设置的值。
ZabbixJavagateway就相当于一个代理。
Zabbix监控之JMX协议

zabbix-server端安装
yum -y install zabbix-java-gateway 
也可以通过源码安装，请参考官方文档。

zabbix-java-gateway的配置文件是/etc/zabbix/zabbix_java_gateway.conf，配置文件很简单，如下：
# 监听地址
LISTEN_IP=”0.0.0.0″
# 监听端口
LISTEN_PORT=10052
# PID_FILE文件
PID_FILE=”/var/run/zabbix/zabbix_java.pid”
# 开启的工作线程数
START_POLLERS=5

启动zabbix-java-gateway:
service zabbix-java-gateway start
再修改zabbix-server的配置，编辑/etc/zabbix/zabbix_server.conf ，修改下面几个参数：
# JavaGateway的服务器IP地址
JavaGateway=192.168.89.204
# JavaGateway的服务端口
JavaGatewayPort=10052
# 从javaGateway采集数据的进程数
StartJavaPollers=5
配置文件修改后，重启zabbix-server：
service zabbix-server restart


被监控端 
开启JMX
使用JMX前需要先开启JMX，默认是关闭的，在启动JAVA程序时，加入下面的参数，就可以开启JMX：
enableJMX

Apache Tomcat 
如果是windows版本，编辑TOMCAT_HOME/bin/catalina.bat，在开头加入下面几行：
set CATALINA_OPTS=%CATALINA_OPTS% -Djava.rmi.server.hostname=JMX_HOST
set CATALINA_OPTS=%CATALINA_OPTS% -Djavax.management.builder.initial=
set CATALINA_OPTS=%CATALINA_OPTS% -Dcom.sun.management.jmxremote=true
set CATALINA_OPTS=%CATALINA_OPTS% -Dcom.sun.management.jmxremote.port=JMX_PORT 
set CATALINA_OPTS=%CATALINA_OPTS% -Dcom.sun.management.jmxremote.ssl=false
set CATALINA_OPTS=%CATALINA_OPTS% -Dcom.sun.management.jmxremote.authenticate=false

如果是linux版本，编辑TOMCAT_HOME/bin/catalina.sh，在开头加入下面几行：
CATALINA_OPTS=&quot;<span class="cp">${</span><span class="n">CATALINA_OPTS</span><span class="cp">}</span> -Djava.rmi.server.hostname=JMX_HOST”
CATALINA_OPTS=&quot;<span class="cp">${</span><span class="n">CATALINA_OPTS</span><span class="cp">}</span> -Djavax.management.builder.initial=“
CATALINA_OPTS=&quot;<span class="cp">${</span><span class="n">CATALINA_OPTS</span><span class="cp">}</span> -Dcom.sun.management.jmxremote=true” 
CATALINA_OPTS=&quot;<span class="cp">${</span><span class="n">CATALINA_OPTS</span><span class="cp">}</span> -Dcom.sun.management.jmxremote.port=JMX_PORT“
CATALINA_OPTS=“<span class="cp">${</span><span class="n">CATALINA_OPTS</span><span class="cp">}</span> -Dcom.sun.management.jmxremote.ssl=false”
CATALINA_OPTS=”<span class="cp">${</span><span class="n">CATALINA_OPTS</span><span class="cp">}</span> -Dcom.sun.management.jmxremote.authenticate=false“

注意JMX_HOST为tomcat的主机名或IP地址，由于zabbix-server访问，JMX_PORT为JMX端口，通常使用12345，然后重启tomcat，JMX就开启了。

下面的配置以监控tomcat为例
1.    在 tomcat 下载页面 Extras 类别中下载 JMX Remote jar 二进制包。放在 tomcat/lib 下面.
#wget  –S  http://mirror.bit.edu.cn/apache/tomcat/tomcat-6/v6.0.39/bin/extras/catalina-jmx-remote.jar
# mv catalina-jmx-remote.jar  /webapp/tomcat6/lib/
2. 修改 tomcat/bin 目录下 catalina.sh ，添加以下内容：
CATALINA_OPTS=&quot;-Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.authenticate=false 
-Dcom.sun.management.jmxremote.ssl=fa lse
-Djava.rmi.server.hostname=客户端ip地址&quot;
3.启动tomcat
# cd /usr/local/tomcat/bin/
# ./startup.sh
4.下载cmdline-jmxclient-0.10.3.jar文件测试是否恩能够取得数据
#wget http://repo.typesafe.com/typesafe/repo/cmdline-jmxclient/cmdline-jmxclient/0.10.3/cmdline-jmxclient-0.10.3.jar
5.测试 有数据则表示成功
# java -jar cmdline-jmxclient-0.10.3.jar - localhost:12345 java.lang:type=Memory NonHeapMemoryUsage
01/26/2014 11:55:55 +0800 org.archive.jmx.Client NonHeapMemoryUsage:
committed: 52690944
init: 24313856
max: 136314880
used: 52454776
</pre></div>


<h2 id="discover-rule">discover rule</h2>
<div class="codehilite"><pre><span></span><span class="err">首先是写脚本，输出当前机器监听的</span><span class="n">tcp</span><span class="err">端口</span>

<span class="n">portscan</span><span class="o">.</span><span class="n">py</span>

<span class="n">zabbix</span><span class="err">用户启动的，默认不能执行</span><span class="n">netstat</span> <span class="o">-</span><span class="n">p</span>   <span class="n">chmod</span> <span class="o">+</span><span class="n">s</span> <span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">netstat</span><span class="err">或者不用或者</span><span class="n">sudo</span>

<span class="c1">#!/usr/bin/env python</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">tcp_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">port_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">command</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;netstat -ntl | awk &#39;{print $4}&#39; | grep 0.0.0.0 | awk -F&quot;:&quot; &#39;{print $2}&#39; &#39;&#39;&#39;</span>
<span class="n">line</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">popen</span><span class="p">(</span><span class="n">command</span><span class="p">)</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>

<span class="k">for</span> <span class="n">port</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
    <span class="n">port_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">port</span> <span class="o">=</span> <span class="n">port</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">port</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">20000</span><span class="p">:</span>
        <span class="k">continue</span>
    <span class="n">port_dict</span><span class="p">[</span><span class="s1">&#39;{#TCP_PORT}&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">port</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="n">tcp_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">port_dict</span><span class="p">)</span>

<span class="n">data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tcp_list</span>
<span class="n">jsonStr</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="k">print</span> <span class="n">jsonStr</span>
<span class="err">这个脚本运行的结果如下：</span>

<span class="p">{</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;{#TCP_PORT}&quot;</span><span class="p">:</span> <span class="s2">&quot;843&quot;</span>
        <span class="p">},</span> 
        <span class="p">{</span>
            <span class="s2">&quot;{#TCP_PORT}&quot;</span><span class="p">:</span> <span class="s2">&quot;3035&quot;</span>
        <span class="p">},</span> 
        <span class="p">{</span>
            <span class="s2">&quot;{#TCP_PORT}&quot;</span><span class="p">:</span> <span class="s2">&quot;10050&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
<span class="err">修改</span><span class="n">win</span><span class="err">下</span><span class="n">zabbix_agent</span><span class="err">的配置文件</span><span class="n">zabbix_agentd</span><span class="o">.</span><span class="n">conf</span>

<span class="n">UnsafeUserParameters</span><span class="o">=</span><span class="mi">1</span>
<span class="n">UserParameter</span><span class="o">=</span><span class="n">tcpportlisten</span><span class="p">,</span><span class="n">python</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">zabbix</span><span class="o">/</span><span class="n">portscan</span><span class="o">.</span><span class="n">py</span>
<span class="err">修改完成后重启</span><span class="n">zabbix_agent</span><span class="err">服务。</span>
<span class="err">这个时候在</span><span class="n">zabbix_server</span><span class="err">端就可以用</span><span class="n">zabbix_get</span><span class="err">来测试是否正常。</span>
<span class="n">zabbix_get</span> <span class="o">-</span><span class="n">s</span> <span class="n">ip</span> <span class="o">-</span><span class="n">k</span> <span class="n">tcpportlisten</span>
<span class="err">返回的结果和在</span><span class="n">agent</span><span class="err">上运行脚本返回的结果一致就表示正常。</span>

<span class="err">在页面添加</span><span class="n">discover</span>

<span class="err">在模版或者主机的页面上点击</span><span class="n">Discovery</span><span class="p">(</span><span class="err">探索</span><span class="p">)</span><span class="err">，然后在右上角点击</span><span class="n">Create</span> <span class="n">discovery</span> <span class="n">rule</span><span class="p">(</span><span class="err">创建探索规则</span><span class="p">)</span>
<span class="n">zabbix</span><span class="err">利用</span><span class="n">discovery</span><span class="err">批量添加端口监控</span> <span class="o">-</span> <span class="err">第</span><span class="mi">1</span><span class="err">张</span>  <span class="o">|</span> <span class="err">ㄨ销声匿迹、</span><span class="n">Linux</span>
<span class="err">然后在这个新建的</span><span class="n">tcp</span> <span class="n">port</span> <span class="n">discover</span><span class="err">里面建立一个</span><span class="n">Item</span>
<span class="n">zabbix</span><span class="err">利用</span><span class="n">discovery</span><span class="err">批量添加端口监控</span> <span class="o">-</span> <span class="err">第</span><span class="mi">2</span><span class="err">张</span>  <span class="o">|</span> <span class="err">ㄨ销声匿迹、</span><span class="n">Linux</span>

<span class="err">最后创建报警的</span><span class="n">trigger</span>
<span class="n">zabbix</span><span class="err">利用</span><span class="n">discovery</span><span class="err">批量添加端口监控</span> <span class="o">-</span> <span class="err">第</span><span class="mi">3</span><span class="err">张</span>  <span class="o">|</span> <span class="err">ㄨ销声匿迹、</span><span class="n">Linux</span>

<span class="err">注意这个地方的表达式</span>

<span class="p">{</span><span class="n">Template</span> <span class="n">OS</span> <span class="n">Linux</span><span class="p">:</span><span class="n">net</span><span class="o">.</span><span class="n">tcp</span><span class="o">.</span><span class="n">listen</span><span class="p">[{</span><span class="c1">#TCP_PORT}].count(#3,0,eq)}&gt;1</span>
<span class="err">如果你是在单个机器上添加的，这里</span><span class="n">Template</span> <span class="n">OS</span> <span class="n">Linux</span><span class="err">就应该是某个机器的具体名称，如果是模版，这里就是模版的名称</span>

<span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="c1">#3,0,eq)}&gt;1</span>
<span class="err">表示最后三次的值等于</span><span class="mi">0</span><span class="err">，触发次数大于一次则报警</span>
</pre></div>


<h2 id="io">io</h2>
<div class="codehilite"><pre><span></span><span class="n">disk_scan</span><span class="o">.</span><span class="n">py</span>
<span class="c1">#!/usr/bin/env python</span>
<span class="kn">from</span> <span class="nn">json</span> <span class="kn">import</span> <span class="n">dumps</span>
<span class="kn">from</span> <span class="nn">commands</span> <span class="kn">import</span> <span class="n">getoutput</span>
<span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">disklist</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">disks</span> <span class="o">=</span> <span class="n">getoutput</span><span class="p">(</span><span class="s1">&#39;&#39;&#39; egrep &quot;</span><span class="se">\\</span><span class="s1">bsd[a-z]</span><span class="se">\\</span><span class="s1">b|</span><span class="se">\\</span><span class="s1">bxvd[a-z]</span><span class="se">\\</span><span class="s1">b|</span><span class="se">\\</span><span class="s1">bvd[a-z]</span><span class="se">\\</span><span class="s1">b&quot; /proc/diskstats | awk &#39;{print $3}&#39; &#39;&#39;&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">disk</span> <span class="ow">in</span> <span class="n">disks</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">disk</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span>
        <span class="n">disklist</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s1">&#39;{#DISK_NAME}&#39;</span><span class="p">:</span><span class="n">disk</span><span class="p">})</span>
<span class="n">result</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">disklist</span>
<span class="k">print</span> <span class="n">dumps</span><span class="p">(</span><span class="n">result</span><span class="p">,</span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span><span class="n">sort_keys</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>


<span class="n">vi</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">zabbix</span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">zabbix_agentd</span><span class="o">.</span><span class="n">conf</span>

<span class="n">UserParameter</span><span class="o">=</span><span class="n">disk</span><span class="o">.</span><span class="n">discovery</span><span class="p">,</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">python</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">zabbix</span><span class="o">/</span><span class="n">disk_scan</span><span class="o">.</span><span class="n">py</span>
<span class="n">UserParameter</span><span class="o">=</span><span class="n">custom</span><span class="o">.</span><span class="n">vfs</span><span class="o">.</span><span class="n">dev</span><span class="o">.</span><span class="n">read</span><span class="o">.</span><span class="n">ops</span><span class="p">[</span><span class="o">*</span><span class="p">],</span><span class="n">cat</span> <span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="n">diskstats</span> <span class="o">|</span> <span class="n">grep</span> <span class="err">$</span><span class="mi">1</span> <span class="o">|</span> <span class="n">head</span> <span class="o">-</span><span class="mi">1</span> <span class="o">|</span> <span class="n">awk</span> <span class="s1">&#39;{print $$4}&#39;</span> <span class="o">//</span><span class="err">磁盘读的次数</span>
<span class="n">UserParameter</span><span class="o">=</span><span class="n">custom</span><span class="o">.</span><span class="n">vfs</span><span class="o">.</span><span class="n">dev</span><span class="o">.</span><span class="n">read</span><span class="o">.</span><span class="n">ms</span><span class="p">[</span><span class="o">*</span><span class="p">],</span><span class="n">cat</span> <span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="n">diskstats</span> <span class="o">|</span> <span class="n">grep</span> <span class="err">$</span><span class="mi">1</span> <span class="o">|</span> <span class="n">head</span> <span class="o">-</span><span class="mi">1</span> <span class="o">|</span> <span class="n">awk</span> <span class="s1">&#39;{print $$7}&#39;</span>   <span class="o">//</span><span class="err">磁盘读的毫秒数</span>
<span class="n">UserParameter</span><span class="o">=</span><span class="n">custom</span><span class="o">.</span><span class="n">vfs</span><span class="o">.</span><span class="n">dev</span><span class="o">.</span><span class="n">write</span><span class="o">.</span><span class="n">ops</span><span class="p">[</span><span class="o">*</span><span class="p">],</span><span class="n">cat</span> <span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="n">diskstats</span> <span class="o">|</span> <span class="n">grep</span> <span class="err">$</span><span class="mi">1</span> <span class="o">|</span> <span class="n">head</span> <span class="o">-</span><span class="mi">1</span> <span class="o">|</span> <span class="n">awk</span> <span class="s1">&#39;{print $$8}&#39;</span>    <span class="o">//</span><span class="err">磁盘写的次数</span>
<span class="n">UserParameter</span><span class="o">=</span><span class="n">custom</span><span class="o">.</span><span class="n">vfs</span><span class="o">.</span><span class="n">dev</span><span class="o">.</span><span class="n">write</span><span class="o">.</span><span class="n">ms</span><span class="p">[</span><span class="o">*</span><span class="p">],</span><span class="n">cat</span> <span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="n">diskstats</span> <span class="o">|</span> <span class="n">grep</span> <span class="err">$</span><span class="mi">1</span> <span class="o">|</span> <span class="n">head</span> <span class="o">-</span><span class="mi">1</span> <span class="o">|</span> <span class="n">awk</span> <span class="s1">&#39;{print $$11}&#39;</span>   <span class="o">//</span><span class="err">磁盘写的毫秒数</span>
<span class="n">UserParameter</span><span class="o">=</span><span class="n">custom</span><span class="o">.</span><span class="n">vfs</span><span class="o">.</span><span class="n">dev</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">active</span><span class="p">[</span><span class="o">*</span><span class="p">],</span><span class="n">cat</span> <span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="n">diskstats</span> <span class="o">|</span> <span class="n">grep</span> <span class="err">$</span><span class="mi">1</span> <span class="o">|</span> <span class="n">head</span> <span class="o">-</span><span class="mi">1</span> <span class="o">|</span> <span class="n">awk</span> <span class="s1">&#39;{print $$12}&#39;</span>  
<span class="n">UserParameter</span><span class="o">=</span><span class="n">custom</span><span class="o">.</span><span class="n">vfs</span><span class="o">.</span><span class="n">dev</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">ms</span><span class="p">[</span><span class="o">*</span><span class="p">],</span><span class="n">cat</span> <span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="n">diskstats</span> <span class="o">|</span> <span class="n">grep</span> <span class="err">$</span><span class="mi">1</span> <span class="o">|</span> <span class="n">head</span> <span class="o">-</span><span class="mi">1</span> <span class="o">|</span> <span class="n">awk</span> <span class="s1">&#39;{print $$13}&#39;</span>   
<span class="o">//</span><span class="err">花费在</span><span class="n">IO</span><span class="err">操作上的毫秒数</span>
<span class="n">UserParameter</span><span class="o">=</span><span class="n">custom</span><span class="o">.</span><span class="n">vfs</span><span class="o">.</span><span class="n">dev</span><span class="o">.</span><span class="n">read</span><span class="o">.</span><span class="n">sectors</span><span class="p">[</span><span class="o">*</span><span class="p">],</span><span class="n">cat</span> <span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="n">diskstats</span> <span class="o">|</span> <span class="n">grep</span> <span class="err">$</span><span class="mi">1</span> <span class="o">|</span> <span class="n">head</span> <span class="o">-</span><span class="mi">1</span> <span class="o">|</span> <span class="n">awk</span> <span class="s1">&#39;{print $$6}&#39;</span>   
   <span class="o">//</span><span class="err">读扇区的次数（一个扇区的等于</span><span class="mi">512</span><span class="n">B</span><span class="err">）</span>
<span class="n">UserParameter</span><span class="o">=</span><span class="n">custom</span><span class="o">.</span><span class="n">vfs</span><span class="o">.</span><span class="n">dev</span><span class="o">.</span><span class="n">write</span><span class="o">.</span><span class="n">sectors</span><span class="p">[</span><span class="o">*</span><span class="p">],</span><span class="n">cat</span> <span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="n">diskstats</span> <span class="o">|</span> <span class="n">grep</span> <span class="err">$</span><span class="mi">1</span> <span class="o">|</span> <span class="n">head</span> <span class="o">-</span><span class="mi">1</span> <span class="o">|</span> <span class="n">awk</span> <span class="s1">&#39;{print $$10}&#39;</span>  
   <span class="o">//</span><span class="err">写扇区的次数（一个扇区的等于</span><span class="mi">512</span><span class="n">B</span><span class="err">）</span>
<span class="n">UserParameter</span><span class="o">=</span><span class="n">custom</span><span class="o">.</span><span class="n">vfs</span><span class="o">.</span><span class="n">dev</span><span class="o">.</span><span class="n">iowait</span><span class="p">[</span><span class="o">*</span><span class="p">],</span><span class="n">iostat</span> <span class="o">-</span><span class="n">x</span> <span class="mi">1</span> <span class="mi">2</span> <span class="o">|</span> <span class="n">grep</span> <span class="err">$</span><span class="mi">1</span> <span class="o">|</span> <span class="n">tail</span> <span class="o">-</span><span class="n">n</span> <span class="mi">1</span> <span class="o">|</span> <span class="n">awk</span> <span class="s1">&#39;{print $$10}&#39;</span>
</pre></div>


<h2 id="tcp">tcp状态</h2>
<p>/etc/zabbix/zabbix_agentd.d/tcp_net.conf</p>
<p>UserParameter=TIME_WAIT,netstat -an | awk '/^tcp/ {++S[$NF]} END {for(a in S) print a, S[a]}' | grep TIME_WAIT |awk '{print $2}'</p>
<p>UserParameter=CLOSE_WAIT,netstat -an | awk '/^tcp/ {++S[$NF]} END {for(a in S) print a, S[a]}' | grep CLOSE_WAIT |awk '{print $2}'</p>
<p>UserParameter=FIN_WAIT1,netstat -an | awk '/^tcp/ {++S[$NF]} END {for(a in S) print a, S[a]}' | grep FIN_WAIT1 |awk '{print $2}'</p>
<p>UserParameter=ESTABLISHED,netstat -an | awk '/^tcp/ {++S[$NF]} END {for(a in S) print a, S[a]}' | grep ESTABLISHED |awk '{print $2}'</p>
<p>UserParameter=SYN_RECV,netstat -an | awk '/^tcp/ {++S[$NF]} END {for(a in S) print a, S[a]}' | grep SYN_RECV |awk '{print $2}'</p>
<p>UserParameter=LAST_ACK,netstat -an | awk '/^tcp/ {++S[$NF]} END {for(a in S) print a, S[a]}' | grep LAST_ACK |awk '{print $2}'</p>
<p>UserParameter=LISTEN,netstat -an | awk '/^tcp/ {++S[$NF]} END {for(a in S) print a, S[a]}' | grep LISTEN |awk '{print $2}'</p>
<h2 id="zabbix_proxy">zabbix_proxy</h2>
<div class="codehilite"><pre><span></span><span class="n">yum</span> <span class="n">install</span> <span class="n">zabbix</span><span class="o">-</span><span class="n">proxy</span> <span class="n">zabbix</span><span class="o">-</span><span class="n">proxy</span><span class="o">-</span><span class="n">mysql</span> <span class="n">mysql</span><span class="o">-</span><span class="n">server</span> <span class="o">-</span><span class="n">y</span>
<span class="n">mysql</span>
<span class="k">create</span> <span class="k">database</span> <span class="n">zabbix_proxy</span><span class="p">;</span>
<span class="k">grant</span> <span class="k">all</span> <span class="k">on</span> <span class="n">zabbix_proxy</span><span class="p">.</span><span class="o">*</span> <span class="k">to</span> <span class="s1">&#39;zabbix&#39;</span><span class="o">@</span><span class="s1">&#39;127.0.0.1&#39;</span> <span class="n">identified</span> <span class="k">by</span> <span class="s1">&#39;zbpass&#39;</span><span class="p">;</span>
<span class="k">delete</span> <span class="k">from</span> <span class="n">mysql</span><span class="p">.</span><span class="k">user</span> <span class="k">where</span> <span class="k">user</span><span class="o">=</span><span class="ss">&quot;&quot;</span><span class="p">;</span>
<span class="n">flush</span> <span class="k">privileges</span><span class="p">;</span>
<span class="err">导入表</span>
<span class="n">mysql</span> <span class="n">zabbix_proxy</span> <span class="o">&lt;</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="k">share</span><span class="o">/</span><span class="n">doc</span><span class="o">/</span><span class="n">zabbix</span><span class="o">-</span><span class="n">proxy</span><span class="o">-</span><span class="n">mysql</span><span class="o">-</span><span class="mi">2</span><span class="p">.</span><span class="mi">4</span><span class="p">.</span><span class="mi">8</span><span class="o">/</span><span class="k">create</span><span class="o">/</span><span class="k">schema</span><span class="p">.</span><span class="k">sql</span>
<span class="n">cat</span>  <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">zabbix</span><span class="o">/</span><span class="n">zabbix_proxy</span><span class="p">.</span><span class="n">conf</span>  <span class="err">修改</span>
<span class="n">Server</span><span class="o">=</span><span class="mi">172</span><span class="p">.</span><span class="mi">16</span><span class="p">.</span><span class="mi">10</span><span class="p">.</span><span class="mi">126</span>             <span class="o">#</span><span class="err">指向</span><span class="n">Zabbix</span> <span class="n">Server</span>
<span class="n">Hostname</span><span class="o">=</span><span class="err">本机</span><span class="n">ip</span>
<span class="n">DBHost</span><span class="o">=</span><span class="n">localhost</span>                 <span class="o">#</span><span class="err">指定数据库</span>
<span class="n">DBName</span><span class="o">=</span><span class="n">zabbix_proxy</span>              <span class="o">#</span><span class="err">数据库名</span>
<span class="n">DBUser</span><span class="o">=</span><span class="n">zbuser</span>                    <span class="o">#</span><span class="err">数据库用户</span>
<span class="n">DBPassword</span><span class="o">=</span><span class="n">zbpass</span>                <span class="o">#</span><span class="err">数据库密码</span>






<span class="n">agent</span><span class="err">的</span><span class="n">server</span><span class="err">改为</span><span class="n">proxy</span><span class="err">的</span><span class="n">ip</span>
<span class="err">注意所有</span><span class="k">key</span><span class="err">必须为主动模式</span>
<span class="n">agent</span><span class="err">报</span><span class="k">not</span> <span class="k">found</span><span class="err">可以重启</span><span class="n">proxy</span><span class="err">和</span><span class="n">agent</span><span class="err">试试</span>
</pre></div>


<h2 id="ztree">ztree插件</h2>
<div class="codehilite"><pre><span></span><span class="nv">https</span>:<span class="o">//</span><span class="nv">github</span>.<span class="nv">com</span><span class="o">/</span><span class="nv">spide4k</span><span class="o">/</span><span class="nv">zatree</span>


<span class="mi">1</span>：下载文件

<span class="nv">git</span> <span class="nv">clone</span> <span class="nv">https</span>:<span class="o">//</span><span class="nv">github</span>.<span class="nv">com</span><span class="o">/</span><span class="nv">spide4k</span><span class="o">/</span><span class="nv">zatree</span>.<span class="nv">git</span> <span class="nv">zatree</span>

<span class="mi">2</span>：为了减少编辑文件带来的误操作，以后<span class="nv">zatree</span>只提供和<span class="nv">zabbix</span>整合好的包

<span class="nv">php</span>需要支持<span class="nv">php</span><span class="o">-</span><span class="nv">xml</span>、<span class="nv">php</span><span class="o">-</span><span class="nv">gd</span>、<span class="nv">php</span><span class="o">-</span><span class="nv">mysql</span>

先备份当前<span class="nv">zabbix</span> <span class="nv">web</span>目录并挪走，然后解压<span class="nv">zatree</span><span class="o">-</span><span class="nv">zabbix</span><span class="o">-</span><span class="mi">2</span>.<span class="mi">4</span>.<span class="mi">5</span>.<span class="nv">tar</span>.<span class="nv">gz</span>，然后修改以下两个文件

<span class="mi">3</span>：<span class="nv">zabbix</span>数据库 拷贝源目录的<span class="nv">conf</span><span class="o">/</span><span class="nv">zabbix</span>.<span class="nv">conf</span>.<span class="nv">php</span>到新目录覆盖

如果原来有添加字体也顺手拷贝过来

<span class="mi">4</span>：支持<span class="nv">web</span> <span class="nv">interface</span>,修改配置文件 <span class="nv">zatree</span><span class="o">/</span><span class="nv">zabbix_config</span>.<span class="nv">php</span>

<span class="s1">&#39;</span><span class="s">user</span><span class="s1">&#39;</span><span class="o">=&gt;</span><span class="s1">&#39;</span><span class="s">xxx</span><span class="s1">&#39;</span>, <span class="o">//</span><span class="nv">web</span>登陆的用户名    <span class="nv">zabbix</span>账号

<span class="s1">&#39;</span><span class="s">password</span><span class="s1">&#39;</span><span class="o">=&gt;</span><span class="s1">&#39;</span><span class="s">xxx</span><span class="s1">&#39;</span>, <span class="o">//</span><span class="nv">web</span>登陆的密码

<span class="s1">&#39;</span><span class="s">http_user</span><span class="s1">&#39;</span><span class="o">=&gt;</span><span class="s1">&#39;</span><span class="s">xxx</span><span class="s1">&#39;</span>, <span class="o">//</span><span class="nv">httpsweb</span>登陆的用户名

<span class="s1">&#39;</span><span class="s">http_password</span><span class="s1">&#39;</span><span class="o">=&gt;</span><span class="s1">&#39;</span><span class="s">xxx</span><span class="s1">&#39;</span>, <span class="o">//</span><span class="nv">httpsweb</span>登陆的密码

删除运维帮 广告
编辑 <span class="nv">zabbix</span><span class="o">/</span><span class="nv">zatree</span><span class="o">/</span><span class="nv">graph</span>.<span class="nv">php</span>文件 删除 <span class="mi">411</span><span class="o">-</span><span class="mi">416</span> 行
 <span class="o">&lt;</span><span class="nv">div</span> <span class="nv">align</span><span class="o">=</span><span class="s2">&quot;</span><span class="s">center</span><span class="s2">&quot;</span> <span class="nv">style</span><span class="o">=</span><span class="s1">&#39;</span><span class="s">font-size:12px;</span><span class="s1">&#39;</span><span class="o">&gt;</span>
             <span class="o">&lt;</span><span class="nv">font</span> <span class="nv">size</span><span class="o">=</span><span class="s2">&quot;</span><span class="s">5px</span><span class="s2">&quot;</span> <span class="nv">color</span><span class="o">=</span><span class="s2">&quot;</span><span class="s">red</span><span class="s2">&quot;</span><span class="o">&gt;</span>运维帮,一个技术分享订阅号,扫描我,给我们力量<span class="o">&lt;/</span><span class="nv">font</span><span class="o">&gt;&lt;</span><span class="nv">br</span><span class="o">&gt;</span>
                 <span class="o">&lt;</span><span class="nv">font</span> <span class="nv">size</span><span class="o">=</span><span class="s2">&quot;</span><span class="s">2px</span><span class="s2">&quot;</span> <span class="nv">color</span><span class="o">=</span><span class="s2">&quot;</span><span class="s">red</span><span class="s2">&quot;</span><span class="o">&gt;</span>编辑 <span class="nv">zatree</span><span class="o">/</span><span class="nv">graph</span>.<span class="nv">php</span> 文件删除我<span class="o">&lt;/</span><span class="nv">font</span><span class="o">&gt;&lt;</span><span class="nv">br</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nv">img</span> <span class="nv">src</span><span class="o">=</span><span class="s2">&quot;</span><span class="s">static/yunweibang-weixin.jpg</span><span class="s2">&quot;</span> <span class="o">/&gt;&lt;</span><span class="nv">br</span><span class="o">&gt;</span>
           <span class="o">&lt;</span><span class="nv">a</span> <span class="nv">href</span><span class="o">=</span><span class="s2">&quot;</span><span class="s">https://github.com/spide4k/zatree</span><span class="s2">&quot;</span> <span class="nv">target</span><span class="o">=</span><span class="s2">&quot;</span><span class="s">_blank</span><span class="s2">&quot;</span><span class="o">&gt;</span><span class="nv">Zatree</span><span class="o">&lt;/</span><span class="nv">a</span><span class="o">&gt;</span> <span class="nv">version</span> <span class="mi">2</span>.<span class="mi">4</span> <span class="k">for</span> <span class="nv">Zabbix</span> <span class="mi">2</span>.<span class="mi">4</span>.<span class="nv">x</span>, 
           技术支持<span class="nv">QQ</span>群: <span class="mi">271659981</span>, 微信订阅号:<span class="nv">yunweibang</span>
        <span class="o">&lt;/</span><span class="nv">div</span><span class="o">&gt;</span>
</pre></div>


<h2 id="_1">自动注册</h2>
<div class="codehilite"><pre><span></span>上一篇内容《<span class="nv">zabbix</span>自动发现配置》，大概内容是<span class="nv">zabbix</span> <span class="nv">server</span>去扫描一个网段，把在线的主机添加到<span class="nv">Host</span>列表中。
我们本篇内容与上篇相反，这次是<span class="nv">Active</span> <span class="nv">agent</span>主动联系<span class="nv">zabbix</span> <span class="nv">server</span>，最后由<span class="nv">zabbix</span> <span class="nv">server</span>将这些<span class="nv">agent</span>加到<span class="nv">host</span>里。
对于需要部署特别多服务器的人来说，这功能相当给力。所有服务器批量装好<span class="nv">zabbix</span> <span class="nv">agent</span>，<span class="nv">server</span>配置好<span class="nv">trigger</span>，
所有的服务器都配置好了，非常快速。
<span class="mi">2</span>. 配置
<span class="mi">2</span>.<span class="mi">1</span>配置文件修改
指定<span class="nv">server</span> <span class="nv">ip</span>

<span class="mi">1</span>
<span class="mi">2</span>
# <span class="nv">cat</span> <span class="o">/</span><span class="nv">usr</span><span class="o">/</span><span class="nv">local</span><span class="o">/</span><span class="nv">zabbix</span><span class="o">-</span><span class="mi">2</span>.<span class="mi">2</span>.<span class="mi">2</span><span class="o">/</span><span class="nv">etc</span><span class="o">/</span><span class="nv">zabbix_agentd</span>.<span class="nv">conf</span> <span class="o">|</span> <span class="nv">grep</span> <span class="o">-</span><span class="nv">E</span> <span class="o">^</span><span class="nv">ServerActive</span>
 <span class="nv">ServerActive</span><span class="o">=</span><span class="mi">66</span>.<span class="mi">175</span>.<span class="mi">222</span>.<span class="mi">232</span>
修改<span class="nv">Hostname</span>

<span class="mi">1</span>
<span class="mi">2</span>
# <span class="nv">cat</span> <span class="o">/</span><span class="nv">usr</span><span class="o">/</span><span class="nv">local</span><span class="o">/</span><span class="nv">zabbix</span><span class="o">-</span><span class="mi">2</span>.<span class="mi">2</span>.<span class="mi">1</span><span class="o">/</span><span class="nv">etc</span><span class="o">/</span><span class="nv">zabbix_agentd</span>.<span class="nv">conf</span> <span class="o">|</span> <span class="nv">grep</span> <span class="o">-</span><span class="nv">E</span> <span class="o">^</span><span class="nv">Hostname</span>                           
<span class="nv">Hostname</span><span class="o">=</span><span class="nv">auto</span><span class="o">-</span><span class="nv">reg</span><span class="o">-</span><span class="k">for</span><span class="o">-</span><span class="nv">ttlsa</span><span class="o">-</span><span class="mi">01</span>
关于主机名：如果<span class="nv">zabbix_agentd</span>.<span class="nv">conf</span>配置有定义<span class="nv">Hostname</span>，那么<span class="nv">zabbix</span>会使用这个<span class="nv">Hostname</span>命名，否则<span class="nv">agent</span>的主机名（<span class="nv">hostname</span>得来的）
修改<span class="nv">metadataitem</span>

<span class="mi">1</span>
<span class="mi">2</span>
<span class="nv">cat</span> <span class="o">/</span><span class="nv">usr</span><span class="o">/</span><span class="nv">local</span><span class="o">/</span><span class="nv">zabbix</span><span class="o">-</span><span class="mi">2</span>.<span class="mi">2</span>.<span class="mi">1</span><span class="o">/</span><span class="nv">etc</span><span class="o">/</span><span class="nv">zabbix_agentd</span>.<span class="nv">conf</span> <span class="o">|</span> <span class="nv">grep</span> <span class="nv">HostMetadataItem</span><span class="o">=</span>
 <span class="nv">HostMetadataItem</span><span class="o">=</span><span class="nv">system</span>.<span class="nv">uname</span>

<span class="mi">2</span>.<span class="mi">2</span> 配置<span class="nv">action</span>
步骤：<span class="nv">configuration</span><span class="o">&gt;&gt;</span><span class="nv">action</span><span class="o">&gt;&gt;</span><span class="nv">Event</span> <span class="nv">source</span>（选择<span class="nv">Auto</span> <span class="nv">registration</span>）<span class="o">&gt;&gt;</span><span class="nv">Create</span> <span class="nv">Action</span>，我们按如下步骤来定义个<span class="nv">action</span>
<span class="mi">2</span>.<span class="mi">2</span>.<span class="mi">1</span> <span class="nv">action</span>选项卡
<span class="nv">hostmetadata</span>

定义<span class="nv">Action</span>名称，以及发送消息的主题和内容，使用默认的就行了
<span class="mi">2</span>.<span class="mi">2</span>.<span class="mi">2</span> <span class="nv">Conditions</span>选项卡
<span class="nv">hostmetadata</span>

<span class="nv">Host</span> <span class="nv">metadata</span>包含<span class="nv">Linux</span>字符的主机将会触发 <span class="mi">2</span>.<span class="mi">2</span>.<span class="mi">3</span>的操作，什么是<span class="nv">metadata</span>，文章的下半段会专门讲解。
<span class="mi">2</span>.<span class="mi">2</span>.<span class="mi">3</span> <span class="nv">operations</span>选项卡
<span class="nv">hostmetadata</span>

满足条件的<span class="nv">active</span> <span class="nv">host</span>发起请求，<span class="nv">server</span>会完成三个动作：
把<span class="nv">agent</span>加到<span class="nv">host</span>列表
把<span class="nv">agent</span>加入<span class="nv">linux</span> <span class="nv">servers</span>组
<span class="nv">agent</span>主机<span class="nv">link</span>模板<span class="nv">Template</span> <span class="nv">OS</span> <span class="nv">linux</span>
<span class="mi">3</span>. 查看结果
查看<span class="o">/</span><span class="nv">tmp</span><span class="o">/</span><span class="nv">zabbix_server</span>.<span class="nv">log</span>我们能看到如下内容：

<span class="mi">1</span>
 <span class="mi">16585</span>:<span class="mi">20150203</span>:<span class="mi">161110</span>.<span class="mi">910</span> <span class="nv">enabling</span> <span class="nv">Zabbix</span> <span class="nv">agent</span> <span class="nv">checks</span> <span class="nv">on</span> <span class="nv">host</span> <span class="s2">&quot;</span><span class="s">auto-reg-for-ttlsa-01</span><span class="s2">&quot;</span>: <span class="nv">host</span> <span class="nv">became</span> <span class="nv">available</span>
看到如上内容，表明<span class="nv">host</span>增加成功，此时此刻的<span class="nv">host</span>列表如下：
<span class="nv">hostmetadata</span>

<span class="mi">4</span>. <span class="nv">HostMetadataItem</span>与<span class="nv">HostMetadata</span>
作用：用于标示主机，通过该符号能够把主机区别开来。比如我们经常用它来区分<span class="nv">linux</span>与<span class="nv">windows</span>系统，这样才能分别给他们设置组与<span class="nv">template</span>等等
<span class="mi">4</span>.<span class="mi">1</span> <span class="nv">HostMetadataItem</span>用法

<span class="mi">1</span>
<span class="nv">HostMetadataItem</span><span class="o">=</span><span class="nv">system</span>.<span class="nv">uname</span>
它的值来之<span class="nv">key</span>
<span class="mi">4</span>.<span class="mi">2</span> <span class="nv">HostMetadata</span>用法

<span class="mi">1</span>
<span class="nv">HostMetadata</span>: <span class="nv">Linux</span> <span class="nv">hehehehehehehehe</span> <span class="nv">xxxxx</span>
他的值是直接定义的
通过使用各式各样的<span class="nv">metadata</span>我们可以用于区分各个主机，来达到我们各种需求。
</pre></div>


<h2 id="key">自定义key</h2>
<div class="codehilite"><pre><span></span>自定义
<span class="nv">UserParameter</span><span class="o">=</span><span class="nv">mysql</span>.<span class="nv">ping</span>,<span class="nv">mysqladmin</span> <span class="o">-</span><span class="nv">uroot</span> <span class="nv">ping</span><span class="o">|</span><span class="nv">grep</span> <span class="o">-</span><span class="nv">c</span> <span class="nv">alive</span>
如果返回<span class="mi">1</span>表示<span class="nv">MySQL</span>运行中，如果返回<span class="mi">0</span>表示<span class="nv">MySQL</span>挂了
<span class="nv">UserParameter</span><span class="o">=</span><span class="nv">key</span>[<span class="o">*</span>],<span class="nv">command</span>

<span class="nv">Key</span>    唯一. [<span class="o">*</span>]表示里面可以传递多个参数
<span class="nv">Command</span>    需要执行的脚本，<span class="nv">key</span>的[]里面的参数一一对应<span class="mh">$1</span>到<span class="mh">$9</span>，一共<span class="mi">9</span>个参数。<span class="mh">$0</span>表示脚本命令.
注意事项
<span class="mi">1</span>. 如果需要使用命令行里面出现<span class="mh">$2</span>这种变量，那么你要使用两个$<span class="mh">$2</span>，例如<span class="nv">awk</span> ’{ <span class="nv">print</span> $<span class="mh">$2</span> }’，之前就遇到过这个问题，
不停的测试自己脚本输出正常，但是<span class="nv">zabbix</span>却拿不到数据，原来是出在这里。为了防止和参数冲突，所以<span class="nv">zabbix</span>做了这个规定。
<span class="mi">2</span>. <span class="nv">zabbix</span>禁止使用一些不安全的参数，如下：
\ <span class="s1">&#39;</span><span class="s"> ” ` * ? [ ] { } ~ $ ! &amp; ; ( ) &lt; &gt; | # @</span>
<span class="mi">3</span>. 从<span class="nv">zabbix</span> <span class="mi">2</span>.<span class="mi">0</span>开始，<span class="nv">zabbix</span>返回文本数据可以是空格。

<span class="nv">UserParameter</span><span class="o">=</span><span class="nv">mysql</span>.<span class="nv">ping</span>[<span class="o">*</span>],<span class="nv">mysqladmin</span> <span class="o">-</span><span class="nv">u</span><span class="mh">$1</span> <span class="o">-</span><span class="nv">p</span><span class="mh">$2</span> <span class="nv">ping</span> <span class="o">|</span> <span class="nv">grep</span> <span class="o">-</span><span class="nv">c</span> <span class="nv">alive</span>
如下参数用于监控<span class="nv">MYSQL</span>，并且可以传递用户名和密码。
<span class="nv">mysql</span>.<span class="nv">ping</span>[<span class="nv">zabbix</span>,<span class="nv">our_password</span>]
统计一个文件中有多少行被匹配?
<span class="nv">UserParameter</span><span class="o">=</span><span class="nv">wc</span>[<span class="o">*</span>],<span class="nv">grep</span> <span class="o">-</span><span class="nv">c</span> <span class="s2">&quot;</span><span class="s">$2</span><span class="s2">&quot;</span> <span class="mh">$1</span>
如下方法将会返回文件中出现指定字符的行数
<span class="nv">wc</span>[<span class="o">/</span><span class="nv">etc</span><span class="o">/</span><span class="nv">passwd</span>,<span class="nv">root</span>]
<span class="nv">wc</span>[<span class="o">/</span><span class="nv">etc</span><span class="o">/</span><span class="nv">services</span>,<span class="nv">zabbix</span>]

<span class="o">--------------------------------------------------------------------------------</span>
监控<span class="nv">mcu</span>的<span class="nv">cpu</span>和内存
<span class="nv">UserParameter</span><span class="o">=</span><span class="nv">proce</span>.<span class="nv">cpu</span>[<span class="o">*</span>],<span class="nv">top</span> <span class="o">-</span><span class="nv">b</span> <span class="o">-</span><span class="nv">n</span> <span class="mi">1</span> <span class="o">|</span> <span class="nv">grep</span> <span class="mh">$1</span> <span class="o">|</span> <span class="nv">awk</span> <span class="s1">&#39;</span><span class="s">{print $$9}</span><span class="s1">&#39;</span>
<span class="nv">UserParameter</span><span class="o">=</span><span class="nv">proce</span>.<span class="nv">mem</span>[<span class="o">*</span>],<span class="nv">sudo</span> <span class="nv">cat</span> <span class="o">/</span><span class="nv">proc</span><span class="o">/</span>`<span class="nv">ps</span> <span class="nv">aux</span> <span class="o">|</span> <span class="nv">grep</span> <span class="mh">$1</span> <span class="o">|</span>  <span class="nv">grep</span> <span class="o">-</span><span class="nv">v</span> <span class="nv">grep</span> <span class="o">|</span> <span class="nv">awk</span> <span class="s1">&#39;</span><span class="s">{print $$2}</span><span class="s1">&#39;</span>`<span class="o">/</span><span class="nv">smaps</span> 
<span class="o">|</span> <span class="nv">grep</span> <span class="o">-</span><span class="nv">i</span> <span class="nv">pss</span> <span class="o">|</span> <span class="nv">awk</span> <span class="s1">&#39;</span><span class="s">{sum += $$2}END{print sum*1024}</span><span class="s1">&#39;</span>
</pre></div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../zabbix/" title="zabbix" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                zabbix
              </span>
            </div>
          </a>
        
        
          <a href="../netdata/" title="netdata" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                netdata
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.ac79c3b0.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>