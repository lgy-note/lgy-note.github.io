



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.3">
    
    
      
        <title>python-base - mkdocs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.30686662.css">
      
      
    
    
      <script src="../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../extra.css">
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#_1" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="mkdocs" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              mkdocs
            </span>
            <span class="md-header-nav__topic">
              
                python-base
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href=".." class="md-tabs__link">
        home
      </a>
    
  </li>

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="./" class="md-tabs__link md-tabs__link--active">
          python
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../nginx/" class="md-tabs__link">
          service
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../mysql/" class="md-tabs__link">
          database
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../open-falcon/" class="md-tabs__link">
          monitor
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../tcp-issue/" class="md-tabs__link">
          basis
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href=".." title="mkdocs" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    mkdocs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="home" class="md-nav__link">
      home
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      python
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        python
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        python-base
      </label>
    
    <a href="./" title="python-base" class="md-nav__link md-nav__link--active">
      python-base
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    列表
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    编码
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    时区转换
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    数据类型
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#re" class="md-nav__link">
    re正则
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    进制转换
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lambda-reduce-map-filter-zip" class="md-nav__link">
    lambda reduce map filter zip
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    多线程
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    异常处理
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    函数
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    字典
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    类与对象
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    迭代器
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    字符串
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    元组
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eval" class="md-nav__link">
    eval
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../python-lib/" title="python-lib" class="md-nav__link">
      python-lib
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../python-lib2/" title="python-lib2" class="md-nav__link">
      python-lib2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../python-web/" title="python-web" class="md-nav__link">
      python-web
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../python-other/" title="python-other" class="md-nav__link">
      python-other
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      service
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        service
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../nginx/" title="nginx" class="md-nav__link">
      nginx
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../nginx2/" title="nginx2" class="md-nav__link">
      nginx2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../apache/" title="apache" class="md-nav__link">
      apache
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../saltstack/" title="saltstack" class="md-nav__link">
      saltstack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tomcat/" title="tomcat" class="md-nav__link">
      tomcat
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ansible/" title="ansible" class="md-nav__link">
      ansible
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../trafficserver/" title="trafficserver" class="md-nav__link">
      trafficserver
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../haproxy/" title="haproxy" class="md-nav__link">
      haproxy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../docker/" title="docker" class="md-nav__link">
      docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../varnish/" title="varnish" class="md-nav__link">
      varnish
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../bind/" title="bind" class="md-nav__link">
      bind
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lvs/" title="lvs" class="md-nav__link">
      lvs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../log-analysis/" title="log-analysis" class="md-nav__link">
      log-analysis
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      database
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        database
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../mysql/" title="mysql" class="md-nav__link">
      mysql
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../mysql2/" title="mysql2" class="md-nav__link">
      mysql2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../memcached/" title="memcached" class="md-nav__link">
      memcached
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../redis/" title="redis" class="md-nav__link">
      redis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../mongodb/" title="mongodb" class="md-nav__link">
      mongodb
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hadoop/" title="hadoop" class="md-nav__link">
      hadoop
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../postgresql/" title="postgresql" class="md-nav__link">
      postgresql
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      monitor
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        monitor
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../open-falcon/" title="open-falcon" class="md-nav__link">
      open-falcon
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../zabbix/" title="zabbix" class="md-nav__link">
      zabbix
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../zabbix2/" title="zabbix2" class="md-nav__link">
      zabbix2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../netdata/" title="netdata" class="md-nav__link">
      netdata
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      basis
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        basis
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../tcp-issue/" title="tcp-issue" class="md-nav__link">
      tcp-issue
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../git-svn/" title="git-svn" class="md-nav__link">
      git-svn
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../vpn/" title="vpn" class="md-nav__link">
      vpn
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../shell/" title="shell" class="md-nav__link">
      shell
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../disk/" title="disk" class="md-nav__link">
      disk
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../filesystem/" title="filesystem" class="md-nav__link">
      filesystem
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../source/" title="source" class="md-nav__link">
      source
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../command/" title="command" class="md-nav__link">
      command
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../linux-base/" title="linux-base" class="md-nav__link">
      linux-base
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../linux-soft/" title="linux-soft" class="md-nav__link">
      linux-soft
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../other/" title="other" class="md-nav__link">
      other
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    列表
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    编码
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    时区转换
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    数据类型
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#re" class="md-nav__link">
    re正则
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    进制转换
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lambda-reduce-map-filter-zip" class="md-nav__link">
    lambda reduce map filter zip
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    多线程
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    异常处理
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    函数
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    字典
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    类与对象
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    迭代器
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    字符串
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    元组
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eval" class="md-nav__link">
    eval
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>python-base</h1>
                
                <h2 id="_1">列表</h2>
<div class="codehilite"><pre><span></span><span class="err">列表频率排名</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Counter</span>
<span class="n">Counter</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span><span class="o">.</span><span class="n">most_common</span>

<span class="err">列表解析器</span>
<span class="p">[</span><span class="n">a</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span> <span class="err">生成一个列表</span>
<span class="p">(</span><span class="n">a</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span> <span class="err">生成一个生成器</span>
<span class="p">{</span><span class="n">a</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)}</span> <span class="err">生成一个序列</span>
<span class="p">{</span><span class="n">a</span><span class="p">:</span><span class="n">a</span><span class="o">*</span><span class="mi">2</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)}</span> <span class="err">生成一个字典</span>

<span class="o">&gt;&gt;&gt;</span> <span class="p">{</span><span class="n">a</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">if</span> <span class="n">a</span> <span class="o">==</span> <span class="mi">2</span><span class="p">}</span>
<span class="nb">set</span><span class="p">([</span><span class="mi">2</span><span class="p">])</span>


<span class="nb">list</span><span class="o">.</span><span class="n">apped</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="err">向列表中添加一个对象</span> <span class="n">obj</span>
<span class="n">a</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="n">a</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>  <span class="err">参数为字符，数字，元组，列表，字典等</span>
<span class="n">a</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="err">‘</span><span class="n">age</span><span class="err">’</span><span class="p">:</span><span class="mi">34</span><span class="p">})</span>  <span class="err">返回值为</span> <span class="bp">None</span>

<span class="nb">list</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">seq</span><span class="p">)</span> <span class="err">把序列</span> <span class="n">seq</span> <span class="err">的内容添加到列表中</span>
<span class="n">a</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>  <span class="err">参数为列表或元组、字典的</span> <span class="n">key</span>
<span class="n">b</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="n">a</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="err">返回值为</span> <span class="bp">None</span>

<span class="nb">list</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="nb">object</span><span class="p">)</span> <span class="err">在索引为</span> <span class="n">n</span> <span class="err">的位置插入对象</span> <span class="n">obj</span>
<span class="n">a</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>  <span class="err">参数为索引值和字符，数字，元组，列表，字典</span>
<span class="n">a</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="err">’</span><span class="n">du</span><span class="err">’</span><span class="p">)</span>  <span class="err">返回值为</span> <span class="bp">None</span>

<span class="nb">list</span><span class="o">.</span><span class="n">pop</span><span class="p">([</span><span class="n">index</span><span class="p">])</span> <span class="err">删除并返回指定位置的对象，默认是最后一个对象</span>
<span class="n">a</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>  <span class="err">参数为索引值或无</span>
<span class="n">a</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="err">返回值为删除的值</span>

<span class="nb">list</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>  <span class="err">原地翻转列表</span>
<span class="n">a</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span> <span class="err">没有参数</span>
<span class="n">a</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span> <span class="err">返回值为</span> <span class="bp">None</span>

<span class="nb">list</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="err">返回一个对象</span> <span class="n">obj</span> <span class="err">在列表中出现的次数</span>
<span class="n">a</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>  <span class="err">参数为字符串、整数、浮点数等</span>
<span class="n">a</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="err">返回值为参数在列表的出现次数</span>

<span class="nb">list</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">j</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">))</span> <span class="err">返回</span> <span class="nb">list</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">==</span><span class="n">obj</span> <span class="err">的</span> <span class="n">k</span> <span class="err">值</span><span class="p">,</span><span class="err">并且</span> <span class="n">k</span> <span class="err">的范围在</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span>
<span class="n">a</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span>  <span class="err">参数为</span> <span class="nb">list</span> <span class="err">中的值和开始结束的索引（可以可无）</span>
<span class="n">a</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="err">返回值为</span> <span class="n">obj</span> <span class="err">在</span> <span class="nb">list</span> <span class="err">的索引值</span>

<span class="nb">list</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="err">从列表中删除对象</span> <span class="n">obj</span>
<span class="n">a</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span>  <span class="err">参数为</span> <span class="nb">list</span> <span class="err">中的值</span>
<span class="n">a</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="err">返回值为</span> <span class="bp">None</span>

<span class="nb">list</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">key</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">reverse</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span> <span class="err">以指定的方式排序列表中的成员，如果</span> <span class="n">func</span> <span class="err">和</span> <span class="n">key</span> <span class="err">参数指</span>
<span class="err">定，则按照指定的方式比较各个元素</span><span class="p">,</span><span class="err">如果</span> <span class="n">reverse</span><span class="o">=</span><span class="bp">True</span> <span class="err">则列表以反序排列</span>
<span class="n">a</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="n">a</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span> <span class="n">a</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>  <span class="err">参数为函数、</span><span class="n">key</span><span class="err">、</span><span class="n">reverse</span> <span class="err">或没有</span>
<span class="n">a</span><span class="o">=</span><span class="p">[</span><span class="err">‘</span><span class="n">du</span><span class="err">’</span><span class="p">,</span><span class="err">’</span><span class="n">dumc</span><span class="err">’</span><span class="p">,</span><span class="err">’</span><span class="n">d</span><span class="err">’</span><span class="p">,</span><span class="err">’</span><span class="n">dddddd</span><span class="err">’</span><span class="p">]</span>  <span class="err">返回值为</span> <span class="bp">None</span>
<span class="n">a</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="nb">len</span><span class="p">)</span> <span class="n">a</span><span class="o">=</span><span class="p">[</span><span class="err">‘</span><span class="n">d</span><span class="err">’</span><span class="p">,</span><span class="err">’</span><span class="n">du</span><span class="err">’</span><span class="p">,</span><span class="err">’</span><span class="n">dumc</span><span class="err">’</span><span class="p">,</span><span class="err">’</span><span class="n">dddddd</span><span class="err">’</span><span class="p">]</span> 

<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">wiki</span><span class="o">.</span><span class="n">python</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">moin</span><span class="o">/</span><span class="n">HowTo</span><span class="o">/</span><span class="n">Sorting</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">student_tuples</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;john&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;jane&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;dave&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>
<span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">student_tuples</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">student</span><span class="p">:</span> <span class="n">student</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>   <span class="c1"># sort by age</span>
<span class="p">[(</span><span class="s1">&#39;dave&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;jane&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;john&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">)]</span>

<span class="n">a</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>    <span class="err">列表去重</span>

<span class="err">获取两个</span><span class="nb">list</span> <span class="err">的交集</span>
<span class="c1">#方法一:</span>
<span class="n">a</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="n">b</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">8</span><span class="p">]</span>
<span class="n">tmp</span> <span class="o">=</span> <span class="p">[</span><span class="n">val</span> <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">a</span> <span class="k">if</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">b</span><span class="p">]</span>
<span class="k">print</span> <span class="n">tmp</span>
<span class="c1">#[2, 5]</span>

<span class="c1">#方法二</span>
<span class="k">print</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">b</span><span class="p">)))</span>

<span class="err">获取两个</span><span class="nb">list</span> <span class="err">的并集</span>
<span class="k">print</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">b</span><span class="p">)))</span>

<span class="err">获取两个</span> <span class="nb">list</span> <span class="err">的差集</span>
<span class="k">print</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">a</span><span class="p">)))</span> <span class="c1"># b中有而a中没有的</span>
</pre></div>


<h2 id="_2">编码</h2>
<div class="codehilite"><pre><span></span><span class="ne">UnicodeEncodeError</span><span class="p">:</span> <span class="s1">&#39;ascii&#39;</span> <span class="n">codec</span> <span class="n">can</span><span class="err">’</span><span class="n">t</span> <span class="n">encode</span> <span class="n">characters</span> <span class="ow">in</span> <span class="n">position</span> <span class="mi">0</span><span class="o">-</span><span class="mi">15</span><span class="p">:</span> <span class="n">ordinal</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">128</span><span class="p">)</span>

<span class="c1"># coding=utf-8 一定要是等于号</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="nb">reload</span><span class="p">(</span><span class="n">sys</span><span class="p">)</span>
<span class="n">sys</span><span class="o">.</span><span class="n">setdefaultencoding</span><span class="p">(</span><span class="s1">&#39;utf8&#39;</span><span class="p">)</span>
</pre></div>


<h2 id="_3">时区转换</h2>
<div class="codehilite"><pre><span></span><span class="c1"># coding=utf-8</span>
<span class="c1"># pip install pygeoip</span>
<span class="c1"># wget http://geolite.maxmind.com/download/geoip/database/GeoLiteCity.dat.gz</span>

<span class="kn">import</span> <span class="nn">pytz</span>
<span class="kn">import</span> <span class="nn">time</span><span class="o">,</span><span class="nn">os</span>
<span class="kn">import</span> <span class="nn">pygeoip</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="n">gi</span> <span class="o">=</span> <span class="n">pygeoip</span><span class="o">.</span><span class="n">GeoIP</span><span class="p">(</span><span class="s1">&#39;GeoLiteCity.dat&#39;</span><span class="p">,</span><span class="n">pygeoip</span><span class="o">.</span><span class="n">MEMORY_CACHE</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">ZoneTrans</span><span class="p">(</span><span class="n">ip</span><span class="p">,</span><span class="n">timedate</span><span class="p">):</span>
 <span class="n">zone</span> <span class="o">=</span> <span class="n">gi</span><span class="o">.</span><span class="n">record_by_addr</span><span class="p">(</span><span class="n">ip</span><span class="p">)[</span><span class="s1">&#39;time_zone&#39;</span><span class="p">]</span>
 <span class="n">tz</span> <span class="o">=</span> <span class="n">pytz</span><span class="o">.</span><span class="n">timezone</span><span class="p">(</span><span class="n">zone</span><span class="p">)</span>
 <span class="n">utc</span> <span class="o">=</span> <span class="n">pytz</span><span class="o">.</span><span class="n">timezone</span><span class="p">(</span><span class="s1">&#39;Asia/Shanghai&#39;</span><span class="p">)</span>
 <span class="n">dateobj</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">timedate</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span><span class="p">)</span>
 <span class="k">print</span> <span class="n">dateobj</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">tz</span><span class="p">)</span><span class="o">.</span><span class="n">astimezone</span><span class="p">(</span><span class="n">utc</span><span class="p">)</span>
 <span class="k">print</span> <span class="n">dateobj</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">tz</span><span class="p">)</span><span class="o">.</span><span class="n">astimezone</span><span class="p">(</span><span class="n">utc</span><span class="p">)</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M:%S&#39;</span><span class="p">))</span>

<span class="n">ZoneTrans</span><span class="p">(</span><span class="s2">&quot;50.186.14.252&quot;</span><span class="p">,</span> <span class="s2">&quot;2016-10-31 04:59:35&quot;</span><span class="p">)</span>
</pre></div>


<h2 id="_4">数据类型</h2>
<div class="codehilite"><pre><span></span><span class="n">bisect</span>
<span class="n">bisect</span> <span class="err">使用二分法在一个</span> <span class="s2">&quot;已排序 (sorted) 序列&quot;</span> <span class="err">中查找合适的插入位置。</span>

<span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">bisect</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="mi">65</span><span class="p">,</span> <span class="mi">78</span> <span class="p">]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">bisect</span><span class="o">.</span><span class="n">bisect</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>  <span class="c1"># 查找 25 在列表中的合适插入位置。</span>
<span class="mi">1</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">bisect</span><span class="o">.</span><span class="n">bisect</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="mi">40</span><span class="p">)</span>  <span class="c1"># 查找 40 在列表中的合适插入位置。</span>
<span class="mi">3</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">bisect</span><span class="o">.</span><span class="n">bisect_left</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="mi">35</span><span class="p">)</span>  <span class="c1"># 如果待查找元素在列表中存在，则返回左侧插入位置。</span>
<span class="mi">2</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">bisect</span><span class="o">.</span><span class="n">bisect_right</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="mi">35</span><span class="p">)</span>  <span class="c1"># 如果待查找元素在列表中存在，则返回右侧插入位置。</span>
<span class="mi">3</span>
<span class="err">还可以直接用</span> <span class="n">insort_left</span><span class="p">()</span> <span class="err">直接插入元素而非查找。</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">bisect</span><span class="o">.</span><span class="n">insort_left</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span>
<span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="mi">65</span><span class="p">,</span> <span class="mi">78</span><span class="p">]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">bisect</span><span class="o">.</span><span class="n">insort_left</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="mi">40</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span>
<span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">65</span><span class="p">,</span> <span class="mi">78</span><span class="p">]</span>
<span class="err">用</span> <span class="n">bisect</span> <span class="err">实现一个</span> <span class="n">SortedList</span> <span class="err">非常简单。</span>

<span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">SortedList</span><span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="o">*</span><span class="n">elements</span><span class="p">):</span>
<span class="o">...</span>  <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">elements</span><span class="p">:</span>
<span class="o">...</span>   <span class="n">bisect</span><span class="o">.</span><span class="n">insort_right</span><span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
<span class="o">...</span>
<span class="o">...</span>  <span class="k">return</span> <span class="nb">list</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">SortedList</span><span class="p">([],</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">o</span> <span class="o">=</span> <span class="n">SortedList</span><span class="p">([],</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">o</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">SortedList</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
<span class="err">可以考虑用</span> <span class="n">bisect</span> <span class="err">来实现</span> <span class="n">Consistent</span> <span class="n">Hashing</span> <span class="err">算法，只要找到</span> <span class="n">Key</span> <span class="err">在</span> <span class="n">Ring</span> <span class="err">上的插入位置，</span>
<span class="err">其下一个有效元素就是我们的目标服务器配置。</span>

<span class="n">heapq</span>
<span class="err">最小堆</span><span class="p">:</span> <span class="err">完全平衡二叉树，所有节点都小于其子节点。</span>

<span class="err">堆的意义：最快找到最大</span><span class="o">/</span><span class="err">最小值。在堆结构中插入或删除最小</span><span class="p">(</span><span class="err">最大</span><span class="p">)</span><span class="err">元素时进行重新构造时间复杂度为</span> <span class="n">O</span>
<span class="p">(</span><span class="n">logN</span><span class="p">)</span><span class="err">，而其他方法最少为</span><span class="n">O</span><span class="p">(</span><span class="n">N</span><span class="p">)</span><span class="err">。</span>
<span class="err">堆在实际开发中的更倾向于算法调度而非排序。比如优先级调度时，每次取优先级最高的；时间驱动调度</span>
<span class="err">时，取时间最小或等待最长的等等。</span>

<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">heapq</span> <span class="kn">import</span> <span class="o">*</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="o">*</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">rand</span> <span class="o">=</span> <span class="n">sample</span><span class="p">(</span><span class="nb">xrange</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span> <span class="mi">10</span><span class="p">)</span> <span class="c1"># 生成随机数序列。</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">rand</span>
<span class="p">[</span><span class="mi">572</span><span class="p">,</span> <span class="mi">758</span><span class="p">,</span> <span class="mi">737</span><span class="p">,</span> <span class="mi">738</span><span class="p">,</span> <span class="mi">412</span><span class="p">,</span> <span class="mi">755</span><span class="p">,</span> <span class="mi">507</span><span class="p">,</span> <span class="mi">734</span><span class="p">,</span> <span class="mi">479</span><span class="p">,</span> <span class="mi">374</span><span class="p">]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">heap</span> <span class="o">=</span> <span class="p">[]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">rand</span><span class="p">:</span> <span class="n">heappush</span><span class="p">(</span><span class="n">heap</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="c1"># 将随机数压入堆。</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">heap</span>  <span class="c1"># 堆是树，并非排序列表。</span>
<span class="p">[</span><span class="mi">374</span><span class="p">,</span> <span class="mi">412</span><span class="p">,</span> <span class="mi">507</span><span class="p">,</span> <span class="mi">572</span><span class="p">,</span> <span class="mi">479</span><span class="p">,</span> <span class="mi">755</span><span class="p">,</span> <span class="mi">737</span><span class="p">,</span> <span class="mi">758</span><span class="p">,</span> <span class="mi">734</span><span class="p">,</span> <span class="mi">738</span><span class="p">]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="k">while</span> <span class="n">heap</span><span class="p">:</span> <span class="k">print</span> <span class="n">heappop</span><span class="p">(</span><span class="n">heap</span><span class="p">)</span> <span class="c1"># 总是弹出最小元素。</span>
<span class="mi">374</span>
<span class="mi">412</span>
<span class="mi">479</span>
<span class="mi">507</span>
<span class="mi">572</span>
<span class="mi">734</span>
<span class="mi">737</span>
<span class="mi">738</span>
<span class="mi">755</span>
<span class="mi">758</span>
<span class="err">其他相关函数。</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">d</span> <span class="o">=</span> <span class="n">sample</span><span class="p">(</span><span class="nb">xrange</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="mi">10</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">d</span>
<span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">heapify</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="c1"># 将列表转换为堆。</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">d</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">heappushpop</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># 先 push(item)，后 pop。弹出值肯定小于或等于 item。</span>
<span class="o">-</span><span class="mi">1</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">heapreplace</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># 先 pop，后 push(item)。弹出值可能大于 item。</span>
<span class="mi">0</span>

<span class="o">...</span> <span class="o">...</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">merge</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)]</span>   <span class="c1"># 合并有序序列。</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>

<span class="o">...</span> <span class="o">...</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">d</span> <span class="o">=</span> <span class="n">sample</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="mi">10</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">d</span>
<span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">nlargest</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="c1"># 从列表(不一定是堆)有序返回最大的 n 个元素。</span>
<span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">nsmallest</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="c1"># 有序返回最小的 n 个元素。</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="err">利用元组</span> <span class="nb">cmp</span><span class="err">，用数字表示对象优先级，实现优先级队列。</span>

<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">string</span> <span class="kn">import</span> <span class="o">*</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">data</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="n">sample</span><span class="p">(</span><span class="nb">xrange</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span> <span class="mi">10</span><span class="p">),</span> <span class="n">sample</span><span class="p">(</span><span class="n">letters</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">data</span>
<span class="p">[(</span><span class="mi">31</span><span class="p">,</span> <span class="s1">&#39;Z&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">71</span><span class="p">,</span> <span class="s1">&#39;S&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">94</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">65</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">98</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;U&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="s1">&#39;u&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="s1">&#39;p&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="s1">&#39;v&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">29</span><span class="p">,</span> <span class="s1">&#39;i&#39;</span><span class="p">)]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span> <span class="n">heappush</span><span class="p">(</span><span class="n">heap</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">heap</span>
<span class="p">[(</span><span class="mi">8</span><span class="p">,</span> <span class="s1">&#39;u&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="s1">&#39;v&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;U&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="s1">&#39;p&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">29</span><span class="p">,</span> <span class="s1">&#39;i&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">94</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">31</span><span class="p">,</span> <span class="s1">&#39;Z&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">71</span><span class="p">,</span> <span class="s1">&#39;S&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">65</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">98</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">)]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="k">while</span> <span class="n">heap</span><span class="p">:</span> <span class="k">print</span> <span class="n">heappop</span><span class="p">(</span><span class="n">heap</span><span class="p">)</span>
<span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="s1">&#39;u&#39;</span><span class="p">)</span>
<span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;U&#39;</span><span class="p">)</span>
<span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="s1">&#39;v&#39;</span><span class="p">)</span>
<span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="s1">&#39;p&#39;</span><span class="p">)</span>
<span class="p">(</span><span class="mi">29</span><span class="p">,</span> <span class="s1">&#39;i&#39;</span><span class="p">)</span>
<span class="p">(</span><span class="mi">31</span><span class="p">,</span> <span class="s1">&#39;Z&#39;</span><span class="p">)</span>
<span class="p">(</span><span class="mi">65</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">)</span>
<span class="p">(</span><span class="mi">71</span><span class="p">,</span> <span class="s1">&#39;S&#39;</span><span class="p">)</span>
<span class="p">(</span><span class="mi">94</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="p">(</span><span class="mi">98</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">)</span>
</pre></div>


<h2 id="re">re正则</h2>
<div class="codehilite"><pre><span></span>正则表达式
 正则表达式有强大并且标准化的方法来处理字符串查找、替换以及用复杂模式来解析文本。
 正则表达式的语法比程序代码更紧凑，格式更严格，比用组合调用字符串处理函数的方法更具有可读性。
 还可以在正则表达式中嵌入注释信息，这样就可以使它有自文档化的功能。


匹配符：
 <span class="o">^</span>    匹配字符串开始位置。在多行字符串模式匹配每一行的开头。
 $    匹配字符串结束位置。在多行字符串模式匹配每一行的结尾。
 .    匹配除了换行符外的任何字符，在 <span class="nv">alternate</span> 模式<span class="ss">(</span><span class="nv">re</span>.<span class="nv">DOTALL</span><span class="ss">)</span>下它甚至可以匹配换行。
 <span class="nv">A</span>   匹配字符串开头
 <span class="nv">Z</span>   匹配字符串结尾
 <span class="nv">b</span>   匹配一个单词边界。即 <span class="nv">w</span> 与 <span class="nv">W</span> 之间。
 <span class="nv">B</span>   匹配一个非单词边界；相当于类 [<span class="o">^</span><span class="nv">b</span>]。
 <span class="nv">d</span>   匹配一个数字。
 <span class="nv">D</span>   匹配一个任意的非数字字符。
 <span class="nv">s</span>   匹配任何空白字符；它相当于类  [ <span class="nv">tnrfv</span>]。
 <span class="nv">S</span>   匹配任何非空白字符；它相当于类 [<span class="o">^</span> <span class="nv">tnrfv</span>]。
 <span class="nv">w</span>   匹配任何字母数字字符；它相当于类 [<span class="nv">a</span><span class="o">-</span><span class="nv">zA</span><span class="o">-</span><span class="nv">Z0</span><span class="o">-</span><span class="mi">9</span><span class="nv">_</span>]。
 <span class="nv">W</span>   匹配任何非字母数字字符；它相当于类 [<span class="o">^</span><span class="nv">a</span><span class="o">-</span><span class="nv">zA</span><span class="o">-</span><span class="nv">Z0</span><span class="o">-</span><span class="mi">9</span><span class="nv">_</span>]。
 <span class="nv">x</span>?   匹配可选的<span class="nv">x</span>字符。即是<span class="mi">0</span>个或者<span class="mi">1</span>个<span class="nv">x</span>字符。
 <span class="nv">x</span><span class="o">*</span>   匹配<span class="mi">0</span>个或更多的<span class="nv">x</span>。
 <span class="nv">x</span><span class="o">+</span>   匹配<span class="mi">1</span>个或者更多<span class="nv">x</span>。
 <span class="nv">x</span>{<span class="nv">n</span>,<span class="nv">m</span>}  匹配<span class="nv">n</span>到<span class="nv">m</span>个<span class="nv">x</span>，至少<span class="nv">n</span>个，不能超过<span class="nv">m</span>个。
 <span class="ss">(</span><span class="nv">a</span><span class="o">|</span><span class="nv">b</span><span class="o">|</span><span class="nv">c</span><span class="ss">)</span> 匹配单独的任意一个<span class="nv">a</span>或者<span class="nv">b</span>或者<span class="nv">c</span>。
 <span class="ss">(</span><span class="nv">x</span><span class="ss">)</span>  捕获组，小括号括起来即可，它会记忆它匹配到的字符串。
   可以用 <span class="nv">re</span>.<span class="nv">search</span><span class="ss">()</span> 返回的匹配对象的 <span class="nv">groups</span><span class="ss">()</span>函数来获取到匹配的值。
 <span class="mi">1</span>   记忆组，它表示记住的第一个分组；如果有超过一个的记忆分组，可以使用 <span class="mi">2</span> 和 <span class="mi">3</span> 等等。
   记忆组的内容也要小括号括起来。
 <span class="ss">(</span>?<span class="nv">iLmsux</span><span class="ss">)</span>    <span class="nv">iLmsux</span>的每个字符代表一种匹配模式
  <span class="nv">re</span>.<span class="nv">I</span><span class="ss">(</span><span class="nv">re</span>.<span class="nv">IGNORECASE</span><span class="ss">)</span>: 忽略大小写
  <span class="nv">re</span>.<span class="nv">M</span><span class="ss">(</span><span class="nv">re</span>.<span class="nv">MULTILINE</span><span class="ss">)</span>: 多行模式
  <span class="nv">re</span>.<span class="nv">S</span><span class="ss">(</span><span class="nv">re</span>.<span class="nv">DOTALL</span><span class="ss">)</span>:  单行
  <span class="nv">re</span>.<span class="nv">L</span><span class="ss">(</span><span class="nv">re</span>.<span class="nv">LOCALE</span><span class="ss">)</span>: 使预定字符类 <span class="nv">w</span> <span class="nv">W</span> <span class="nv">b</span> <span class="nv">B</span> <span class="nv">s</span> <span class="nv">S</span> 匹配本地字符，对中文支持不好
  <span class="nv">re</span>.<span class="nv">U</span><span class="ss">(</span><span class="nv">re</span>.<span class="nv">UNICODE</span><span class="ss">)</span>: 使预定字符类 <span class="nv">w</span> <span class="nv">W</span> <span class="nv">b</span> <span class="nv">B</span> <span class="nv">s</span> <span class="nv">S</span> <span class="nv">d</span> <span class="nv">D</span> 取决于<span class="nv">unicode</span>定义的字符属性
  <span class="nv">re</span>.<span class="nv">X</span><span class="ss">(</span><span class="nv">re</span>.<span class="nv">VERBOSE</span><span class="ss">)</span>: 忽略多余的空白字符，并可以加入注释。
 <span class="ss">(</span>?:表达式<span class="ss">)</span>   无捕获组。与捕获组表现一样，只是没有内容。
 <span class="ss">(</span>?<span class="nv">P</span><span class="o">&lt;</span><span class="nv">name</span><span class="o">&gt;</span>表达式<span class="ss">)</span>   命名组。与记忆组一样，只是多了个名称。
 <span class="ss">(</span>?<span class="nv">P</span><span class="o">=</span><span class="nv">name</span><span class="ss">)</span>    命名组的逆向引用。
 <span class="ss">(</span>?#...<span class="ss">)</span>   “#”后面的将会作为注释而忽略掉。例如：“<span class="nv">ab</span><span class="ss">(</span>?#<span class="nv">comment</span><span class="ss">)</span><span class="nv">cd</span>”匹配“<span class="nv">abcd</span>”
 <span class="ss">(</span>?<span class="o">=</span>...<span class="ss">)</span>   之后的字符串需要匹配表达式才能成功匹配。不消耗字符串内容。 
 例：“<span class="nv">a</span><span class="ss">(</span>?<span class="o">=</span><span class="nv">d</span><span class="ss">)</span>”匹配“<span class="nv">a12</span>”中的“<span class="nv">a</span>”
 <span class="ss">(</span>?<span class="o">!</span>...<span class="ss">)</span>   之后的字符串需要不匹配表达式才能成功匹配。不消耗字符串内容。 
 例：“<span class="nv">a</span><span class="ss">(</span>?<span class="o">!</span><span class="nv">d</span><span class="ss">)</span>”匹配“<span class="nv">abc</span>”中的“<span class="nv">a</span>”
 <span class="ss">(</span>?<span class="o">&lt;=</span>...<span class="ss">)</span>     之前的字符串需要匹配表达式才能成功匹配。不消耗字符串内容。
  例：“<span class="ss">(</span>?<span class="o">&lt;=</span><span class="nv">d</span><span class="ss">)</span><span class="nv">a</span>”匹配“<span class="mi">2</span><span class="nv">a</span>”中的“<span class="nv">a</span>”
 <span class="ss">(</span>?<span class="o">&lt;!</span>...<span class="ss">)</span>     之前的字符串需要不匹配表达式才能成功匹配。不消耗字符串内容。 
 例：“<span class="ss">(</span>?<span class="o">&lt;!</span><span class="nv">d</span><span class="ss">)</span><span class="nv">a</span>”匹配“<span class="nv">sa</span>”中的“<span class="nv">a</span>”
 注：上面<span class="mi">4</span>个表达式的里面匹配的内容只能是一个字符，多个则报错。
 <span class="ss">(</span>?<span class="ss">(</span><span class="nv">id</span><span class="o">/</span><span class="nv">name</span><span class="ss">)</span><span class="nv">yes</span><span class="o">-</span><span class="nv">pattern</span><span class="o">|</span><span class="nv">no</span><span class="o">-</span><span class="nv">pattern</span><span class="ss">)</span>  如果编号为 <span class="nv">id</span> 或者别名为 <span class="nv">name</span> 的组匹配到字符串，则需要匹配<span class="nv">yes</span><span class="o">-</span><span class="nv">pattern</span>，
 否则需要匹配<span class="nv">no</span><span class="o">-</span><span class="nv">pattern</span>。 “<span class="o">|</span><span class="nv">no</span><span class="o">-</span><span class="nv">pattern</span>”可以省略。如：“<span class="ss">(</span><span class="nv">d</span><span class="ss">)</span><span class="nv">ab</span><span class="ss">(</span>?<span class="ss">(</span><span class="mi">1</span><span class="ss">)</span><span class="nv">d</span><span class="o">|</span><span class="nv">c</span><span class="ss">)</span>”匹配到“<span class="mi">1</span><span class="nv">ab2</span>”和“<span class="nv">abc</span>”

匹配两边关键词 取中间的值
<span class="nv">str2</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">&lt;12345@itv.cn&gt;</span><span class="s1">&#39;</span>
<span class="nv">print</span> <span class="nv">re</span>.<span class="nv">findall</span><span class="ss">(</span><span class="nv">r</span><span class="s2">&quot;</span><span class="s">(?&lt;=&lt;12).+(?=@itv.cn&gt;)</span><span class="s2">&quot;</span>, <span class="nv">str2</span><span class="ss">)</span>
结果： [<span class="s1">&#39;</span><span class="s">345</span><span class="s1">&#39;</span>]

元字符:
 <span class="s2">&quot;</span><span class="s">[</span><span class="s2">&quot;</span> 和 <span class="s2">&quot;</span><span class="s">]</span><span class="s2">&quot;</span>
  它们常用来匹配一个字符集。字符可以单个列出，也可以用“<span class="o">-</span>”号分隔的两个给定字符来表示
  一个字符区间。
   例如，[<span class="nv">abc</span>] 将匹配<span class="s2">&quot;</span><span class="s">a</span><span class="s2">&quot;</span>, <span class="s2">&quot;</span><span class="s">b</span><span class="s2">&quot;</span>, 或 <span class="s2">&quot;</span><span class="s">c</span><span class="s2">&quot;</span>中的任意一个字符；也可以用区间[<span class="nv">a</span><span class="o">-</span><span class="nv">c</span>]来表示同一字符集，
   和前者效果一致。
  元字符在类别里并不起作用。例如，[<span class="nv">a</span>$]将匹配字符<span class="s2">&quot;</span><span class="s">a</span><span class="s2">&quot;</span> 或 <span class="s2">&quot;</span><span class="s">$</span><span class="s2">&quot;</span> 中的任意一个；<span class="s2">&quot;</span><span class="s">$</span><span class="s2">&quot;</span> 在这里恢复成
  普通字符。
  也可以用补集来匹配不在区间范围内的字符。其做法是把<span class="s2">&quot;</span><span class="s">^</span><span class="s2">&quot;</span>作为类别的首个字符；其它地方的<span class="s2">&quot;</span><span class="s">^</span><span class="s2">&quot;</span>只会
  简单匹配 <span class="s2">&quot;</span><span class="s">^</span><span class="s2">&quot;</span>字符本身。
   例如，[<span class="o">^</span><span class="mi">5</span>] 将匹配除 <span class="s2">&quot;</span><span class="s">5</span><span class="s2">&quot;</span> 之外的任意字符。
  特殊字符都可以包含在一个字符类中。如，[<span class="nv">s</span>,.]字符类将匹配任何空白字符或<span class="s2">&quot;</span><span class="s">,</span><span class="s2">&quot;</span>或<span class="s2">&quot;</span><span class="s">.</span><span class="s2">&quot;</span>。
 反斜杠 <span class="s2">&quot;&quot;</span>。
  做为 <span class="nv">Python</span> 中的字符串字母，反斜杠后面可以加不同的字符以表示不同特殊意义。
  它也可以用于取消所有的元字符，这样你就可以在模式中匹配它们了。
   例如，需要匹配字符 <span class="s2">&quot;</span><span class="s">[</span><span class="s2">&quot;</span> 或 <span class="s2">&quot;&quot;</span>，可以在它们之前用反斜杠来取消它们的特殊意义： [ 或 。

建议使用原始字符串:
 建议在处理正则表达式的时候总是使用原始字符串。如： <span class="nv">r</span><span class="s1">&#39;</span><span class="s">bROAD$</span><span class="s1">&#39;</span>, 而不要写成 <span class="s1">&#39;</span><span class="s">bROAD$</span><span class="s1">&#39;</span>
 否则，会因为理解正则表达式而消耗大量时间<span class="ss">(</span>正则表达式本身就已经够让人困惑的了<span class="ss">)</span>。

无捕获组:
 有时你想用一个组去收集正则表达式的一部分，但又对组的内容不感兴趣。你可以用一个无捕获组“<span class="ss">(</span>?
 :...<span class="ss">)</span>”来实现这项功能。
 除了捕获匹配组的内容之外，无捕获组与捕获组表现完全一样；可以在其中放置任何字符、匹配符，可以
 在其他组<span class="ss">(</span>无捕获组与捕获组<span class="ss">)</span>中嵌套它。
 无捕获组对于修改已有组尤其有用，因为可以不用改变所有其他组号的情况下添加一个新组。
 捕获组和无捕获组在搜索效率方面也一样。

命名组:
 与用数字指定组不同的是，它可以用名字来指定。除了该组有个名字之外，命名组也同捕获组是相同的。
 <span class="ss">(</span>?<span class="nv">P</span><span class="o">&lt;</span><span class="nv">name</span><span class="o">&gt;</span>...<span class="ss">)</span> 定义一个命名组，<span class="ss">(</span>?<span class="nv">P</span><span class="o">=</span><span class="nv">name</span><span class="ss">)</span> 则是对命名组的逆向引用。
 <span class="nv">MatchObject</span> 的方法处理捕获组时接受的要么是表示组号的整数，要么是包含组名的字符串。所以命名组
 可以通过数字或者名称两
 种方式来得到一个组的信息。

松散正则表达式:
 为了方便阅读和维护，可以使用松散正则表达式，它与普通紧凑的正则表达式有两点不同：
 <span class="mi">1</span>, 空白符被忽略。空格、制表符<span class="ss">(</span><span class="nv">tab</span><span class="ss">)</span>和回车会被忽略。如果需要匹配他们，可以在前面加一个“”来转义。
 <span class="mi">2</span>, 注释被忽略。注释以“#”开头直到行尾，与<span class="nv">python</span>代码中的一样。
 使用松散正则表达式，需要传递一个叫 <span class="nv">re</span>.<span class="nv">VERBOSE</span>的 参数。详细见下面例子。

<span class="nv">re</span> 有几个重要的函数：

<span class="nv">match</span><span class="ss">()</span>: 匹配字符串开始位置。
<span class="nv">search</span><span class="ss">()</span>: 扫描字符串，找到第一个位置。
<span class="nv">findall</span><span class="ss">()</span>: 找到全部匹配，以列表返回。
<span class="nv">finditer</span><span class="ss">()</span>: 找到全部匹配，以迭代器返回。
<span class="nv">match</span> 和 <span class="nv">search</span> 仅匹配一次，匹配不到返回 <span class="nv">None</span>。

<span class="o">&gt;&gt;&gt;</span> <span class="nv">import</span> <span class="nv">re</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nv">s</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">12abc345ab</span><span class="s2">&quot;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nv">m</span> <span class="o">=</span> <span class="nv">re</span>.<span class="nv">match</span><span class="ss">(</span><span class="nv">r</span><span class="s2">&quot;</span><span class="s">d+</span><span class="s2">&quot;</span>, <span class="nv">s</span><span class="ss">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nv">m</span>.<span class="nv">group</span><span class="ss">()</span>, <span class="nv">m</span>.<span class="nv">span</span><span class="ss">()</span>
<span class="ss">(</span><span class="s1">&#39;</span><span class="s">12</span><span class="s1">&#39;</span>, <span class="ss">(</span><span class="mi">0</span>, <span class="mi">2</span><span class="ss">))</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nv">m</span> <span class="o">=</span> <span class="nv">re</span>.<span class="nv">match</span><span class="ss">(</span><span class="nv">r</span><span class="s2">&quot;</span><span class="s">d{3,}</span><span class="s2">&quot;</span>, <span class="nv">s</span><span class="ss">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nv">m</span> <span class="nv">is</span> <span class="nv">None</span>
<span class="nv">True</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nv">m</span> <span class="o">=</span> <span class="nv">re</span>.<span class="nv">search</span><span class="ss">(</span><span class="nv">r</span><span class="s2">&quot;</span><span class="s">d{3,}</span><span class="s2">&quot;</span>, <span class="nv">s</span><span class="ss">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nv">m</span>.<span class="nv">group</span><span class="ss">()</span>, <span class="nv">m</span>.<span class="nv">span</span><span class="ss">()</span>
<span class="ss">(</span><span class="s1">&#39;</span><span class="s">345</span><span class="s1">&#39;</span>, <span class="ss">(</span><span class="mi">5</span>, <span class="mi">8</span><span class="ss">))</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nv">m</span> <span class="o">=</span> <span class="nv">re</span>.<span class="nv">search</span><span class="ss">(</span><span class="nv">r</span><span class="s2">&quot;</span><span class="s">d+</span><span class="s2">&quot;</span>, <span class="nv">s</span><span class="ss">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nv">m</span>.<span class="nv">group</span><span class="ss">()</span>, <span class="nv">m</span>.<span class="nv">span</span><span class="ss">()</span>
<span class="ss">(</span><span class="s1">&#39;</span><span class="s">12</span><span class="s1">&#39;</span>, <span class="ss">(</span><span class="mi">0</span>, <span class="mi">2</span><span class="ss">))</span>
<span class="nv">findall</span> 返回列表 <span class="ss">(</span>或空列表<span class="ss">)</span>，<span class="nv">finditer</span> 和 <span class="nv">match</span>、<span class="nv">search</span> 一样返回 <span class="nv">MatchObject</span> 对象。

<span class="o">&gt;&gt;&gt;</span> <span class="nv">ms</span> <span class="o">=</span> <span class="nv">re</span>.<span class="nv">findall</span><span class="ss">(</span><span class="nv">r</span><span class="s2">&quot;</span><span class="s">d+</span><span class="s2">&quot;</span>, <span class="nv">s</span><span class="ss">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nv">ms</span>
[<span class="s1">&#39;</span><span class="s">12</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">345</span><span class="s1">&#39;</span>]

<span class="o">&gt;&gt;&gt;</span> <span class="nv">ms</span> <span class="o">=</span> <span class="nv">re</span>.<span class="nv">findall</span><span class="ss">(</span><span class="nv">r</span><span class="s2">&quot;</span><span class="s">d{5}</span><span class="s2">&quot;</span>, <span class="nv">s</span><span class="ss">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nv">ms</span>
[]

<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="nv">m</span> <span class="nv">in</span> <span class="nv">re</span>.<span class="nv">finditer</span><span class="ss">(</span><span class="nv">r</span><span class="s2">&quot;</span><span class="s">d+</span><span class="s2">&quot;</span>, <span class="nv">s</span><span class="ss">)</span>: <span class="nv">print</span> <span class="nv">m</span>.<span class="nv">group</span><span class="ss">()</span>, <span class="nv">m</span>.<span class="nv">span</span><span class="ss">()</span>
...
<span class="mi">12</span> <span class="ss">(</span><span class="mi">0</span>, <span class="mi">2</span><span class="ss">)</span>
<span class="mi">345</span> <span class="ss">(</span><span class="mi">5</span>, <span class="mi">8</span><span class="ss">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="nv">m</span> <span class="nv">in</span> <span class="nv">re</span>.<span class="nv">finditer</span><span class="ss">(</span><span class="nv">r</span><span class="s2">&quot;</span><span class="s">d{5}</span><span class="s2">&quot;</span>, <span class="nv">s</span><span class="ss">)</span>: <span class="nv">print</span> <span class="nv">m</span>.<span class="nv">group</span><span class="ss">()</span>, <span class="nv">m</span>.<span class="nv">span</span><span class="ss">()</span> # 返回空列表
...
<span class="o">&gt;&gt;&gt;</span>
<span class="nv">MatchObject</span>

<span class="nv">match</span>、<span class="nv">search</span>、<span class="nv">finditer</span> 返回的对象 —— <span class="nv">MatchObject</span>。

<span class="nv">group</span><span class="ss">()</span>: 返回匹配的完整字符串。
<span class="nv">start</span><span class="ss">()</span>: 匹配的开始位置。
<span class="k">end</span><span class="ss">()</span>: 匹配的结束位置。
<span class="nv">span</span><span class="ss">()</span>: 包含起始、结束位置的元组。
<span class="nv">groups</span><span class="ss">()</span>: 返回分组信息。
<span class="nv">groupdict</span><span class="ss">()</span>: 返回命名分组信息。
<span class="o">&gt;&gt;&gt;</span> <span class="nv">m</span> <span class="o">=</span> <span class="nv">re</span>.<span class="nv">match</span><span class="ss">(</span><span class="nv">r</span><span class="s2">&quot;</span><span class="s">(d+)(P&lt;letter&gt;[abc]+)</span><span class="s2">&quot;</span>, <span class="nv">s</span><span class="ss">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nv">m</span>.<span class="nv">group</span><span class="ss">()</span>
<span class="s1">&#39;</span><span class="s">12abc</span><span class="s1">&#39;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nv">m</span>.<span class="nv">start</span><span class="ss">()</span>
<span class="mi">0</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nv">m</span>.<span class="k">end</span><span class="ss">()</span>
<span class="mi">5</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nv">m</span>.<span class="nv">span</span><span class="ss">()</span>
<span class="ss">(</span><span class="mi">0</span>, <span class="mi">5</span><span class="ss">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nv">m</span>.<span class="nv">groups</span><span class="ss">()</span>
<span class="ss">(</span><span class="s1">&#39;</span><span class="s">12</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">abc</span><span class="s1">&#39;</span><span class="ss">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nv">m</span>.<span class="nv">groupdict</span><span class="ss">()</span>
{<span class="s1">&#39;</span><span class="s">letter</span><span class="s1">&#39;</span>: <span class="s1">&#39;</span><span class="s">abc</span><span class="s1">&#39;</span>}
<span class="nv">group</span><span class="ss">()</span> 可以接收多个参数，用于返回指定序号的分组。

<span class="o">&gt;&gt;&gt;</span> <span class="nv">m</span>.<span class="nv">group</span><span class="ss">(</span><span class="mi">0</span><span class="ss">)</span>
<span class="s1">&#39;</span><span class="s">12abc</span><span class="s1">&#39;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nv">m</span>.<span class="nv">group</span><span class="ss">(</span><span class="mi">1</span><span class="ss">)</span>
<span class="s1">&#39;</span><span class="s">12</span><span class="s1">&#39;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nv">m</span>.<span class="nv">group</span><span class="ss">(</span><span class="mi">2</span><span class="ss">)</span>
<span class="s1">&#39;</span><span class="s">abc</span><span class="s1">&#39;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nv">m</span>.<span class="nv">group</span><span class="ss">(</span><span class="mi">1</span>,<span class="mi">2</span><span class="ss">)</span>
<span class="ss">(</span><span class="s1">&#39;</span><span class="s">12</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">abc</span><span class="s1">&#39;</span><span class="ss">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nv">m</span>.<span class="nv">group</span><span class="ss">(</span><span class="mi">0</span>,<span class="mi">1</span>,<span class="mi">2</span><span class="ss">)</span>
<span class="ss">(</span><span class="s1">&#39;</span><span class="s">12abc</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">12</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">abc</span><span class="s1">&#39;</span><span class="ss">)</span>
<span class="nv">start</span><span class="ss">()</span>、<span class="k">end</span><span class="ss">()</span> 和 <span class="nv">span</span><span class="ss">()</span> 同样能接收分组序号。和 <span class="nv">group</span><span class="ss">()</span> 一样，序号 <span class="mi">0</span> 表示整体匹配结果。

<span class="o">&gt;&gt;&gt;</span> <span class="nv">m</span>.<span class="nv">start</span><span class="ss">(</span><span class="mi">0</span><span class="ss">)</span>, <span class="nv">m</span>.<span class="k">end</span><span class="ss">(</span><span class="mi">0</span><span class="ss">)</span>
<span class="ss">(</span><span class="mi">0</span>, <span class="mi">5</span><span class="ss">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nv">m</span>.<span class="nv">start</span><span class="ss">(</span><span class="mi">1</span><span class="ss">)</span>, <span class="nv">m</span>.<span class="k">end</span><span class="ss">(</span><span class="mi">1</span><span class="ss">)</span>
<span class="ss">(</span><span class="mi">0</span>, <span class="mi">2</span><span class="ss">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nv">m</span>.<span class="nv">start</span><span class="ss">(</span><span class="mi">2</span><span class="ss">)</span>, <span class="nv">m</span>.<span class="k">end</span><span class="ss">(</span><span class="mi">2</span><span class="ss">)</span>
<span class="ss">(</span><span class="mi">2</span>, <span class="mi">5</span><span class="ss">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nv">m</span>.<span class="nv">span</span><span class="ss">(</span><span class="mi">0</span><span class="ss">)</span>
<span class="ss">(</span><span class="mi">0</span>, <span class="mi">5</span><span class="ss">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nv">m</span>.<span class="nv">span</span><span class="ss">(</span><span class="mi">1</span><span class="ss">)</span>
<span class="ss">(</span><span class="mi">0</span>, <span class="mi">2</span><span class="ss">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nv">m</span>.<span class="nv">span</span><span class="ss">(</span><span class="mi">2</span><span class="ss">)</span>
<span class="ss">(</span><span class="mi">2</span>, <span class="mi">5</span><span class="ss">)</span>
编译标志

可以用 <span class="nv">re</span>.<span class="nv">I</span>、<span class="nv">re</span>.<span class="nv">M</span> 等参数，也可以直接在表达式中添加 <span class="s2">&quot;</span><span class="s">(iLmsux)</span><span class="s2">&quot;</span> 标志。

<span class="nv">s</span>: 单行。<span class="s2">&quot;</span><span class="s">.</span><span class="s2">&quot;</span> 匹配包括换行符在内的所有字符。
<span class="nv">i</span>: 忽略大小写。
<span class="nv">L</span>: 让 <span class="s2">&quot;</span><span class="s">w</span><span class="s2">&quot;</span> 能匹配当地字符，貌似对中文支持不好。
<span class="nv">m</span>: 多行。
<span class="nv">x</span>: 忽略多余的空白字符，让表达式更易阅读。
<span class="nv">u</span>: <span class="nv">Unicode</span>。
试试看。

<span class="o">&gt;&gt;&gt;</span> <span class="nv">re</span>.<span class="nv">findall</span><span class="ss">(</span><span class="nv">r</span><span class="s2">&quot;</span><span class="s">[a-z]+</span><span class="s2">&quot;</span>, <span class="s2">&quot;</span><span class="s">%123Abc%45xyz&amp;</span><span class="s2">&quot;</span><span class="ss">)</span>
[<span class="s1">&#39;</span><span class="s">bc</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">xyz</span><span class="s1">&#39;</span>]

<span class="o">&gt;&gt;&gt;</span> <span class="nv">re</span>.<span class="nv">findall</span><span class="ss">(</span><span class="nv">r</span><span class="s2">&quot;</span><span class="s">[a-z]+</span><span class="s2">&quot;</span>, <span class="s2">&quot;</span><span class="s">%123Abc%45xyz&amp;</span><span class="s2">&quot;</span>, <span class="nv">re</span>.<span class="nv">I</span><span class="ss">)</span>
[<span class="s1">&#39;</span><span class="s">Abc</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">xyz</span><span class="s1">&#39;</span>]

<span class="o">&gt;&gt;&gt;</span> <span class="nv">re</span>.<span class="nv">findall</span><span class="ss">(</span><span class="nv">r</span><span class="s2">&quot;</span><span class="s">(i)[a-z]+</span><span class="s2">&quot;</span>, <span class="s2">&quot;</span><span class="s">%123Abc%45xyz&amp;</span><span class="s2">&quot;</span><span class="ss">)</span>
[<span class="s1">&#39;</span><span class="s">Abc</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">xyz</span><span class="s1">&#39;</span>]
下面这么写好看多了吧？

<span class="o">&gt;&gt;&gt;</span> <span class="nv">pattern</span> <span class="o">=</span> <span class="nv">r</span><span class="s2">&quot;&quot;&quot;</span>
...  <span class="ss">(</span><span class="nv">d</span><span class="o">+</span><span class="ss">)</span> # <span class="nv">number</span>
...  <span class="ss">(</span>[<span class="nv">a</span><span class="o">-</span><span class="nv">z</span>]<span class="o">+</span><span class="ss">)</span> # <span class="nv">letter</span>
... <span class="s2">&quot;&quot;&quot;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nv">re</span>.<span class="nv">findall</span><span class="ss">(</span><span class="nv">pattern</span>, <span class="s2">&quot;</span><span class="s">%123Abcn%45xyz&amp;</span><span class="s2">&quot;</span>, <span class="nv">re</span>.<span class="nv">I</span> <span class="o">|</span> <span class="nv">re</span>.<span class="nv">S</span> <span class="o">|</span> <span class="nv">re</span>.<span class="nv">X</span><span class="ss">)</span>
[<span class="ss">(</span><span class="s1">&#39;</span><span class="s">123</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">Abc</span><span class="s1">&#39;</span><span class="ss">)</span>, <span class="ss">(</span><span class="s1">&#39;</span><span class="s">45</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">xyz</span><span class="s1">&#39;</span><span class="ss">)</span>]
组操作

命名组：<span class="ss">(</span><span class="nv">P</span>...<span class="ss">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="nv">m</span> <span class="nv">in</span> <span class="nv">re</span>.<span class="nv">finditer</span><span class="ss">(</span><span class="nv">r</span><span class="s2">&quot;</span><span class="s">(P&lt;number&gt;d+)(P&lt;letter&gt;[a-z]+)</span><span class="s2">&quot;</span>, <span class="s2">&quot;</span><span class="s">%123Abc%45xyz&amp;</span><span class="s2">&quot;</span>, <span class="nv">re</span>.<span class="nv">I</span><span class="ss">)</span>:
...  <span class="nv">print</span> <span class="nv">m</span>.<span class="nv">groupdict</span><span class="ss">()</span>
...
{<span class="s1">&#39;</span><span class="s">number</span><span class="s1">&#39;</span>: <span class="s1">&#39;</span><span class="s">123</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">letter</span><span class="s1">&#39;</span>: <span class="s1">&#39;</span><span class="s">Abc</span><span class="s1">&#39;</span>}
{<span class="s1">&#39;</span><span class="s">number</span><span class="s1">&#39;</span>: <span class="s1">&#39;</span><span class="s">45</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">letter</span><span class="s1">&#39;</span>: <span class="s1">&#39;</span><span class="s">xyz</span><span class="s1">&#39;</span>}
无捕获组：<span class="ss">(</span>:...<span class="ss">)</span>，作为匹配条件，但不返回。

<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="nv">m</span> <span class="nv">in</span> <span class="nv">re</span>.<span class="nv">finditer</span><span class="ss">(</span><span class="nv">r</span><span class="s2">&quot;</span><span class="s">(:d+)([a-z]+)</span><span class="s2">&quot;</span>, <span class="s2">&quot;</span><span class="s">%123Abc%45xyz&amp;</span><span class="s2">&quot;</span>, <span class="nv">re</span>.<span class="nv">I</span><span class="ss">)</span>:
...  <span class="nv">print</span> <span class="nv">m</span>.<span class="nv">groups</span><span class="ss">()</span>
...
<span class="ss">(</span><span class="s1">&#39;</span><span class="s">Abc</span><span class="s1">&#39;</span>,<span class="ss">)</span>
<span class="ss">(</span><span class="s1">&#39;</span><span class="s">xyz</span><span class="s1">&#39;</span>,<span class="ss">)</span>
反向引用： 或 <span class="ss">(</span><span class="nv">P</span><span class="o">=</span><span class="nv">name</span><span class="ss">)</span>，引用前面的组。

<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="nv">m</span> <span class="nv">in</span> <span class="nv">re</span>.<span class="nv">finditer</span><span class="ss">(</span><span class="nv">r</span><span class="s2">&quot;</span><span class="s">&lt;a&gt;w+&lt;/a&gt;</span><span class="s2">&quot;</span>, <span class="s2">&quot;</span><span class="s">%&lt;a&gt;123Abc&lt;/a&gt;%&lt;b&gt;45xyz&lt;/b&gt;&amp;</span><span class="s2">&quot;</span><span class="ss">)</span>:
...  <span class="nv">print</span> <span class="nv">m</span>.<span class="nv">group</span><span class="ss">()</span>
...
<span class="o">&lt;</span><span class="nv">a</span><span class="o">&gt;</span><span class="mi">123</span><span class="nv">Abc</span><span class="o">&lt;/</span><span class="nv">a</span><span class="o">&gt;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="nv">m</span> <span class="nv">in</span> <span class="nv">re</span>.<span class="nv">finditer</span><span class="ss">(</span><span class="nv">r</span><span class="s2">&quot;</span><span class="s">&lt;(w)&gt;w+&lt;/(1)&gt;</span><span class="s2">&quot;</span>, <span class="s2">&quot;</span><span class="s">%&lt;a&gt;123Abc&lt;/a&gt;%&lt;b&gt;45xyz&lt;/b&gt;&amp;</span><span class="s2">&quot;</span><span class="ss">)</span>:
...  <span class="nv">print</span> <span class="nv">m</span>.<span class="nv">group</span><span class="ss">()</span>
...
<span class="o">&lt;</span><span class="nv">a</span><span class="o">&gt;</span><span class="mi">123</span><span class="nv">Abc</span><span class="o">&lt;/</span><span class="nv">a</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nv">b</span><span class="o">&gt;</span><span class="mi">45</span><span class="nv">xyz</span><span class="o">&lt;/</span><span class="nv">b</span><span class="o">&gt;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="nv">m</span> <span class="nv">in</span> <span class="nv">re</span>.<span class="nv">finditer</span><span class="ss">(</span><span class="nv">r</span><span class="s2">&quot;</span><span class="s">&lt;(P&lt;tag&gt;w)&gt;w+&lt;/(P=tag)&gt;</span><span class="s2">&quot;</span>, <span class="s2">&quot;</span><span class="s">%&lt;a&gt;123Abc&lt;/a&gt;%&lt;b&gt;45xyz&lt;/</span>
<span class="nv">b</span><span class="o">&gt;&amp;</span><span class="s2">&quot;</span><span class="s">):</span>
...  <span class="nv">print</span> <span class="nv">m</span>.<span class="nv">group</span><span class="ss">()</span>
...
<span class="o">&lt;</span><span class="nv">a</span><span class="o">&gt;</span><span class="mi">123</span><span class="nv">Abc</span><span class="o">&lt;/</span><span class="nv">a</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nv">b</span><span class="o">&gt;</span><span class="mi">45</span><span class="nv">xyz</span><span class="o">&lt;/</span><span class="nv">b</span><span class="o">&gt;</span>
正声明 <span class="ss">(</span><span class="o">=</span>...<span class="ss">)</span>：组内容必须出现在右侧，不返回。 负声明 <span class="ss">(</span>...<span class="ss">)</span>：组内容不能出现在右侧，不返回。 反向正声明 <span class="ss">(</span><span class="o">&lt;=</span><span class="ss">)</span>：
组内容必须出现在左侧，不返回。 反向负声明 <span class="ss">(</span><span class="o">&lt;</span><span class="ss">)</span>：组内容不能出现在左侧，不返回。

<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="nv">m</span> <span class="nv">in</span> <span class="nv">re</span>.<span class="nv">finditer</span><span class="ss">(</span><span class="nv">r</span><span class="s2">&quot;</span><span class="s">d+(=[ab])</span><span class="s2">&quot;</span>, <span class="s2">&quot;</span><span class="s">%123Abc%45xyz%780b&amp;</span><span class="s2">&quot;</span>, <span class="nv">re</span>.<span class="nv">I</span><span class="ss">)</span>:
...  <span class="nv">print</span> <span class="nv">m</span>.<span class="nv">group</span><span class="ss">()</span>
...
<span class="mi">123</span>
<span class="mi">780</span>

<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="nv">m</span> <span class="nv">in</span> <span class="nv">re</span>.<span class="nv">finditer</span><span class="ss">(</span><span class="nv">r</span><span class="s2">&quot;</span><span class="s">(&lt;d)[a-z]{3,}</span><span class="s2">&quot;</span>, <span class="s2">&quot;</span><span class="s">%123Abc%45xyz%byse&amp;</span><span class="s2">&quot;</span>, <span class="nv">re</span>.<span class="nv">I</span><span class="ss">)</span>:
... <span class="nv">print</span> <span class="nv">m</span>.<span class="nv">group</span><span class="ss">()</span>
...
<span class="nv">byse</span>
更多信息请阅读官方文档或更专业的书籍。

修改

<span class="nv">split</span>: 用 <span class="nv">pattern</span> 做分隔符切割字符串。如果用 <span class="s2">&quot;</span><span class="s">(pattern)</span><span class="s2">&quot;</span>，那么分隔符也会返回。

<span class="o">&gt;&gt;&gt;</span> <span class="nv">re</span>.<span class="nv">split</span><span class="ss">(</span><span class="nv">r</span><span class="s2">&quot;</span><span class="s">W</span><span class="s2">&quot;</span>, <span class="s2">&quot;</span><span class="s">abc,123,x</span><span class="s2">&quot;</span><span class="ss">)</span>
[<span class="s1">&#39;</span><span class="s">abc</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">123</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">x</span><span class="s1">&#39;</span>]

<span class="o">&gt;&gt;&gt;</span> <span class="nv">re</span>.<span class="nv">split</span><span class="ss">(</span><span class="nv">r</span><span class="s2">&quot;</span><span class="s">(W)</span><span class="s2">&quot;</span>, <span class="s2">&quot;</span><span class="s">abc,123,x</span><span class="s2">&quot;</span><span class="ss">)</span>
[<span class="s1">&#39;</span><span class="s">abc</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">,</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">123</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">,</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">x</span><span class="s1">&#39;</span>]
<span class="nv">sub</span>: 替换子串。可指定替换次数。

<span class="o">&gt;&gt;&gt;</span> <span class="nv">re</span>.<span class="nv">sub</span><span class="ss">(</span><span class="nv">r</span><span class="s2">&quot;</span><span class="s">[a-z]+</span><span class="s2">&quot;</span>, <span class="s2">&quot;</span><span class="s">*</span><span class="s2">&quot;</span>, <span class="s2">&quot;</span><span class="s">abc,123,x</span><span class="s2">&quot;</span><span class="ss">)</span>
<span class="s1">&#39;</span><span class="s">*,123,*</span><span class="s1">&#39;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nv">re</span>.<span class="nv">sub</span><span class="ss">(</span><span class="nv">r</span><span class="s2">&quot;</span><span class="s">[a-z]+</span><span class="s2">&quot;</span>, <span class="s2">&quot;</span><span class="s">*</span><span class="s2">&quot;</span>, <span class="s2">&quot;</span><span class="s">abc,123,x</span><span class="s2">&quot;</span>, <span class="mi">1</span><span class="ss">)</span>
<span class="s1">&#39;</span><span class="s">*,123,x</span><span class="s1">&#39;</span>
<span class="nv">subn</span><span class="ss">()</span> 和 <span class="nv">sub</span><span class="ss">()</span> 差不多，不过返回 <span class="s2">&quot;</span><span class="s">(新字符串，替换次数)</span><span class="s2">&quot;</span>。

<span class="o">&gt;&gt;&gt;</span> <span class="nv">re</span>.<span class="nv">subn</span><span class="ss">(</span><span class="nv">r</span><span class="s2">&quot;</span><span class="s">[a-z]+</span><span class="s2">&quot;</span>, <span class="s2">&quot;</span><span class="s">*</span><span class="s2">&quot;</span>, <span class="s2">&quot;</span><span class="s">abc,123,x</span><span class="s2">&quot;</span><span class="ss">)</span>
<span class="ss">(</span><span class="s1">&#39;</span><span class="s">*,123,*</span><span class="s1">&#39;</span>, <span class="mi">2</span><span class="ss">)</span>
还可以将替换字符串改成函数，以便替换成不同的结果。

<span class="o">&gt;&gt;&gt;</span> <span class="nv">def</span> <span class="nv">repl</span><span class="ss">(</span><span class="nv">m</span><span class="ss">)</span>:
...  <span class="nv">print</span> <span class="nv">m</span>.<span class="nv">group</span><span class="ss">()</span>
...  <span class="k">return</span> <span class="s2">&quot;</span><span class="s">*</span><span class="s2">&quot;</span> <span class="o">*</span> <span class="nv">len</span><span class="ss">(</span><span class="nv">m</span>.<span class="nv">group</span><span class="ss">())</span>
...

<span class="o">&gt;&gt;&gt;</span> <span class="nv">re</span>.<span class="nv">subn</span><span class="ss">(</span><span class="nv">r</span><span class="s2">&quot;</span><span class="s">[a-z]+</span><span class="s2">&quot;</span>, <span class="nv">repl</span>, <span class="s2">&quot;</span><span class="s">abc,123,x</span><span class="s2">&quot;</span><span class="ss">)</span>
<span class="nv">abc</span>
<span class="nv">x</span>
<span class="ss">(</span><span class="s1">&#39;</span><span class="s">***,123,*</span><span class="s1">&#39;</span>, <span class="mi">2</span><span class="ss">)</span>
<span class="nv">StringIO</span>
提供类文件接口的字符串缓冲区，可选用性能更好的 <span class="nv">cStringIO</span> 版本。

<span class="o">&gt;&gt;&gt;</span> <span class="nv">from</span> <span class="nv">contextlib</span> <span class="nv">import</span> <span class="nv">closing</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nv">from</span> <span class="nv">cStringIO</span> <span class="nv">import</span> <span class="nv">StringIO</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nv">with</span> <span class="nv">closing</span><span class="ss">(</span><span class="nv">StringIO</span><span class="ss">(</span><span class="s2">&quot;</span><span class="s">ab</span><span class="s2">&quot;</span><span class="ss">))</span> <span class="nv">as</span> <span class="nv">f</span>:
...  <span class="nv">print</span> <span class="o">&gt;&gt;</span> <span class="nv">f</span>, <span class="s2">&quot;</span><span class="s">cd</span><span class="s2">&quot;</span>
...  <span class="nv">f</span>.<span class="nv">write</span><span class="ss">(</span><span class="s2">&quot;</span><span class="s">1234</span><span class="s2">&quot;</span><span class="ss">)</span>
...  <span class="nv">print</span> <span class="nv">f</span>.<span class="nv">getvalue</span><span class="ss">()</span>
<span class="nv">abcd</span>
<span class="mi">1234</span>
建议用 <span class="nv">with</span> 上下文确保调用 <span class="nv">close</span><span class="ss">()</span> 方法释放所占用内存。用 <span class="nv">getvalue</span><span class="ss">()</span> 返回字符串前，必须确保是打开状态 <span class="ss">(</span><span class="nv">closed</span> <span class="o">=</span> <span class="nv">False</span><span class="ss">)</span>。

<span class="nv">struct</span>
<span class="nv">struct</span> 看上去有点像 <span class="nv">format</span>，区别是它输出的是二进制字节序列。可以通过格式化参数，指定类型、长度、字节序<span class="ss">(</span>大小端<span class="ss">)</span>、内存对齐等。

<span class="o">&gt;&gt;&gt;</span> <span class="nv">from</span> <span class="nv">struct</span> <span class="nv">import</span> <span class="o">*</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nv">hexstr</span> <span class="o">=</span> <span class="nv">lambda</span> <span class="nv">s</span>: <span class="nv">map</span><span class="ss">(</span><span class="nv">lambda</span> <span class="nv">c</span>: <span class="nv">hex</span><span class="ss">(</span><span class="nv">ord</span><span class="ss">(</span><span class="nv">c</span><span class="ss">))</span>, <span class="nv">s</span><span class="ss">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nv">s</span> <span class="o">=</span> <span class="nv">pack</span><span class="ss">(</span><span class="s2">&quot;</span><span class="s">i</span><span class="s2">&quot;</span>, <span class="mi">0</span><span class="nv">x1234</span><span class="ss">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nv">hexstr</span><span class="ss">(</span><span class="nv">s</span><span class="ss">)</span>   # <span class="mi">4</span> 字节整数小端排列
[<span class="s1">&#39;</span><span class="s">0x34</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">0x12</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">0x0</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">0x0</span><span class="s1">&#39;</span>]

<span class="o">&gt;&gt;&gt;</span> <span class="nv">unpack</span><span class="ss">(</span><span class="s2">&quot;</span><span class="s">i</span><span class="s2">&quot;</span>, <span class="nv">s</span><span class="ss">)</span>   # 还原。<span class="mi">4660</span> <span class="o">=</span> <span class="mi">0</span><span class="nv">x1234</span>
<span class="ss">(</span><span class="mi">4660</span>,<span class="ss">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nv">s</span> <span class="o">=</span> <span class="nv">pack</span><span class="ss">(</span><span class="s2">&quot;</span><span class="s">&gt;i</span><span class="s2">&quot;</span>, <span class="mi">0</span><span class="nv">x1234</span><span class="ss">)</span> # 大端

<span class="o">&gt;&gt;&gt;</span> <span class="nv">hexstr</span><span class="ss">(</span><span class="nv">s</span><span class="ss">)</span>
[<span class="s1">&#39;</span><span class="s">0x0</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">0x0</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">0x12</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">0x34</span><span class="s1">&#39;</span>]

<span class="o">&gt;&gt;&gt;</span> <span class="nv">s</span> <span class="o">=</span> <span class="nv">pack</span><span class="ss">(</span><span class="s2">&quot;</span><span class="s">2i2s</span><span class="s2">&quot;</span>, <span class="mi">0</span><span class="nv">x12</span>, <span class="mi">0</span><span class="nv">x34</span>, <span class="s2">&quot;</span><span class="s">ab</span><span class="s2">&quot;</span><span class="ss">)</span>   # 多值。注意指定字符串长度。

<span class="o">&gt;&gt;&gt;</span> <span class="nv">hexstr</span><span class="ss">(</span><span class="nv">s</span><span class="ss">)</span>
[<span class="s1">&#39;</span><span class="s">0x12</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">0x0</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">0x0</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">0x0</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">0x34</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">0x0</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">0x0</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">0x0</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">0x61</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">0x62</span><span class="s1">&#39;</span>]

<span class="o">&gt;&gt;&gt;</span> <span class="nv">unpack</span><span class="ss">(</span><span class="s2">&quot;</span><span class="s">2i2s</span><span class="s2">&quot;</span>, <span class="nv">s</span><span class="ss">)</span>
<span class="ss">(</span><span class="mi">18</span>, <span class="mi">52</span>, <span class="s1">&#39;</span><span class="s">ab</span><span class="s1">&#39;</span><span class="ss">)</span>
还可以将结果输出到 <span class="nv">bytearray</span>、<span class="nv">array</span>、<span class="nv">ctypes</span>.<span class="nv">create_str_buffer</span><span class="ss">()</span> 等缓冲对象中。

<span class="o">&gt;&gt;&gt;</span> <span class="nv">fmt</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">3bi2s</span><span class="s2">&quot;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nv">size</span> <span class="o">=</span> <span class="nv">calcsize</span><span class="ss">(</span><span class="nv">fmt</span><span class="ss">)</span>   # 计算指定格式转换所需的字节长度。

<span class="o">&gt;&gt;&gt;</span> <span class="nv">buffer</span> <span class="o">=</span> <span class="nv">bytearray</span><span class="ss">(</span><span class="nv">size</span><span class="ss">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nv">pack_into</span><span class="ss">(</span><span class="nv">fmt</span>, <span class="nv">buffer</span>, <span class="mi">0</span>, <span class="mi">0</span><span class="nv">x1</span>, <span class="mi">0</span><span class="nv">x2</span>, <span class="mi">0</span><span class="nv">x3</span>, <span class="mi">0</span><span class="nv">x1FFFFF</span>, <span class="s2">&quot;</span><span class="s">ab</span><span class="s2">&quot;</span><span class="ss">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nv">buffer</span>
<span class="nv">bytearray</span><span class="ss">(</span><span class="nv">b</span><span class="s1">&#39;</span><span class="s">x01x02x03x00xffxffx1fx00ab</span><span class="s1">&#39;</span><span class="ss">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nv">unpack_from</span><span class="ss">(</span><span class="nv">fmt</span>, <span class="nv">str</span><span class="ss">(</span><span class="nv">buffer</span><span class="ss">)</span>, <span class="mi">0</span><span class="ss">)</span>
<span class="ss">(</span><span class="mi">1</span>, <span class="mi">2</span>, <span class="mi">3</span>, <span class="mi">2097151</span>, <span class="s1">&#39;</span><span class="s">ab</span><span class="s1">&#39;</span><span class="ss">)</span>
</pre></div>


<h2 id="_5">进制转换</h2>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="kn">import</span> <span class="nn">os</span><span class="o">,</span><span class="nn">sys</span>
<span class="c1"># global definition</span>
<span class="c1"># base = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, A, B, C, D, E, F]</span>
<span class="n">base</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span> <span class="o">+</span> <span class="p">[</span> <span class="nb">chr</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">),</span><span class="nb">ord</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">)</span><span class="o">+</span><span class="mi">6</span><span class="p">)]</span>
<span class="c1"># bin2dec</span>
<span class="c1"># 二进制 to 十进制: int(str,n=10) </span>
<span class="k">def</span> <span class="nf">bin2dec</span><span class="p">(</span><span class="n">string_num</span><span class="p">):</span>
 <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">string_num</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="c1"># hex2dec</span>
<span class="c1"># 十六进制 to 十进制</span>
<span class="k">def</span> <span class="nf">hex2dec</span><span class="p">(</span><span class="n">string_num</span><span class="p">):</span>
 <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">string_num</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span> <span class="mi">16</span><span class="p">))</span>
<span class="c1"># dec2bin</span>
<span class="c1"># 十进制 to 二进制: bin() </span>
<span class="k">def</span> <span class="nf">dec2bin</span><span class="p">(</span><span class="n">string_num</span><span class="p">):</span>
 <span class="n">num</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">string_num</span><span class="p">)</span>
 <span class="n">mid</span> <span class="o">=</span> <span class="p">[]</span>
 <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
  <span class="k">if</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="k">break</span>
  <span class="n">num</span><span class="p">,</span><span class="n">rem</span> <span class="o">=</span> <span class="nb">divmod</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
  <span class="n">mid</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">base</span><span class="p">[</span><span class="n">rem</span><span class="p">])</span>
 <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">mid</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]])</span>
<span class="c1"># dec2hex</span>
<span class="c1"># 十进制 to 八进制: oct() </span>
<span class="c1"># 十进制 to 十六进制: hex() </span>
<span class="k">def</span> <span class="nf">dec2hex</span><span class="p">(</span><span class="n">string_num</span><span class="p">):</span>
 <span class="n">num</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">string_num</span><span class="p">)</span>
 <span class="n">mid</span> <span class="o">=</span> <span class="p">[]</span>
 <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
  <span class="k">if</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="k">break</span>
  <span class="n">num</span><span class="p">,</span><span class="n">rem</span> <span class="o">=</span> <span class="nb">divmod</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span>
  <span class="n">mid</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">base</span><span class="p">[</span><span class="n">rem</span><span class="p">])</span>
 <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">mid</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]])</span>
<span class="c1"># hex2tobin</span>
<span class="c1"># 十六进制 to 二进制: bin(int(str,16)) </span>
<span class="k">def</span> <span class="nf">hex2bin</span><span class="p">(</span><span class="n">string_num</span><span class="p">):</span>
 <span class="k">return</span> <span class="n">dec2bin</span><span class="p">(</span><span class="n">hex2dec</span><span class="p">(</span><span class="n">string_num</span><span class="o">.</span><span class="n">upper</span><span class="p">()))</span>
<span class="c1"># bin2hex</span>
<span class="c1"># 二进制 to 十六进制: hex(int(str,2)) </span>
<span class="k">def</span> <span class="nf">bin2hex</span><span class="p">(</span><span class="n">string_num</span><span class="p">):</span>
 <span class="k">return</span> <span class="n">dec2hex</span><span class="p">(</span><span class="n">bin2dec</span><span class="p">(</span><span class="n">string_num</span><span class="p">))</span>
</pre></div>
</td></tr></table>

<h2 id="lambda-reduce-map-filter-zip">lambda reduce map filter zip</h2>
<div class="codehilite"><pre><span></span>匿名函数<span class="nv">lambda</span>
<span class="nv">lambda</span>语句中，冒号前是参数，可以有多个，用逗号隔开，冒号右边是返回值。
<span class="nv">def</span> <span class="nv">f</span><span class="ss">(</span><span class="nv">x</span>,<span class="nv">y</span><span class="ss">)</span>:
 <span class="k">return</span> <span class="nv">x</span><span class="o">+</span><span class="nv">y</span>
<span class="nv">print</span> <span class="nv">f</span><span class="ss">(</span><span class="mi">2</span>,<span class="mi">3</span><span class="ss">)</span>
# <span class="mi">5</span>
<span class="nv">g</span> <span class="o">=</span> <span class="nv">lambda</span> <span class="nv">x</span>,<span class="nv">y</span>:<span class="nv">x</span><span class="o">+</span><span class="nv">y</span>
<span class="nv">print</span> <span class="nv">g</span><span class="ss">(</span><span class="mi">2</span>,<span class="mi">3</span><span class="ss">)</span>
# <span class="mi">5</span>

<span class="nv">reduce</span> 逐次操作列表的每一项，接受的参数为两个，最后返回一个结果 
<span class="nv">def</span> <span class="nv">add</span><span class="ss">(</span><span class="nv">x</span>,<span class="nv">y</span><span class="ss">)</span>:
 <span class="k">return</span> <span class="nv">x</span><span class="o">+</span><span class="nv">y</span>
<span class="nv">print</span> <span class="nv">reduce</span><span class="ss">(</span><span class="nv">add</span>,<span class="nv">xrange</span><span class="ss">(</span><span class="mi">1</span>,<span class="mi">10</span><span class="ss">))</span>
# <span class="mi">45</span>
<span class="nv">print</span> <span class="nv">reduce</span><span class="ss">(</span><span class="nv">lambda</span> <span class="nv">x</span>,<span class="nv">y</span>:<span class="nv">x</span><span class="o">+</span><span class="nv">y</span>,<span class="nv">xrange</span><span class="ss">(</span><span class="mi">1</span>,<span class="mi">10</span><span class="ss">))</span>
# <span class="mi">45</span>

<span class="nv">map</span>函数
<span class="nv">map</span>函数会根据提供的函数对指定序列做映射。
<span class="nv">print</span> <span class="nv">map</span><span class="ss">(</span><span class="nv">lambda</span> <span class="nv">x</span>: <span class="nv">x</span> <span class="o">**</span> <span class="mi">2</span>, <span class="nv">xrange</span><span class="ss">(</span><span class="mi">1</span>,<span class="mi">6</span><span class="ss">))</span> 对一个序列中的每个元素进行平方运算
# [<span class="mi">1</span>, <span class="mi">4</span>, <span class="mi">9</span>, <span class="mi">16</span>, <span class="mi">25</span>]
<span class="nv">print</span> <span class="nv">map</span><span class="ss">(</span><span class="nv">lambda</span> <span class="nv">x</span>, <span class="nv">y</span>: <span class="nv">x</span> <span class="o">+</span> <span class="nv">y</span>, [<span class="mi">1</span>, <span class="mi">3</span>, <span class="mi">5</span>, <span class="mi">7</span>, <span class="mi">9</span>], [<span class="mi">2</span>, <span class="mi">4</span>, <span class="mi">6</span>, <span class="mi">8</span>, <span class="mi">10</span>]<span class="ss">)</span>
# [<span class="mi">3</span>, <span class="mi">7</span>, <span class="mi">11</span>, <span class="mi">15</span>, <span class="mi">19</span>]
<span class="nv">print</span> <span class="nv">map</span><span class="ss">(</span><span class="nv">None</span>,[<span class="mi">1</span>, <span class="mi">3</span>, <span class="mi">5</span>, <span class="mi">7</span>, <span class="mi">9</span>], [<span class="mi">2</span>, <span class="mi">4</span>, <span class="mi">6</span>, <span class="mi">8</span>, <span class="mi">10</span>]<span class="ss">)</span>   当函数为<span class="nv">None</span>时，操作和<span class="nv">zip</span>相似
# [<span class="ss">(</span><span class="mi">1</span>, <span class="mi">2</span><span class="ss">)</span>, <span class="ss">(</span><span class="mi">3</span>, <span class="mi">4</span><span class="ss">)</span>, <span class="ss">(</span><span class="mi">5</span>, <span class="mi">6</span><span class="ss">)</span>, <span class="ss">(</span><span class="mi">7</span>, <span class="mi">8</span><span class="ss">)</span>, <span class="ss">(</span><span class="mi">9</span>, <span class="mi">10</span><span class="ss">)</span>]

<span class="nv">filter</span>函数
<span class="nv">filter</span>函数会对序列参数<span class="nv">sequence</span>中的每个元素调用<span class="nv">function</span>函数，最后返回的结果包含调用结果为<span class="nv">True</span>的元素。
<span class="nv">def</span> <span class="nv">is_even</span><span class="ss">(</span><span class="nv">x</span><span class="ss">)</span>:
 <span class="k">if</span> <span class="nv">x</span><span class="o">%</span><span class="mi">2</span><span class="o">==</span><span class="mi">0</span>:
  <span class="k">return</span> <span class="nv">True</span>
 <span class="k">return</span> <span class="nv">False</span>
<span class="nv">print</span> <span class="nv">filter</span><span class="ss">(</span><span class="nv">is_even</span>,<span class="nv">xrange</span><span class="ss">(</span><span class="mi">1</span>,<span class="mi">11</span><span class="ss">))</span>  #返回偶数
# [<span class="mi">2</span>, <span class="mi">4</span>, <span class="mi">6</span>, <span class="mi">8</span>, <span class="mi">10</span>]
<span class="nv">print</span> <span class="nv">filter</span><span class="ss">(</span><span class="nv">lambda</span> <span class="nv">x</span>:<span class="nv">x</span><span class="o">%</span><span class="mi">2</span>,<span class="nv">xrange</span><span class="ss">(</span><span class="mi">1</span>,<span class="mi">11</span><span class="ss">))</span>  #返回奇数
# [<span class="mi">1</span>, <span class="mi">3</span>, <span class="mi">5</span>, <span class="mi">7</span>, <span class="mi">9</span>]
如果<span class="nv">function</span>参数为<span class="nv">None</span>，返回结果和<span class="nv">sequence</span>参数相同。

<span class="nv">zip</span>函数
取出每一个数组的元素，然后组合
<span class="nv">x</span> <span class="o">=</span> [<span class="mi">1</span>, <span class="mi">2</span>, <span class="mi">3</span>]
<span class="nv">y</span> <span class="o">=</span> [<span class="mi">4</span>, <span class="mi">5</span>, <span class="mi">6</span>]
<span class="nv">z</span> <span class="o">=</span> [<span class="mi">7</span>, <span class="mi">8</span>, <span class="mi">9</span>]
<span class="nv">xyz</span> <span class="o">=</span> <span class="nv">zip</span><span class="ss">(</span><span class="nv">x</span>, <span class="nv">y</span>, <span class="nv">z</span><span class="ss">)</span>
<span class="nv">print</span> <span class="nv">xyz</span>
# [<span class="ss">(</span><span class="mi">1</span>, <span class="mi">4</span>, <span class="mi">7</span><span class="ss">)</span>, <span class="ss">(</span><span class="mi">2</span>, <span class="mi">5</span>, <span class="mi">8</span><span class="ss">)</span>, <span class="ss">(</span><span class="mi">3</span>, <span class="mi">6</span>, <span class="mi">9</span><span class="ss">)</span>]
<span class="nv">print</span> <span class="nv">zip</span><span class="ss">(</span><span class="o">*</span><span class="nv">xyz</span><span class="ss">)</span>   # 解<span class="nv">zip</span>函数
# [<span class="ss">(</span><span class="mi">1</span>, <span class="mi">2</span>, <span class="mi">3</span><span class="ss">)</span>, <span class="ss">(</span><span class="mi">4</span>, <span class="mi">5</span>, <span class="mi">6</span><span class="ss">)</span>, <span class="ss">(</span><span class="mi">7</span>, <span class="mi">8</span>, <span class="mi">9</span><span class="ss">)</span>]
</pre></div>


<h2 id="_6">多线程</h2>
<div class="codehilite"><pre><span></span><span class="err">多线程</span>
<span class="n">Python</span><span class="err">里，多个</span><span class="n">cpu</span><span class="err">考虑使用多线程，</span><span class="n">io</span><span class="err">（磁盘，网络通讯）多线程</span>

<span class="err">线程执行是无序的，线程是不安全的，共同操作数据时没有检查机制，所有要加锁</span>
<span class="err">默认情况下主线程结束子线程不结束，除非设置</span><span class="n">setDaemon</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">threading</span>
<span class="k">def</span> <span class="nf">worker</span><span class="p">(</span><span class="n">a_tid</span><span class="p">,</span><span class="n">a_account</span><span class="p">):</span>
  <span class="k">print</span> <span class="n">a_tid</span><span class="p">,</span><span class="n">a_account</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">):</span>  
 <span class="n">th</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="n">target</span><span class="o">=</span><span class="n">worker</span><span class="p">,</span><span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="err">‘</span><span class="n">key</span><span class="err">’</span><span class="p">,),</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;a_tid&#39;</span><span class="p">:</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;a_account&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">}</span> <span class="p">)</span> 
<span class="err">产生一个线程对象</span>
<span class="c1">#参数name线程名字，可以不写,参数 target 是要执行的函数, args 里面的是参数列表(一个参数需要加个逗号，代表是，列表),</span>
<span class="n">kwargs</span><span class="err">是字典式的参数列表</span>
 <span class="n">th</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>  <span class="err">启动这个线程</span>

<span class="c1"># 多线程+队列版本： </span>

<span class="kn">import</span> <span class="nn">socket</span> 
<span class="kn">import</span> <span class="nn">threading</span> 
<span class="kn">from</span> <span class="nn">Queue</span> <span class="kn">import</span> <span class="n">Queue</span> 
<span class="k">def</span> <span class="nf">scan</span><span class="p">(</span><span class="n">port</span><span class="p">):</span> 
  <span class="n">s</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">()</span> 
  <span class="n">s</span><span class="o">.</span><span class="n">settimeout</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span> 
  <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">connect_ex</span><span class="p">((</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="n">port</span><span class="p">))</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> 
 <span class="k">print</span> <span class="n">port</span><span class="p">,</span> <span class="s1">&#39;open&#39;</span> 
  <span class="n">s</span><span class="o">.</span><span class="n">close</span><span class="p">()</span> 

<span class="k">def</span> <span class="nf">worker</span><span class="p">():</span> 
  <span class="k">while</span> <span class="ow">not</span> <span class="n">q</span><span class="o">.</span><span class="n">empty</span><span class="p">():</span> 
 <span class="n">port</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>  <span class="err">获取数据队列分配的值</span> 
 <span class="k">try</span><span class="p">:</span> 
   <span class="n">scan</span><span class="p">(</span><span class="n">port</span><span class="p">)</span> 
 <span class="k">finally</span><span class="p">:</span> 
   <span class="n">q</span><span class="o">.</span><span class="n">task_done</span><span class="p">()</span> 

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span> 
  <span class="n">q</span> <span class="o">=</span> <span class="n">Queue</span><span class="p">()</span> 
  <span class="nb">map</span><span class="p">(</span><span class="n">q</span><span class="o">.</span><span class="n">put</span><span class="p">,</span><span class="nb">xrange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">65535</span><span class="p">))</span>  <span class="err">数据放入队列</span>
  <span class="n">threads</span> <span class="o">=</span> <span class="p">[</span><span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">worker</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">500</span><span class="p">)]</span>  <span class="err">定义</span><span class="mi">500</span><span class="err">个线程</span>
  <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="o">.</span><span class="n">start</span><span class="p">(),</span><span class="n">threads</span><span class="p">)</span>   <span class="err">启动线程</span>
  <span class="c1"># q.join() 开启会慢</span>



<span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="err">类的使用：</span>
 <span class="mi">1</span><span class="err">，在自己的线程类的</span> <span class="fm">__init__</span> <span class="err">里调用</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span> <span class="o">=</span> <span class="n">threadname</span><span class="p">)</span> <span class="c1"># threadname 为线程的名字</span>
 <span class="mi">2</span><span class="err">，</span> <span class="n">run</span><span class="p">()</span><span class="err">，通常需要重写，编写代码实现做需要的功能。</span>
 <span class="mi">3</span><span class="err">，</span><span class="n">getName</span><span class="p">()</span><span class="err">，获得线程对象名称</span>
 <span class="mi">4</span><span class="err">，</span><span class="n">setName</span><span class="p">()</span><span class="err">，设置线程对象名称</span>
 <span class="mi">5</span><span class="err">，</span><span class="n">start</span><span class="p">()</span><span class="err">，启动线程</span>
 <span class="mi">6</span><span class="err">，</span><span class="n">join</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span><span class="err">，等待另一线程结束后再运行。如果给出</span><span class="n">timeout</span><span class="err">，则最多阻塞</span><span class="n">timeout</span><span class="err">秒</span>
 <span class="mi">7</span><span class="err">，</span><span class="n">setDaemon</span><span class="p">(</span><span class="nb">bool</span><span class="p">)</span><span class="err">，设置子线程是否随主线程一起结束，必须在</span><span class="n">start</span><span class="p">()</span><span class="err">之前调用。默认为</span> <span class="bp">False</span>
 <span class="mi">8</span><span class="err">，</span><span class="n">isDaemon</span><span class="p">()</span><span class="err">，判断线程是否随主线程一起结束</span>
 <span class="mi">9</span><span class="err">，</span><span class="n">isAlive</span><span class="p">()</span><span class="err">，检查线程是否在运行中。</span>
    <span class="err">此外</span><span class="n">threading</span><span class="err">模块本身也提供了很多方法和其他的类，可以帮助我们更好的使用和管理线程。</span>
    <span class="err">可以参看</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">docs</span><span class="o">.</span><span class="n">python</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="mi">2</span><span class="o">/</span><span class="n">library</span><span class="o">/</span><span class="n">threading</span><span class="o">.</span><span class="n">html</span><span class="err">?</span><span class="n">highlight</span><span class="o">=</span><span class="n">threading</span><span class="c1">#module-threading。</span>

<span class="err">线程锁</span>
<span class="kn">import</span> <span class="nn">threading</span>
<span class="n">lock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>  <span class="err">产生一个锁对象</span>
<span class="n">share</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<span class="n">num</span> <span class="o">=</span> <span class="mi">2</span>
<span class="k">def</span> <span class="nf">AddNum</span><span class="p">():</span>
 <span class="k">global</span> <span class="n">num</span>
 <span class="n">lock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>  <span class="err">获得锁</span>
 <span class="n">share</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
 <span class="k">print</span> <span class="s1">&#39;share add:&#39;</span><span class="p">,</span> <span class="n">num</span>
 <span class="k">print</span> <span class="s1">&#39;now:&#39;</span><span class="p">,</span> <span class="n">share</span>
 <span class="n">num</span> <span class="o">+=</span> <span class="mi">1</span>
 <span class="n">lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>  <span class="err">释放锁</span> 
<span class="n">Condition</span><span class="p">(</span><span class="err">锁上锁</span><span class="p">)</span>
<span class="err">•对于消费者，在消费前检查队列是否为空。</span>
<span class="err">•如果为空，调用</span><span class="n">condition</span><span class="err">实例的</span><span class="n">wait</span><span class="p">()</span><span class="err">方法。</span>
<span class="err">•消费者进入</span><span class="n">wait</span><span class="p">()</span><span class="err">，同时释放所持有的</span><span class="n">lock</span><span class="err">（隐形释放，处于</span><span class="n">wait</span><span class="err">状态就会释放）。</span>
<span class="err">•除非被</span><span class="n">notify</span><span class="err">，否则它不会运行。</span>
<span class="err">•</span> <span class="err">生产者可以</span><span class="n">acquire</span><span class="err">这个</span><span class="n">lock</span><span class="err">，因为它已经被消费者</span><span class="n">release</span><span class="err">。</span>
<span class="err">•当调用了</span><span class="n">condition</span><span class="err">的</span><span class="n">notify</span><span class="p">()</span><span class="err">方法后，消费者被唤醒，但唤醒不意味着它可以开始运行。</span>
<span class="err">•</span><span class="n">notify</span><span class="p">()</span><span class="err">并不释放</span><span class="n">lock</span><span class="err">，调用</span><span class="n">notify</span><span class="p">()</span><span class="err">后，</span><span class="n">lock</span><span class="err">依然被生产者所持有。</span>
<span class="err">•生产者通过</span><span class="n">condition</span><span class="o">.</span><span class="n">release</span><span class="p">()</span><span class="err">显式释放</span><span class="n">lock</span><span class="err">。</span>
<span class="err">•消费者再次开始运行，同时申请锁，现在它可以得到队列中的数据而不会出现</span><span class="ne">IndexError</span><span class="err">异常。</span>

<span class="kn">from</span> <span class="nn">threading</span> <span class="kn">import</span> <span class="n">Condition</span><span class="p">,</span> <span class="n">Thread</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">random</span>


<span class="n">queue</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">condition</span> <span class="o">=</span> <span class="n">Condition</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">ConsumerThread</span><span class="p">(</span><span class="n">Thread</span><span class="p">):</span>
 <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
  <span class="k">global</span> <span class="n">queue</span>
  <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
   <span class="n">condition</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
   <span class="k">if</span> <span class="ow">not</span> <span class="n">queue</span><span class="p">:</span>
    <span class="k">print</span> <span class="s2">&quot;Nothing in queue, consumer is waiting&quot;</span>
    <span class="n">condition</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>  <span class="err">如果</span><span class="n">queue</span><span class="err">为空，进入</span><span class="n">wait</span><span class="p">,</span><span class="err">同时释放锁，唤醒时同时获得锁</span>
    <span class="k">print</span> <span class="s2">&quot;Producer added something to queue and notified the consumer&quot;</span>
   <span class="n">num</span> <span class="o">=</span> <span class="n">queue</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
   <span class="k">print</span> <span class="s2">&quot;Consumed&quot;</span><span class="p">,</span> <span class="n">num</span>
   <span class="n">condition</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
   <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">())</span>

<span class="k">class</span> <span class="nc">ProducerThread</span><span class="p">(</span><span class="n">Thread</span><span class="p">):</span>
 <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
  <span class="n">nums</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
  <span class="k">global</span> <span class="n">queue</span>
  <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
   <span class="n">condition</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>  <span class="err">获得锁</span>
   <span class="n">num</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span>
   <span class="n">queue</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
   <span class="k">print</span> <span class="s2">&quot;Produced&quot;</span><span class="p">,</span> <span class="n">num</span>
   <span class="n">condition</span><span class="o">.</span><span class="n">notify</span><span class="p">()</span>  <span class="err">唤醒</span><span class="n">wait</span>
   <span class="n">condition</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>  <span class="err">释放锁</span>
   <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">())</span>

<span class="n">ProducerThread</span><span class="p">()</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="n">ConsumerThread</span><span class="p">()</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

<span class="err">队列（</span><span class="n">Queue</span><span class="err">）</span>
<span class="err">队列是线程安全</span>
<span class="err">•在原来使用</span><span class="nb">list</span><span class="err">的位置，改为使用</span><span class="n">Queue</span><span class="err">实例（下称队列）。</span>
<span class="err">•这个队列有一个</span><span class="n">condition</span><span class="err">，它有自己的</span><span class="n">lock</span><span class="err">。如果你使用</span><span class="n">Queue</span><span class="err">，你不需要为</span><span class="n">condition</span><span class="err">和</span><span class="n">lock</span><span class="err">而烦恼。</span>
<span class="err">•生生产者调用队列的</span><span class="n">put</span><span class="err">方法来插入数据。</span>
<span class="err">•</span><span class="n">put</span><span class="p">(</span><span class="err">—</span><span class="p">)</span> <span class="err">在插入数据前有一个获取</span><span class="n">lock</span><span class="err">的逻辑。</span>
<span class="err">•同时，</span><span class="n">put</span><span class="p">()</span><span class="err">也会检查队列是否已满。如果已满，它会在内部调用</span><span class="n">wait</span><span class="p">()</span><span class="err">，生产者开始等待。</span>
<span class="err">•</span> <span class="err">消费者使用</span><span class="n">get</span><span class="err">方法。</span>
<span class="err">•</span><span class="n">get</span><span class="p">()</span><span class="err">从队列中移出数据前会获取</span><span class="n">lock</span><span class="err">。</span>
<span class="err">•</span><span class="n">get</span><span class="p">()</span><span class="err">会检查队列是否为空，如果为空，消费者进入等待状态。</span>
<span class="err">•</span><span class="n">get</span><span class="p">()</span><span class="err">和</span><span class="n">put</span><span class="p">()</span><span class="err">都有适当的</span><span class="n">notify</span><span class="p">()</span><span class="err">。现在就去看</span><span class="n">Queue</span><span class="err">的源码吧。</span>
<span class="kn">from</span> <span class="nn">threading</span> <span class="kn">import</span> <span class="n">Thread</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">from</span> <span class="nn">Queue</span> <span class="kn">import</span> <span class="n">Queue</span>

<span class="n">queue</span> <span class="o">=</span> <span class="n">Queue</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">ProducerThread</span><span class="p">(</span><span class="n">Thread</span><span class="p">):</span>
 <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
  <span class="n">nums</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
  <span class="k">global</span> <span class="n">queue</span>
  <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
   <span class="n">num</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span>
   <span class="n">queue</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
   <span class="k">print</span> <span class="s2">&quot;Produced&quot;</span><span class="p">,</span> <span class="n">num</span>
   <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">())</span>

<span class="k">class</span> <span class="nc">ConsumerThread</span><span class="p">(</span><span class="n">Thread</span><span class="p">):</span>
 <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
  <span class="k">global</span> <span class="n">queue</span>
  <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
   <span class="n">num</span> <span class="o">=</span> <span class="n">queue</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
   <span class="c1">#queue.task_done()</span>
   <span class="k">print</span> <span class="s2">&quot;Consumed&quot;</span><span class="p">,</span> <span class="n">num</span>
   <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">())</span>

<span class="n">ProducerThread</span><span class="p">()</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="n">ConsumerThread</span><span class="p">()</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</pre></div>


<h2 id="_7">异常处理</h2>
<div class="codehilite"><pre><span></span>异常处理
出现异常也可以继续执行
<span class="nv">try</span>:
 <span class="nv">s</span> <span class="o">=</span> <span class="nv">input</span><span class="ss">(</span><span class="s1">&#39;</span><span class="s">Enter something --&gt; </span><span class="s1">&#39;</span><span class="ss">)</span> # <span class="nv">Python</span> <span class="mi">2</span> 的输入是 <span class="nv">raw_input</span><span class="ss">()</span>
<span class="nv">except</span> <span class="nv">EOFError</span> <span class="nv">as</span> <span class="nv">e</span>:  捕获<span class="nv">EOFError</span>异常，<span class="nv">e</span>代表异常的详细信息
 <span class="nv">print</span><span class="ss">(</span><span class="s1">&#39;</span><span class="s">nWhy did you do an EOF on me?</span><span class="s1">&#39;</span><span class="ss">)</span>
<span class="nv">except</span>:    捕获所有异常
 <span class="nv">print</span><span class="ss">(</span><span class="s1">&#39;</span><span class="s">nWhy did you do an Exception on me?</span><span class="s1">&#39;</span><span class="ss">)</span>
<span class="k">else</span>:   没有捕捉到异常时执行
 <span class="nv">print</span><span class="ss">(</span><span class="s1">&#39;</span><span class="s">No exception was raised.</span><span class="s1">&#39;</span><span class="ss">)</span>
<span class="nv">finally</span>:   # 不管是否有异常,最后都会执行
 <span class="nv">print</span><span class="ss">(</span><span class="s1">&#39;</span><span class="s">finally .....</span><span class="s1">&#39;</span><span class="ss">)</span>

常见异常<span class="ss">(</span>可避免的<span class="ss">)</span>:
  使用不存在的字典关键字 将引发 <span class="nv">KeyError</span> 异常。
  搜索列表中不存在的值 将引发 <span class="nv">ValueError</span> 异常。
  调用不存在的方法 将引发 <span class="nv">AttributeError</span> 异常。
  引用不存在的变量 将引发 <span class="nv">NameError</span> 异常。
  未强制转换就混用数据类型 将引发 <span class="nv">TypeError</span> 异常。
  导入一个并不存在的模块将引发一个 <span class="nv">ImportError</span> 异常。
<span class="nv">raise</span> 语句
 可以使用 <span class="nv">raise</span> 语句引发异常<span class="ss">(</span>抛出异常<span class="ss">)</span>。你还得指明错误<span class="o">/</span>异常的名称和伴随异常触发的异常对象。
 可以引发 <span class="nv">Error</span> 或 <span class="nv">Exception</span> 类的直接或间接导出类。

 在<span class="nv">Python</span> <span class="mi">3</span>里，抛出自定义异常的语法有细微的变化。
  <span class="nv">Python</span> <span class="mi">2</span>          <span class="nv">Python</span> <span class="mi">3</span>
 ① <span class="nv">raise</span> <span class="nv">MyException</span>        <span class="nv">MyException</span>
 ② <span class="nv">raise</span> <span class="nv">MyException</span>, <span class="s1">&#39;</span><span class="s">error message</span><span class="s1">&#39;</span>      <span class="nv">raise</span> <span class="nv">MyException</span><span class="ss">(</span><span class="s1">&#39;</span><span class="s">error message</span><span class="s1">&#39;</span><span class="ss">)</span>
 ③ <span class="nv">raise</span> <span class="nv">MyException</span>, <span class="s1">&#39;</span><span class="s">error message</span><span class="s1">&#39;</span>, <span class="nv">a_traceback</span>  <span class="nv">raise</span> <span class="nv">MyException</span><span class="ss">(</span><span class="s1">&#39;</span><span class="s">error message</span><span class="s1">&#39;</span><span class="ss">)</span>.<span class="nv">with_traceback</span><span class="ss">(</span><span class="nv">a_traceback</span><span class="ss">)</span>
 ④ <span class="nv">raise</span> <span class="s1">&#39;</span><span class="s">error message</span><span class="s1">&#39;</span>       <span class="nv">unsupported</span><span class="ss">(</span>不支持<span class="ss">)</span>
 说明:
 ① 抛出不带自定义错误信息的异常，这种最简单的形式下，语法没有改变。
 ② 抛出带自定义错误信息的异常时:<span class="nv">Python</span> <span class="mi">2</span>用一个逗号来分隔异常类和错误信息；<span class="nv">Python</span> <span class="mi">3</span>把错误信息作为参数传递给异常类。
 ③ 抛出一个带用户自定义回溯<span class="ss">(</span><span class="nv">stack</span> <span class="nv">trace</span>,堆栈追踪<span class="ss">)</span>的异常。在<span class="nv">Python</span> <span class="mi">2</span>和<span class="mi">3</span>里这语法完全不同。
 ④ 在<span class="nv">Python</span> <span class="mi">2</span>里，可以仅仅抛出一个异常信息。在<span class="nv">Python</span> <span class="mi">3</span>里，这种形式不再被支持。<span class="mi">2</span><span class="nv">to3</span>将会警告你它不能自动修复这种语法。

 例：
 <span class="nv">raise</span> <span class="nv">RuntimeError</span><span class="ss">(</span><span class="s2">&quot;</span><span class="s">有异常发生</span><span class="s2">&quot;</span><span class="ss">)</span>   #抛出异常后脚本退出执行
</pre></div>


<h2 id="_8">函数</h2>
<div class="codehilite"><pre><span></span><span class="err">函数</span>
<span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="err">参数</span><span class="p">):</span>
   <span class="err">““”</span><span class="n">func</span><span class="err">的描述“”“</span>
   <span class="k">print</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>         <span class="c1">#函数体</span>
   <span class="k">return</span>           <span class="c1">#函数内执行到return代表结束，可有返回值，也可以没有返回值，是函数执行的结果</span>
   <span class="k">print</span><span class="p">(</span><span class="err">‘</span><span class="n">func</span><span class="err">’</span><span class="p">)</span>      <span class="c1">#永远看不到这一行</span>

<span class="err">”“”以上只是函数的定义“”“</span>

<span class="n">func</span><span class="p">()</span>         <span class="c1"># 代表调用函数，返回函数的执行结果</span>
<span class="n">func</span>            <span class="c1">#代表函数对象，是引用函数</span>

<span class="err">在函数内</span><span class="k">return</span><span class="err">的返回值可以进行赋值操作</span>


<span class="err">定义函数是在内存中开辟一块空间来存放代码，函数名指向这块内存空间，但是没有执行，加上</span><span class="p">()</span><span class="err">后执行该代码，</span>
<span class="k">return</span><span class="err">的内容为函数的执行的结果，没有</span><span class="k">return</span><span class="err">，结果为</span><span class="bp">None</span><span class="err">，函数执行结果和</span><span class="k">print</span><span class="err">没有关系，</span><span class="k">print</span> <span class="err">只代表打印。</span>
<span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">first</span><span class="p">,</span><span class="n">second</span><span class="p">):</span>
<span class="k">return</span> <span class="n">first</span><span class="o">+</span><span class="n">second</span>

<span class="n">a1</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
<span class="k">print</span> <span class="n">a1</span>
<span class="n">a2</span> <span class="o">=</span> <span class="n">func</span>
<span class="k">print</span> <span class="n">func</span>
<span class="k">print</span> <span class="n">a2</span>
<span class="k">print</span> <span class="n">a2</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span> 
<span class="err">执行结果：</span>
<span class="mi">9</span>
<span class="o">&lt;</span><span class="n">function</span> <span class="n">func</span> <span class="n">at</span> <span class="mh">0x7f38bca44c80</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">function</span> <span class="n">func</span> <span class="n">at</span> <span class="mh">0x7f38bca44c80</span><span class="o">&gt;</span>
<span class="mi">7</span>





<span class="err">可变量参数</span>
<span class="err">参数可以有多个，也可以没有</span>

<span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">arg1</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kw</span><span class="p">):</span>  <span class="c1">#参数名称前加*，代表元组；加**代表字典</span>
 <span class="k">print</span><span class="p">(</span><span class="s1">&#39;arg1:</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">arg1</span><span class="p">)</span>
 <span class="k">print</span> <span class="n">args</span>
 <span class="k">print</span> <span class="n">kw</span>
<span class="n">func</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span><span class="s1">&#39;B&#39;</span><span class="p">,</span><span class="s1">&#39;C&#39;</span><span class="p">,</span><span class="n">D</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">E</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="err">结果：</span>
<span class="n">arg1</span><span class="p">:</span><span class="n">A</span>
<span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">)</span>
<span class="p">{</span><span class="s1">&#39;E&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;D&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>


<span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="n">age</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>     <span class="c1">#参数的默认值  </span>
 <span class="k">pass</span> 
<span class="err">匿名函数</span>
<span class="n">Lambda</span><span class="err">是一个匿名函数，没有函数名，可以使代码更精简，但是具有局限性。</span>


<span class="k">lambda</span><span class="err">语句中，冒号前是参数，可以有多个，用逗号隔开，冒号右边是返回值。</span>

<span class="n">Reduce</span>


<span class="n">Reduce</span><span class="err">为逐次操作列表的每一项，接受的参数为两个，最后返回一个结果。</span>

<span class="err">闭包</span><span class="n">closures</span>
<span class="err">函数套函数</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="k">def</span> <span class="nf">hl</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
 <span class="k">def</span> <span class="nf">wrap</span><span class="p">():</span>
  <span class="n">begin</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span>
  <span class="k">print</span> <span class="n">begin</span>
  <span class="n">func</span><span class="p">()</span>
  <span class="n">end</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span>
  <span class="k">print</span> <span class="n">end</span>
  <span class="k">print</span> <span class="s2">&quot;cost:&quot;</span><span class="p">,</span><span class="n">end</span> <span class="o">-</span> <span class="n">begin</span>
  <span class="k">return</span> <span class="n">end</span> <span class="o">-</span> <span class="n">begin</span>
 <span class="k">return</span> <span class="n">wrap</span>
<span class="k">def</span> <span class="nf">t</span><span class="p">():</span>
 <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">hl</span><span class="p">(</span><span class="n">t</span><span class="p">)()</span>
<span class="err">装饰器</span>
<span class="err">函数执行前扩展一些函数、执行后扩展一些函数</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="k">def</span> <span class="nf">hl</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
 <span class="k">def</span> <span class="nf">wrap</span><span class="p">():</span>
  <span class="n">begin</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span>
  <span class="k">print</span> <span class="n">begin</span>
  <span class="n">func</span><span class="p">()</span>
  <span class="n">end</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span>
  <span class="k">print</span> <span class="n">end</span>
  <span class="k">print</span> <span class="s2">&quot;cost:&quot;</span><span class="p">,</span><span class="n">end</span> <span class="o">-</span> <span class="n">begin</span>
  <span class="k">return</span> <span class="n">end</span> <span class="o">-</span> <span class="n">begin</span>
 <span class="k">return</span> <span class="n">wrap</span>
<span class="nd">@hl</span>
<span class="k">def</span> <span class="nf">t</span><span class="p">():</span>
 <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">t</span><span class="p">()</span>

<span class="c1">##############################</span>
<span class="k">def</span> <span class="nf">mb</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
<span class="k">def</span> <span class="nf">wrap</span><span class="p">():</span>
<span class="k">return</span> <span class="s1">&#39;&lt;b&gt;&#39;</span> <span class="o">+</span> <span class="n">func</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;&lt;/b&gt;&#39;</span>
<span class="k">return</span> <span class="n">wrap</span>
<span class="k">def</span> <span class="nf">mi</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
<span class="k">def</span> <span class="nf">wrap</span><span class="p">():</span>
<span class="k">return</span> <span class="s1">&#39;&lt;i&gt;&#39;</span> <span class="o">+</span> <span class="n">func</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;&lt;/i&gt;&#39;</span>
<span class="k">return</span> <span class="n">wrap</span>
<span class="nd">@mb</span>
<span class="nd">@mi</span>
<span class="k">def</span> <span class="nf">hello</span><span class="p">():</span>
<span class="k">return</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">hello</span><span class="p">())</span>
</pre></div>


<h2 id="_9">字典</h2>
<div class="codehilite"><pre><span></span><span class="nv">dict</span>.<span class="nv">clear</span><span class="ss">()</span> 删除字典中所有元素
<span class="nv">a</span><span class="o">=</span><span class="nv">dict</span><span class="ss">(</span><span class="nv">x</span><span class="o">=</span><span class="mi">1</span>,<span class="nv">y</span><span class="o">=</span><span class="mi">2</span><span class="ss">)</span>  参数无
<span class="nv">a</span>.<span class="nv">clear</span><span class="ss">()</span>  返回值为 <span class="nv">None</span>

<span class="nv">dict</span>.<span class="nv">get</span><span class="ss">(</span><span class="nv">key</span><span class="ss">)</span> 对字典 <span class="nv">dict</span> 中的键 <span class="nv">key</span>,返回它对应的值 <span class="nv">value</span>， 如果字典中不存在此键，
则返回 <span class="nv">None</span>
<span class="nv">a</span><span class="o">=</span><span class="nv">dict</span><span class="ss">(</span><span class="nv">x</span><span class="o">=</span><span class="mi">1</span>,<span class="nv">y</span><span class="o">=</span><span class="mi">2</span><span class="ss">)</span>
<span class="nv">a</span>.<span class="nv">get</span><span class="ss">(</span>‘<span class="nv">x</span>’<span class="ss">)</span> 参数为字符、整数等，返回值为 <span class="nv">values</span> 或 <span class="nv">None</span>

<span class="nv">dict</span>.<span class="nv">keys</span><span class="ss">()</span> 返回一个包含字典中键的列表
<span class="nv">a</span><span class="o">=</span><span class="nv">dict</span><span class="ss">(</span><span class="nv">x</span><span class="o">=</span><span class="mi">1</span>,<span class="nv">y</span><span class="o">=</span><span class="mi">2</span><span class="ss">)</span>  参数无
<span class="nv">a</span>.<span class="nv">keys</span><span class="ss">()</span>  返回值为 <span class="nv">key</span> 组成的列表

<span class="nv">dict</span>.<span class="nv">values</span><span class="ss">()</span> 返回一个包含字典中所有值的列表
<span class="nv">a</span><span class="o">=</span>{‘<span class="nv">x</span>’:<span class="mi">1</span>,’<span class="nv">y</span>’:<span class="mi">2</span>}  参数无
<span class="nv">a</span>.<span class="nv">values</span><span class="ss">()</span> 返回值为 <span class="nv">value</span> 组成的列表

<span class="nv">dict</span>.<span class="nv">items</span><span class="ss">()</span> 返回一个包含字典中<span class="ss">(</span>键, 值<span class="ss">)</span>的列表
<span class="nv">a</span><span class="o">=</span>{‘<span class="nv">x</span>’:<span class="mi">1</span>,’<span class="nv">y</span>’:<span class="mi">2</span>}  参数无
<span class="nv">a</span>.<span class="nv">items</span><span class="ss">()</span> [<span class="ss">(</span><span class="s1">&#39;</span><span class="s">y</span><span class="s1">&#39;</span>, <span class="mi">2</span><span class="ss">)</span>, <span class="ss">(</span><span class="s1">&#39;</span><span class="s">x</span><span class="s1">&#39;</span>, <span class="mi">1</span><span class="ss">)</span>]  返回值为（<span class="nv">key</span>，<span class="nv">value</span>）组成的列表

<span class="nv">dict</span>.<span class="nv">copy</span><span class="ss">()</span> 返回字典（浅复制）的一个副本 
<span class="nv">a</span><span class="o">=</span>{‘<span class="nv">x</span>’:<span class="mi">1</span>,’<span class="nv">y</span>’:<span class="mi">2</span>}  参数无
<span class="nv">b</span><span class="o">=</span><span class="nv">a</span>.<span class="nv">copy</span><span class="ss">()</span> 返回值为字典

<span class="nv">dict</span>.<span class="nv">has_key</span><span class="ss">(</span><span class="nv">key</span><span class="ss">)</span> 测试 <span class="nv">dict</span> 中是否有 <span class="nv">key</span>
<span class="nv">a</span>.<span class="nv">has_key</span><span class="ss">(</span>‘<span class="nv">x</span>’<span class="ss">)</span> 参数为字符、整数等（可以为 <span class="nv">key</span>，也可以不是）
<span class="k">return</span> <span class="nv">boole</span>  返回值为布尔值（<span class="nv">True</span> <span class="nv">or</span> <span class="nv">False</span>）

<span class="nv">dict</span>.<span class="nv">iteritems</span><span class="ss">()</span> 返回（<span class="nv">key</span>,<span class="nv">value</span>）的迭代器，由于 <span class="k">for</span> 循环
<span class="nv">a</span> <span class="o">=</span> {<span class="s1">&#39;</span><span class="s">a</span><span class="s1">&#39;</span>:<span class="mi">1</span>,<span class="s1">&#39;</span><span class="s">b</span><span class="s1">&#39;</span>:<span class="mi">2</span>}
<span class="k">for</span> <span class="nv">k</span>,<span class="nv">v</span> <span class="nv">in</span> <span class="nv">a</span>.<span class="nv">iteritems</span><span class="ss">()</span>: <span class="k">for</span> 循环调用
... <span class="nv">print</span> <span class="nv">k</span>,<span class="nv">v</span>
...
<span class="nv">a</span> <span class="mi">1</span>
<span class="nv">b</span> <span class="mi">2</span>
<span class="nv">s</span><span class="o">=</span> <span class="nv">a</span>.<span class="nv">iteritems</span><span class="ss">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nv">s</span>.<span class="k">next</span><span class="ss">()</span> <span class="k">next</span> 方法调用
<span class="ss">(</span><span class="s1">&#39;</span><span class="s">a</span><span class="s1">&#39;</span>, <span class="mi">1</span><span class="ss">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nv">s</span>.<span class="k">next</span><span class="ss">()</span>
<span class="ss">(</span><span class="s1">&#39;</span><span class="s">b</span><span class="s1">&#39;</span>, <span class="mi">2</span><span class="ss">)</span>

<span class="nv">dict</span>.<span class="nv">iterkeys</span><span class="ss">()</span> 返回 <span class="nv">key</span> 的迭代器
<span class="nv">dict</span>.<span class="nv">itervalues</span><span class="ss">()</span> 返回 <span class="nv">value</span> 的迭代器

<span class="nv">dict</span>.<span class="nv">pop</span><span class="ss">(</span><span class="nv">key</span>[,<span class="nv">default</span>]<span class="ss">)</span> 如果字典中 <span class="nv">key</span> 键存在，删除并返回 <span class="nv">dict</span>[<span class="nv">key</span>]，如果 <span class="nv">key</span> 键不存在，
且没有给出 <span class="nv">default</span> 的值，引发 <span class="nv">KeyError</span> 异常
<span class="nv">a</span><span class="o">=</span>{‘<span class="nv">x</span>’:<span class="mi">1</span>,’<span class="nv">y</span>’:<span class="mi">2</span>,’<span class="nv">z</span>’:<span class="mi">3</span>} 
<span class="nv">a</span>.<span class="nv">pop</span><span class="ss">(</span>‘<span class="nv">x</span>’<span class="ss">)</span> <span class="mi">1</span>  参数为 <span class="nv">key</span>
<span class="nv">a</span>.<span class="nv">pop</span><span class="ss">(</span>‘<span class="nv">abc</span>’,’<span class="nv">sky</span>’<span class="ss">)</span> <span class="nv">sky</span> 返回值为 <span class="nv">value</span>

<span class="nv">dict</span>.<span class="nv">popitem</span><span class="ss">()</span> 删除第一个键值对
<span class="nv">a</span><span class="o">=</span>{‘<span class="nv">x</span>’:<span class="mi">1</span>,’<span class="nv">y</span>’:<span class="mi">2</span>,’<span class="nv">z</span>’:<span class="mi">3</span>}
<span class="nv">a</span>.<span class="nv">popitem</span><span class="ss">()</span> 参数无
<span class="ss">(</span>‘<span class="nv">x</span>’,<span class="mi">1</span><span class="ss">)</span>  返回值为删除的（<span class="nv">key</span>，<span class="nv">value</span>）

<span class="nv">dict</span>.<span class="nv">setdefault</span><span class="ss">(</span><span class="nv">key</span>, <span class="nv">default</span><span class="o">=</span><span class="nv">None</span><span class="ss">)</span> 如果字典中不存在 <span class="nv">key</span> 键，由 <span class="nv">dict</span>[<span class="nv">key</span>]<span class="o">=</span><span class="nv">default</span> 为它赋值。
<span class="nv">a</span><span class="o">=</span>{‘<span class="nv">x</span>’:<span class="mi">1</span>}
<span class="nv">a</span>.<span class="nv">setdefalut</span><span class="ss">(</span>‘<span class="nv">y</span>’<span class="ss">)</span>  参数为 <span class="nv">key</span>
<span class="nv">a</span>.<span class="nv">setdefault</span><span class="ss">(</span>‘<span class="nv">z</span>’,<span class="mi">3</span><span class="ss">)</span>  返回值为 <span class="nv">value</span> 或 <span class="nv">None</span>
{<span class="s1">&#39;</span><span class="s">x</span><span class="s1">&#39;</span>: <span class="mi">1</span>, <span class="s1">&#39;</span><span class="s">y</span><span class="s1">&#39;</span>: <span class="nv">None</span>, <span class="s1">&#39;</span><span class="s">z</span><span class="s1">&#39;</span>: <span class="mi">3</span>}

<span class="nv">dict</span>.<span class="nv">update</span><span class="ss">(</span><span class="nv">dict2</span><span class="ss">)</span> 将字典 <span class="nv">dict2</span> 的键<span class="o">-</span>值对添加到字典 <span class="nv">dict</span>
<span class="nv">a</span> <span class="o">=</span> {<span class="s1">&#39;</span><span class="s">a</span><span class="s1">&#39;</span>:<span class="mi">1</span>}  <span class="nv">b</span> <span class="o">=</span> {<span class="s1">&#39;</span><span class="s">b</span><span class="s1">&#39;</span>:<span class="mi">2</span>}
<span class="nv">a</span>.<span class="nv">update</span><span class="ss">(</span><span class="nv">b</span><span class="ss">)</span> 参数为字典
<span class="o">&gt;&gt;&gt;</span> <span class="nv">a</span>  返回值为 <span class="nv">None</span>
{<span class="s1">&#39;</span><span class="s">a</span><span class="s1">&#39;</span>: <span class="mi">1</span>, <span class="s1">&#39;</span><span class="s">b</span><span class="s1">&#39;</span>: <span class="mi">2</span>}

<span class="nv">dict</span>.<span class="nv">fromkeys</span><span class="ss">(</span><span class="nv">seq</span>, <span class="nv">val</span><span class="o">=</span><span class="nv">None</span><span class="ss">)</span> 创建并返回一个新字典， 以 <span class="nv">seq</span> 中的元素做该字典的键， <span class="nv">val</span> 做
该字典中所有键对应的初始值<span class="ss">(</span>如果不提供此值，则默认为 <span class="nv">None</span><span class="ss">)</span>
<span class="nv">a</span>.<span class="nv">fromkeys</span><span class="ss">(</span>‘<span class="nv">d</span>’,<span class="mi">3</span><span class="ss">)</span>  参数为 <span class="nv">key</span> 和 <span class="nv">value</span>（可以可无），并不修改原字典
{<span class="s1">&#39;</span><span class="s">d</span><span class="s1">&#39;</span>: <span class="mi">3</span>}  返回一个字典
<span class="nv">a</span><span class="o">=</span>{<span class="s1">&#39;</span><span class="s">a</span><span class="s1">&#39;</span>: <span class="mi">1</span>, <span class="s1">&#39;</span><span class="s">b</span><span class="s1">&#39;</span>: <span class="mi">2</span>}
<span class="o">&gt;&gt;&gt;</span> <span class="nv">a</span>.<span class="nv">viewitems</span><span class="ss">()</span>
<span class="nv">dict_items</span><span class="ss">(</span>[<span class="ss">(</span><span class="s1">&#39;</span><span class="s">a</span><span class="s1">&#39;</span>, <span class="mi">1</span><span class="ss">)</span>, <span class="ss">(</span><span class="s1">&#39;</span><span class="s">b</span><span class="s1">&#39;</span>, <span class="mi">2</span><span class="ss">)</span>]<span class="ss">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nv">a</span>.<span class="nv">viewkeys</span><span class="ss">()</span>
<span class="nv">dict_keys</span><span class="ss">(</span>[<span class="s1">&#39;</span><span class="s">a</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">b</span><span class="s1">&#39;</span>]<span class="ss">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nv">a</span>.<span class="nv">viewvalues</span><span class="ss">()</span>
<span class="nv">dict_values</span><span class="ss">(</span>[<span class="mi">1</span>, <span class="mi">2</span>]<span class="ss">)</span>

排序
<span class="nv">sorted</span><span class="ss">(</span><span class="nv">dic1</span>.<span class="nv">iteritems</span><span class="ss">()</span>,<span class="nv">key</span><span class="o">=</span><span class="nv">lambda</span> <span class="nv">key</span>:<span class="nv">key</span>[<span class="mi">0</span>],<span class="nv">reverse</span><span class="o">=</span><span class="nv">True</span><span class="ss">)</span>  按照<span class="nv">key</span>排序，<span class="nv">reverse</span><span class="o">=</span><span class="nv">True</span>反转，从大到小
<span class="nv">sorted</span><span class="ss">(</span><span class="nv">dic1</span>.<span class="nv">iteritems</span><span class="ss">()</span>,<span class="nv">key</span><span class="o">=</span><span class="nv">lambda</span> <span class="nv">key</span>:<span class="nv">key</span>[<span class="mi">1</span>],<span class="nv">reverse</span><span class="o">=</span><span class="nv">True</span><span class="ss">)</span>  按照<span class="nv">value</span>排序
</pre></div>


<h2 id="_10">类与对象</h2>
<div class="codehilite"><pre><span></span><span class="n">类与对象class</span><span class="err">（</span><span class="n">oop</span><span class="err">）</span><span class="w"></span>
<span class="n">web</span><span class="w"> </span><span class="n">flask</span><span class="w"></span>
<span class="n">运维</span><span class="w"> </span><span class="n">salt</span><span class="w"> </span><span class="n">zabbix</span><span class="w"> </span><span class="n">cobbler</span><span class="w"></span>
<span class="n">大数据</span><span class="w"> </span><span class="n">hadoop</span><span class="w"></span>

<span class="n">类的属性</span><span class="w">  </span><span class="n">类里面的变量</span><span class="err">，</span><span class="n">实例化后可以修改</span><span class="w"></span>
<span class="n">类的方法</span><span class="w">  </span><span class="n">类里面的函数</span><span class="w"></span>

<span class="n">类的构造器</span><span class="err">，</span><span class="n">解构器</span><span class="w"></span>
<span class="w">   </span><span class="n">def</span><span class="w"> </span><span class="n">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">)</span><span class="err">:</span><span class="w"></span>
<span class="w">       </span><span class="n">在实例初始化是隐藏调用</span><span class="w"></span>
<span class="w">   </span><span class="n">def</span><span class="w"> </span><span class="n">__del__</span><span class="p">(</span><span class="n">self</span><span class="p">)</span><span class="err">:</span><span class="w"></span>
<span class="w">       </span><span class="n">在实例消亡时隐藏调用实例化</span><span class="w">  </span><span class="n">f1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Friut</span><span class="p">(</span><span class="s1">&#39;app&#39;</span><span class="p">,</span><span class="mi">33</span><span class="p">)</span><span class="w"></span>
<span class="n">self表示实例化的名字</span><span class="w"></span>

<span class="n">基类</span><span class="w">  </span><span class="n">包含</span><span class="w">   </span><span class="n">子类</span><span class="w"> </span><span class="n">包含</span><span class="w">   </span><span class="n">对象</span><span class="w"></span>
<span class="n">类和函数都是可调用的</span><span class="w"></span>
<span class="n">实现一个计数器</span><span class="err">，</span><span class="n">统计多少的实例</span><span class="w"></span>
<span class="k">class</span><span class="w"> </span><span class="n">Friut</span><span class="p">(</span><span class="k">object</span><span class="p">)</span><span class="err">:</span><span class="w">            </span><span class="n">定义类</span><span class="w"></span>
<span class="nf">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w">                   </span><span class="n">类的一个属性</span><span class="w"></span>
<span class="n">def</span><span class="w"> </span><span class="n">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">weight</span><span class="p">)</span><span class="err">:</span><span class="w">       </span><span class="n">初始类的实例的属性</span><span class="w"></span>
<span class="n">self</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">name</span><span class="w"></span>
<span class="n">self</span><span class="p">.</span><span class="n">weight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">weight</span><span class="w"></span>
<span class="n">Friut</span><span class="p">.</span><span class="nf">count</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="n">def</span><span class="w"> </span><span class="n">info</span><span class="p">(</span><span class="n">self</span><span class="p">)</span><span class="err">:</span><span class="w">                 </span><span class="n">类包含的一个的对象或方法</span><span class="w"></span>
<span class="k">print</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">name</span><span class="p">,</span><span class="n">self</span><span class="p">.</span><span class="n">weight</span><span class="p">,</span><span class="n">Friut</span><span class="p">.</span><span class="nf">count</span><span class="w"></span>

<span class="n">类的方法</span><span class="w"></span>
<span class="w">   </span><span class="nv">@staticmethod</span><span class="w"></span>
<span class="w">   </span><span class="n">def</span><span class="w"> </span><span class="n">func_name</span><span class="p">()</span><span class="w"></span>
<span class="w">       </span><span class="n">他的调用只能通过类名</span><span class="p">.</span><span class="n">func_name</span><span class="p">()</span><span class="w"></span>
<span class="w">   </span><span class="nv">@classmethod</span><span class="w"></span>
<span class="w">   </span><span class="n">def</span><span class="w"> </span><span class="n">func_name</span><span class="p">(</span><span class="n">self</span><span class="p">)</span><span class="w"></span>
<span class="w">       </span><span class="n">调用方式类名</span><span class="p">.</span><span class="n">func_name</span><span class="p">()</span><span class="w"> </span><span class="n">或者</span><span class="w"> </span><span class="n">实例名</span><span class="p">.</span><span class="n">func_name</span><span class="p">()</span><span class="w"></span>

<span class="n">通过dir</span><span class="p">(</span><span class="n">类名</span><span class="p">)</span><span class="n">查看</span><span class="w"></span>
<span class="n">__doc__定义类时的描述</span><span class="w"></span>
<span class="n">__name__类的名字</span><span class="w"></span>
<span class="n">__module__</span><span class="w"> </span><span class="n">模块的名称</span><span class="w">  </span><span class="n">__main__</span><span class="w"></span>
<span class="n">__base__类的基类</span><span class="w"></span>
<span class="n">__dict__所有类的方法和属性</span><span class="w"></span>

<span class="n">类的继承</span><span class="err">、</span><span class="n">封装</span><span class="w"></span>
<span class="k">class</span><span class="w"> </span><span class="n">Parent</span><span class="p">(</span><span class="k">object</span><span class="p">)</span><span class="err">:</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="n">define</span><span class="w"> </span><span class="n">parent</span><span class="w"> </span><span class="k">class</span><span class="w"></span>
<span class="n">def</span><span class="w"> </span><span class="n">myMethod</span><span class="p">(</span><span class="n">self</span><span class="p">)</span><span class="err">:</span><span class="w"></span>
<span class="k">print</span><span class="w"> </span><span class="s1">&#39;Calling parent method&#39;</span><span class="w"></span>
<span class="n">def</span><span class="w"> </span><span class="n">setAttr</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="n">attr</span><span class="p">)</span><span class="err">:</span><span class="w"></span>
<span class="n">Parent</span><span class="p">.</span><span class="n">parentAttr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">attr</span><span class="w"></span>

<span class="k">class</span><span class="w"> </span><span class="n">Child</span><span class="p">(</span><span class="n">Parent</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="n">define</span><span class="w"> </span><span class="n">child</span><span class="w"> </span><span class="k">class</span><span class="w">  </span><span class="n">继承Parent</span><span class="w"></span>
<span class="n">def</span><span class="w"> </span><span class="n">myMethod</span><span class="w"> </span><span class="p">(</span><span class="n">self</span><span class="p">)</span><span class="err">:</span><span class="w"></span>
<span class="k">print</span><span class="w"> </span><span class="s1">&#39;Calling child method&#39;</span><span class="w">      </span><span class="n">覆盖父类的myMethod方法</span><span class="w"></span>

<span class="n">隐藏类的方法</span><span class="w"></span>
<span class="k">class</span><span class="w"> </span><span class="n">JustCounter</span><span class="p">(</span><span class="k">object</span><span class="p">)</span><span class="err">:</span><span class="w"></span>
<span class="n">__secretCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"></span>
<span class="n">def</span><span class="w"> </span><span class="nf">count</span><span class="p">(</span><span class="n">self</span><span class="p">)</span><span class="err">:</span><span class="w"></span>
<span class="n">self</span><span class="p">.</span><span class="n">__secretCount</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="k">print</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">__secretCount</span><span class="w"></span>
<span class="n">counter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JustCounter</span><span class="p">()</span><span class="w"></span>
<span class="n">counter</span><span class="p">.</span><span class="nf">count</span><span class="p">()</span><span class="w"></span>
<span class="k">print</span><span class="w"> </span><span class="n">counter</span><span class="p">.</span><span class="n">__secretCount</span><span class="w"></span>
<span class="n">实例化后无法直接调用</span><span class="err">，</span><span class="n">只能由class调用</span><span class="w"></span>

<span class="n">super</span><span class="w"></span>
<span class="k">class</span><span class="w"> </span><span class="n">A</span><span class="p">(</span><span class="k">object</span><span class="p">)</span><span class="err">:</span><span class="w">   </span>
<span class="n">def</span><span class="w"> </span><span class="n">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">)</span><span class="err">:</span><span class="w"></span>
<span class="k">print</span><span class="w"> </span><span class="ss">&quot;enter A&quot;</span><span class="w"></span>
<span class="k">class</span><span class="w"> </span><span class="n">B</span><span class="p">(</span><span class="n">A</span><span class="p">)</span><span class="err">:</span><span class="w">  </span><span class="err">#</span><span class="w"></span>
<span class="n">def</span><span class="w"> </span><span class="n">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">)</span><span class="err">:</span><span class="w"></span>
<span class="k">print</span><span class="w"> </span><span class="ss">&quot;enter B&quot;</span><span class="w"></span>
<span class="n">super</span><span class="p">(</span><span class="n">B</span><span class="p">,</span><span class="w"> </span><span class="n">self</span><span class="p">).</span><span class="n">__init__</span><span class="p">()</span><span class="w"></span>
<span class="k">print</span><span class="w"> </span><span class="ss">&quot;leave B&quot;</span><span class="w"></span>

<span class="n">变量范围</span><span class="w"></span>
<span class="n">B</span><span class="w"> </span><span class="n">内建build</span><span class="w"> </span><span class="ow">in</span><span class="err">：</span><span class="n">没有定义过</span><span class="err">，</span><span class="n">拿来就能用的</span><span class="w"></span>
<span class="n">G</span><span class="w"> </span><span class="n">全局</span><span class="w"> </span><span class="k">global</span><span class="w"></span>
<span class="n">E</span><span class="w"> </span><span class="n">闭包</span><span class="w"></span>
<span class="n">L</span><span class="w"> </span><span class="n">本地变量</span><span class="w"> </span><span class="k">local</span><span class="w"></span>



<span class="n">模块</span><span class="w"></span>
<span class="n">import</span><span class="w"> </span><span class="n">模块或者py文件</span><span class="w"></span>
<span class="n">在以下位置寻找</span><span class="w"></span>
<span class="n">import</span><span class="w"> </span><span class="n">sys</span><span class="w"></span>
<span class="k">print</span><span class="w"> </span><span class="n">sys</span><span class="p">.</span><span class="k">path</span><span class="w"></span>
</pre></div>


<h2 id="_11">迭代器</h2>
<div class="codehilite"><pre><span></span>迭代器
节省内存空间
<span class="mi">1</span>.<span class="k">for</span><span class="o">-</span><span class="nv">in</span> 语句在底层都是对一个 <span class="nv">Iterator</span><span class="ss">(</span>迭代器<span class="ss">)</span> 对象进行操作的
<span class="mi">2</span>.使用了 <span class="nv">yield</span> 关键字的函数就是一个 <span class="nv">Generator</span><span class="ss">(</span>生成器<span class="ss">)</span> 函数，被调用的时候生成一个可以控制自己运行的迭代器
<span class="mi">3</span>.调用使用了 <span class="nv">yield</span> 关键字的函数,最好用 <span class="k">for</span><span class="o">-</span><span class="nv">in</span> 语句
迭代器是一个对象，它实现了迭代器协议，一般需要实现如下两个方法
<span class="mi">1</span>. <span class="k">next</span> 方法<span class="ss">(</span>返回容器的下一个元素<span class="ss">)</span>  <span class="mi">2</span>. <span class="nv">__iter__</span> 方法（返回迭代器自身）
<span class="nv">type</span><span class="ss">(</span><span class="nv">iter</span><span class="ss">(</span><span class="nv">range</span><span class="ss">(</span><span class="mi">10</span><span class="ss">)))</span>
<span class="nv">Out</span>[<span class="mi">5</span>]: <span class="nv">listiterator</span>

对一个对象调用 <span class="nv">iter</span><span class="ss">()</span> 就可以得到它的迭代器。它的语法如下:
<span class="nv">iter</span><span class="ss">(</span><span class="nv">obj</span><span class="ss">)</span>
如果传递一个参数给 <span class="nv">iter</span><span class="ss">()</span> ，它会检查你传递的是不是一个序列，如果是，那么很简单:
根据索引从 <span class="mi">0</span> 一直迭代到序列结束。另一个创建迭代器的方法是使用类，一个实现了 <span class="nv">__iter__</span><span class="ss">()</span> 和 <span class="k">next</span><span class="ss">()</span> 方法的类可以作为迭代器使用.
<span class="nv">iter</span><span class="ss">(</span><span class="nv">func</span>，<span class="nv">sentinel</span><span class="ss">)</span>
如果是传递两个参数给 <span class="nv">iter</span><span class="ss">()</span> ，它会重复地调用 <span class="nv">func</span> ，直到迭代器的下个值等于<span class="nv">sentinel</span>。
<span class="nv">it</span> <span class="o">=</span> <span class="nv">iter</span><span class="ss">(</span>[<span class="mi">1</span>, <span class="mi">2</span>, <span class="mi">3</span>, <span class="mi">4</span>, <span class="mi">5</span>]<span class="ss">)</span>
<span class="k">while</span> <span class="nv">True</span>:
 <span class="nv">try</span>:
  <span class="nv">x</span> <span class="o">=</span> <span class="k">next</span><span class="ss">(</span><span class="nv">it</span><span class="ss">)</span> 获得下一个值
 <span class="nv">except</span> <span class="nv">StopIteration</span>: 遇到<span class="nv">StopIteration</span>就退出循环（已经没有数据了）
  <span class="k">break</span>
</pre></div>


<h2 id="_12">字符串</h2>
<div class="codehilite"><pre><span></span>空格，特殊的符号 处理
<span class="nv">str</span>.<span class="nv">rstrip</span><span class="ss">()</span> 删除 <span class="nv">str</span> 字符串末尾的空格
<span class="nv">str</span>.<span class="nv">lstrip</span><span class="ss">()</span> 删除 <span class="nv">str</span> 字符串开始的空格
<span class="nv">str</span>.<span class="nv">strip</span><span class="ss">()</span>  在 <span class="nv">str</span> 上执行 <span class="nv">lstrip</span><span class="ss">()</span>和 <span class="nv">rstrip</span><span class="ss">()</span>
参数均为无，返回值均为修改后的字符串，原字符串无变化

<span class="nv">str</span>.<span class="nv">center</span><span class="ss">(</span><span class="nv">width</span><span class="ss">)</span>  返回一个原字符串居中,并使用空格填充至长度 <span class="nv">width</span> 的新字符串
<span class="nv">str</span>.<span class="nv">ljust</span><span class="ss">(</span><span class="nv">width</span><span class="ss">)</span> 返回一个原字符串左对齐,并使用空格填充至长度 <span class="nv">width</span> 的新字符串
<span class="nv">str</span>.<span class="nv">rjust</span><span class="ss">(</span><span class="nv">width</span><span class="ss">)</span> 返回一个原字符串右对齐,并使用空格填充至长度 <span class="nv">width</span> 的新字符串
<span class="nv">string</span>.<span class="nv">zfill</span><span class="ss">(</span><span class="nv">width</span><span class="ss">)</span>  返回长度为 <span class="nv">width</span> 的字符串，原字符串 <span class="nv">string</span> 右对齐，前面填充 <span class="mi">0</span>
<span class="nv">str</span>.<span class="nv">expandtabs</span><span class="ss">(</span><span class="nv">tabsize</span><span class="o">=</span><span class="mi">8</span><span class="ss">)</span>  把字符串 <span class="nv">str</span> 中的 <span class="nv">tab</span> 符号转为空格，默认的空格数是 <span class="mi">8</span>
参数为整数  返回值为修改后的字符串
<span class="nv">a</span><span class="o">=</span>‘<span class="nv">t123abc23t</span>’
<span class="nv">a</span>.<span class="nv">strip</span><span class="ss">()</span> ‘<span class="mi">123</span><span class="nv">abc123</span>’
<span class="nv">a</span>.<span class="nv">srtip</span><span class="ss">(</span>‘<span class="mi">123</span>’<span class="ss">)</span> ‘<span class="nv">t123abc23t</span>’
<span class="nv">a</span>.<span class="nv">rstrip</span><span class="ss">()</span> ‘<span class="nv">t123abc23</span>’
<span class="nv">a</span>.<span class="nv">lsrtip</span><span class="ss">(</span>‘<span class="mi">123</span>’<span class="ss">)</span> ‘<span class="nv">t123abc23t</span>’
<span class="nv">s</span>.<span class="nv">expandtabs</span><span class="ss">(</span><span class="mi">4</span><span class="ss">)</span>  <span class="s1">&#39;</span><span class="s"> 123abc23 </span><span class="s1">&#39;</span>
<span class="nv">s</span><span class="o">=</span><span class="s1">&#39;</span><span class="s">hello</span><span class="s1">&#39;</span>
<span class="nv">s</span>.<span class="nv">center</span><span class="ss">(</span><span class="mi">20</span><span class="ss">)</span>  <span class="s1">&#39;</span><span class="s"> hello</span>
<span class="s1">&#39;</span>

字符串的大小写转换
<span class="nv">string</span>.<span class="nv">title</span><span class="ss">()</span>  返回<span class="s2">&quot;</span><span class="s">标题化</span><span class="s2">&quot;</span>的 <span class="nv">string</span>,就是说所有单词都是以大写开始， 其余字母均为小写
<span class="nv">str</span>.<span class="nv">lower</span><span class="ss">()</span> 转换 <span class="nv">string</span> 中所有大写字符为小写
<span class="nv">str</span>.<span class="nv">upper</span><span class="ss">()</span> 转换 <span class="nv">string</span> 中所有小写字符为大写
<span class="nv">str</span>.<span class="nv">swapcase</span><span class="ss">()</span>  翻转 <span class="nv">string</span> 中的大小写
<span class="nv">str</span>.<span class="nv">capitalize</span><span class="ss">()</span>  把字符串的第一个字符大写
参数均为无，返回值均为修改后的字符串，原字符串无变化

字符串的判断
参数均为无，返回值均为布尔值
<span class="nv">str</span>.<span class="nv">isalnum</span><span class="ss">()</span> 
如果 <span class="nv">str</span> 至少有一个字符并且所有字符都是字母或数字则返回 <span class="nv">True</span>,否则返回 <span class="nv">False</span>
<span class="nv">str</span>.<span class="nv">isalpha</span><span class="ss">()</span>
如果 <span class="nv">str</span> 至少有一个字符并且所有字符都是字母则返回 <span class="nv">True</span>,否则返回 <span class="nv">False</span>
<span class="nv">str</span>.<span class="nv">isdigit</span><span class="ss">()</span>
如果 <span class="nv">str</span> 只包含数字则返回 <span class="nv">True</span> 否则返回 <span class="nv">False</span>
<span class="nv">str</span>.<span class="nv">isdecimal</span><span class="ss">()</span>
如果 <span class="nv">string</span> 只包含十进制数字则返回 <span class="nv">True</span> 否则返回 <span class="nv">False</span>
<span class="nv">str</span>.<span class="nv">isspace</span><span class="ss">()</span>
如果 <span class="nv">str</span> 中只包含空格，则返回 <span class="nv">True</span>，否则返回 <span class="nv">False</span>
<span class="nv">str</span>.<span class="nv">istitle</span><span class="ss">()</span>
如果 <span class="nv">str</span> 是标题化的<span class="ss">(</span>见 <span class="nv">title</span><span class="ss">())</span>则返回 <span class="nv">True</span>，否则返回 <span class="nv">False</span>
<span class="nv">str</span>.<span class="nv">isupper</span><span class="ss">()</span>  如果 <span class="nv">str</span> 中包含至少一个区分大小写的字符，并且所有这些<span class="ss">(</span>区分大小写的<span class="ss">)</span>字符
都是大写，则返回 <span class="nv">True</span>，否则返回 <span class="nv">False</span>
<span class="nv">str</span>.<span class="nv">islower</span><span class="ss">()</span>  如果 <span class="nv">str</span> 中包含至少一个区分大小写的字符，并且所有这些<span class="ss">(</span>区分大小写的<span class="ss">)</span>字符
都是小写，则返回 <span class="nv">True</span>，否则返回 <span class="nv">False</span>
#################################################
参数为字符串或元组，返回值为布尔值（<span class="nv">True</span> <span class="nv">or</span> <span class="nv">False</span>）
<span class="nv">str</span>.<span class="nv">startswith</span><span class="ss">(</span><span class="nv">obj</span>, <span class="nv">beg</span><span class="o">=</span><span class="mi">0</span>,<span class="k">end</span><span class="o">=</span><span class="nv">len</span><span class="ss">(</span><span class="nv">string</span><span class="ss">))</span>  检查字符串是否是以 <span class="nv">obj</span> 开头，是则返回 <span class="nv">True</span>，否则返回
<span class="nv">False</span>。如果 <span class="nv">beg</span> 和 <span class="k">end</span> 指定值，则在指定范围内检查
<span class="nv">str</span>.<span class="nv">endswith</span><span class="ss">(</span><span class="nv">obj</span>, <span class="nv">beg</span><span class="o">=</span><span class="mi">0</span>,<span class="k">end</span><span class="o">=</span><span class="nv">len</span><span class="ss">(</span><span class="nv">string</span><span class="ss">))</span>  检查字符串是否以 <span class="nv">obj</span> 结束，如果 <span class="nv">beg</span> 或者 <span class="k">end</span> 指定则
检查指定的范围内是否以 <span class="nv">obj</span> 结束，如果是，返回 <span class="nv">True</span>,否则返回 <span class="nv">False</span>
字符串的分割，组合，查找，替换
<span class="nv">str</span>.<span class="nv">join</span><span class="ss">(</span><span class="nv">sqp</span><span class="ss">)</span> 以 <span class="nv">string</span> 作为分隔符，将 <span class="nv">seq</span> 中所有的元素<span class="ss">(</span>字符串表示<span class="ss">)</span>合并为一个
新的字符串
<span class="nv">l</span><span class="o">=</span>[<span class="s1">&#39;</span><span class="s">I</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">am</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">tom</span><span class="s1">&#39;</span>]  参数为元组、列表、字典，且内容为字符串
<span class="s1">&#39;</span><span class="s">--</span><span class="s1">&#39;</span>.<span class="nv">join</span><span class="ss">(</span><span class="nv">l</span><span class="ss">)</span> <span class="s1">&#39;</span><span class="s">I--am--tom</span><span class="s1">&#39;</span>  返回值为元组、列表、字典的 <span class="nv">key</span> 和 <span class="nv">str</span> 的合并的新字符串
<span class="nv">str</span>.<span class="nv">split</span><span class="ss">(</span><span class="nv">str</span><span class="o">=</span><span class="s2">&quot;&quot;</span>, <span class="nv">num</span><span class="o">=</span><span class="nv">string</span>.<span class="nv">count</span><span class="ss">(</span><span class="nv">str</span><span class="ss">))</span>
以 <span class="nv">str</span> 为分隔符切片 <span class="nv">string</span>，如果 <span class="nv">num</span> 有指定值，则仅分隔 <span class="nv">num</span> 个子字符串
<span class="nv">astr</span><span class="o">=</span>‘<span class="nv">I</span> <span class="o">|</span> <span class="nv">am</span> <span class="o">|</span> <span class="nv">tom</span><span class="o">!</span>’  参数为分隔符和分割次数（可有可无）
<span class="nv">astr</span>.<span class="nv">split</span><span class="ss">(</span>‘<span class="o">|</span>’<span class="ss">)</span> [<span class="s1">&#39;</span><span class="s">I </span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s"> am </span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s"> tom!</span><span class="s1">&#39;</span>]  返回值为分割后的列表
<span class="nv">string</span>.<span class="nv">find</span><span class="ss">(</span><span class="nv">str</span>, <span class="nv">beg</span><span class="o">=</span><span class="mi">0</span>, <span class="k">end</span><span class="o">=</span><span class="nv">len</span><span class="ss">(</span><span class="nv">string</span><span class="ss">))</span> 检测 <span class="nv">str</span> 是否包含在 <span class="nv">string</span> 中， 如果 <span class="nv">beg</span> 和 <span class="k">end</span> 指定范围，
则检查是否包含在指定范围内，如果是返回开始的索引值，否则返回<span class="o">-</span><span class="mi">1</span>
<span class="nv">string</span>.<span class="nv">index</span><span class="ss">(</span><span class="nv">str</span>, <span class="nv">beg</span><span class="o">=</span><span class="mi">0</span>, <span class="k">end</span><span class="o">=</span><span class="nv">len</span><span class="ss">(</span><span class="nv">string</span><span class="ss">))</span> 
跟 <span class="nv">find</span><span class="ss">()</span>方法一样，只不过如果 <span class="nv">str</span> 不在 <span class="nv">string</span> 中会报一个 <span class="nv">ValueError</span> 异常.
<span class="nv">string</span>.<span class="nv">rfind</span><span class="ss">(</span><span class="nv">str</span>, <span class="nv">beg</span><span class="o">=</span><span class="mi">0</span>,<span class="k">end</span><span class="o">=</span><span class="nv">len</span><span class="ss">(</span><span class="nv">string</span><span class="ss">)</span> <span class="ss">)</span>  类似于 <span class="nv">find</span><span class="ss">()</span>函数，不过是从右边开始查找.
<span class="nv">string</span>.<span class="nv">rindex</span><span class="ss">(</span> <span class="nv">str</span>, <span class="nv">beg</span><span class="o">=</span><span class="mi">0</span>,<span class="k">end</span><span class="o">=</span><span class="nv">len</span><span class="ss">(</span><span class="nv">string</span><span class="ss">))</span>  类似于 <span class="nv">index</span><span class="ss">()</span>，不过是从右边开始
<span class="nv">a</span><span class="o">=</span>‘<span class="nv">i</span> <span class="nv">am</span> <span class="nv">a</span> <span class="nv">student</span>’  参数为字符串和开始结束的索引（可以可无）
<span class="nv">a</span>.<span class="nv">find</span><span class="ss">(</span>‘<span class="nv">am</span>’<span class="ss">)</span> <span class="mi">2</span>  返回值为开始的索引值或<span class="o">-</span><span class="mi">1</span>
<span class="nv">str</span>.<span class="nv">replace</span><span class="ss">(</span><span class="nv">str1</span>, <span class="nv">str2</span>, <span class="nv">num</span><span class="o">=</span><span class="nv">string</span>.<span class="nv">count</span><span class="ss">(</span><span class="nv">str1</span><span class="ss">))</span>
把 <span class="nv">str</span> 中的 <span class="nv">str1</span> 替换成 <span class="nv">str2</span>,如果 <span class="nv">num</span> 指定，则替换不超过 <span class="nv">num</span> 次
<span class="nv">a</span><span class="o">=</span>‘<span class="nv">du</span>,<span class="nv">hello</span>,<span class="nv">du</span> <span class="nv">bye</span>’  参数为原字符串和新字符串，替换次数（可以可无）
<span class="nv">a</span>.<span class="nv">replace</span><span class="ss">(</span>‘<span class="nv">du</span>’,’<span class="nv">minchao</span>’,<span class="mi">1</span><span class="ss">)</span> <span class="s1">&#39;</span><span class="s">minchao,hello,du bye</span><span class="s1">&#39;</span>  返回值为替换后的字符串，原来的不变
<span class="nv">string</span>.<span class="nv">count</span><span class="ss">(</span><span class="nv">str</span>, <span class="nv">beg</span><span class="o">=</span><span class="mi">0</span>, <span class="k">end</span><span class="o">=</span><span class="nv">len</span><span class="ss">(</span><span class="nv">string</span><span class="ss">))</span> 返回 <span class="nv">str</span> 在 <span class="nv">string</span> 里面出现的次数，如果 <span class="nv">beg</span> 或者
<span class="k">end</span> 指定则返回指定范围内 <span class="nv">str</span> 出现的次数
<span class="nv">a</span><span class="o">=</span>‘<span class="nv">du</span>,<span class="nv">hello</span>,<span class="nv">du</span> <span class="nv">bye</span>’  参数为字符串和开始结束的索引（可有可无）
<span class="nv">a</span>.<span class="nv">count</span><span class="ss">(</span>‘<span class="nv">du</span>’,<span class="mi">3</span><span class="ss">)</span> <span class="k">return</span> <span class="mi">1</span> 返回值为 <span class="nv">str</span> 出现的次数
<span class="nv">string</span>.<span class="nv">partition</span><span class="ss">(</span><span class="nv">str</span><span class="ss">)</span>
有点像 <span class="nv">find</span><span class="ss">()</span>和 <span class="nv">split</span><span class="ss">()</span>的结合体,从 <span class="nv">str</span> 出现的第一个位置起,把 字 符 串 <span class="nv">string</span> 分 成 一 个 <span class="mi">3</span> 元 素
的 元 组 <span class="ss">(</span><span class="nv">string_pre_str</span>,<span class="nv">str</span>,<span class="nv">string_post_str</span><span class="ss">)</span>,如果 <span class="nv">string</span> 中不包含 <span class="nv">str</span> 则 <span class="nv">string_pre_str</span> <span class="o">==</span> <span class="nv">string</span>.
<span class="nv">s</span><span class="o">=</span><span class="s1">&#39;</span><span class="s">a b c d e</span><span class="s1">&#39;</span>  参数为字符串，返回值为分割后组成的元组
<span class="nv">s</span>.<span class="nv">partition</span><span class="ss">(</span><span class="s1">&#39;</span><span class="s">c</span><span class="s1">&#39;</span><span class="ss">)</span> <span class="o">&gt;&gt;</span> <span class="ss">(</span><span class="s1">&#39;</span><span class="s">a b </span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">c</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s"> d e</span><span class="s1">&#39;</span><span class="ss">)</span>
<span class="nv">s</span>.<span class="nv">partition</span><span class="ss">(</span><span class="s1">&#39;</span><span class="s">f</span><span class="s1">&#39;</span><span class="ss">)</span> <span class="o">&gt;&gt;</span> <span class="ss">(</span><span class="s1">&#39;</span><span class="s">a b c d e</span><span class="s1">&#39;</span>, <span class="s1">&#39;&#39;</span>, <span class="s1">&#39;&#39;</span><span class="ss">)</span>
<span class="nv">string</span>.<span class="nv">rpartition</span><span class="ss">(</span><span class="nv">str</span><span class="ss">)</span>  类似于 <span class="nv">partition</span><span class="ss">()</span>函数,不过是从右边开始查找.
<span class="nv">string</span>.<span class="nv">splitlines</span><span class="ss">(</span><span class="nv">num</span><span class="o">=</span><span class="nv">string</span>.<span class="nv">count</span><span class="ss">(</span><span class="s1">&#39;</span><span class="s">n</span><span class="s1">&#39;</span><span class="ss">))</span>
按照行分隔，返回一个包含各行作为元素的列表，如果 <span class="nv">num</span> 指定则仅切片 <span class="nv">num</span> 个行.
<span class="nv">s</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span><span class="s">332 参数为整数，返回值为字符各行组成的列表</span>
<span class="mi">2432</span>
<span class="mi">4343</span><span class="s1">&#39;&#39;&#39;</span>
<span class="nv">s</span>.<span class="nv">splitlines</span><span class="ss">()</span>  [<span class="s1">&#39;</span><span class="s">332</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">2432</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">4343</span><span class="s1">&#39;</span>]

字符串 编码
<span class="nv">string</span>.<span class="nv">decode</span><span class="ss">(</span><span class="nv">encoding</span><span class="o">=</span><span class="s1">&#39;</span><span class="s">UTF-8</span><span class="s1">&#39;</span>, <span class="nv">errors</span><span class="o">=</span><span class="s1">&#39;</span><span class="s">strict</span><span class="s1">&#39;</span><span class="ss">)</span>
以 <span class="nv">encoding</span> 指定的编码格式解码 <span class="nv">string</span>，如果出错默认报一个 <span class="nv">ValueError</span> 的 异 常 ， 除 非 <span class="nv">errors</span>
指 定 的 是 <span class="s1">&#39;</span><span class="s">ignore</span><span class="s1">&#39;</span> 或 者<span class="s1">&#39;</span><span class="s">replace</span><span class="s1">&#39;</span>
<span class="nv">s</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">你好</span><span class="s1">&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nv">s</span>
<span class="s1">&#39;</span><span class="s">xc4xe3xbaxc3</span><span class="s1">&#39;</span>
<span class="nv">s</span>.<span class="nv">decode</span><span class="ss">(</span><span class="nv">encoding</span><span class="o">=</span><span class="s1">&#39;</span><span class="s">GBK</span><span class="s1">&#39;</span><span class="ss">)</span>
<span class="nv">u</span><span class="s1">&#39;</span><span class="s">u4f60u597d</span><span class="s1">&#39;</span>
<span class="nv">string</span>.<span class="nv">encode</span><span class="ss">(</span><span class="nv">encoding</span><span class="o">=</span><span class="s1">&#39;</span><span class="s">UTF-8</span><span class="s1">&#39;</span>, <span class="nv">errors</span><span class="o">=</span><span class="s1">&#39;</span><span class="s">strict</span><span class="s1">&#39;</span><span class="ss">)</span>
以 <span class="nv">encoding</span> 指定的编码格式编码 <span class="nv">string</span>，如果出错默认报一个 <span class="nv">ValueError</span> 的异常，除非 <span class="nv">errors</span> 指定
的是<span class="s1">&#39;</span><span class="s">ignore</span><span class="s1">&#39;</span>或者<span class="s1">&#39;</span><span class="s">replace</span><span class="s1">&#39;</span>
</pre></div>


<h2 id="_13">元组</h2>
<div class="codehilite"><pre><span></span><span class="n">tuple</span><span class="p">.</span><span class="k">index</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">j</span><span class="o">=</span><span class="nf">len</span><span class="p">(</span><span class="n">list</span><span class="p">))</span><span class="w"> </span><span class="n">返回</span><span class="w"> </span><span class="n">tuple</span><span class="o">[</span><span class="n">k</span><span class="o">]==</span><span class="n">obj</span><span class="w"> </span><span class="n">的</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="n">值</span><span class="p">,</span><span class="n">并且</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="n">的范围在</span><span class="err">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span><span class="w"></span>
<span class="n">a</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="w">  </span><span class="n">参数为</span><span class="w"> </span><span class="n">tuple</span><span class="w"> </span><span class="n">中的值和开始结束的索引</span><span class="err">（</span><span class="n">可以可无</span><span class="err">）</span><span class="w"></span>
<span class="n">a</span><span class="p">.</span><span class="k">index</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="n">返回值为</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="n">在</span><span class="w"> </span><span class="n">tuple</span><span class="w"> </span><span class="n">的索引值</span><span class="w"></span>

<span class="n">tuple</span><span class="p">.</span><span class="nf">count</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="n">返回一个对象</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="n">在</span><span class="w"> </span><span class="n">tuple</span><span class="w"> </span><span class="n">中出现的次数</span><span class="w"></span>
<span class="n">a</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span><span class="w">  </span><span class="n">参数为字符串</span><span class="err">、</span><span class="n">整数</span><span class="err">、</span><span class="n">浮点数等</span><span class="w"></span>
<span class="n">a</span><span class="p">.</span><span class="nf">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="n">返回值为参数在</span><span class="w"> </span><span class="n">tuple</span><span class="w"> </span><span class="n">的出现次数</span><span class="w"></span>
</pre></div>


<h2 id="eval">eval</h2>
<div class="codehilite"><pre><span></span><span class="err">功能：将字符串</span><span class="n">str</span><span class="err">当成有效的表达式来求值并返回计算结果。</span>

<span class="err">语法：</span> <span class="n">eval</span><span class="p">(</span><span class="k">source</span><span class="p">[,</span> <span class="n">globals</span><span class="p">[,</span> <span class="n">locals</span><span class="p">]])</span>

<span class="err">参数：</span>

<span class="k">source</span><span class="err">：一个</span><span class="n">Python</span><span class="err">表达式或函数</span><span class="n">compile</span><span class="p">()</span><span class="err">返回的代码对象</span>

<span class="n">globals</span><span class="err">：可选。必须是</span><span class="k">dictionary</span>

<span class="n">locals</span><span class="err">：可选。任意</span><span class="k">map</span><span class="err">对象</span>

<span class="err">可以把</span><span class="n">list</span><span class="p">,</span><span class="n">tuple</span><span class="p">,</span><span class="n">dict</span><span class="err">和</span><span class="n">string</span><span class="err">相互转化。</span> 
<span class="n">eval</span><span class="err">可以执行命令，如果只是格式转换，</span> <span class="n">ast</span><span class="err">模块的</span> <span class="n">ast</span><span class="p">.</span><span class="n">literal_eval</span><span class="p">()</span> <span class="err">更加安全</span>

<span class="err">字符串转换成列表</span>

<span class="n">a</span> <span class="o">=</span> <span class="ss">&quot;[[1,2], [3,4], [5,6], [7,8], [9,0]]&quot;</span>

<span class="k">type</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

<span class="k">type</span> <span class="s1">&#39;str&#39;</span>

<span class="n">b</span> <span class="o">=</span> <span class="n">eval</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

<span class="n">print</span> <span class="n">b</span>

<span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]</span>

<span class="k">type</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>

<span class="k">type</span> <span class="s1">&#39;list&#39;</span>

<span class="err">字符串转换成字典</span>

<span class="n">a</span> <span class="o">=</span> <span class="ss">&quot;{1: &#39;a&#39;, 2: &#39;b&#39;}&quot;</span>

<span class="k">type</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

<span class="k">type</span> <span class="s1">&#39;str&#39;</span>

<span class="n">b</span> <span class="o">=</span> <span class="n">eval</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

<span class="n">print</span> <span class="n">b</span>

<span class="err">{</span><span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;b&#39;</span><span class="err">}</span>

<span class="k">type</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>

<span class="k">type</span> <span class="s1">&#39;dict&#39;</span>
</pre></div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href=".." title="home" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                home
              </span>
            </div>
          </a>
        
        
          <a href="../python-lib/" title="python-lib" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                python-lib
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.ac79c3b0.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>